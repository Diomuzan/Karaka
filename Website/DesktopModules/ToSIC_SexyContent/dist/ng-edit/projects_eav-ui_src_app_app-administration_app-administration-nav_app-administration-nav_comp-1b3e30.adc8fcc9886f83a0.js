"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30"],{9596:(st,B,l)=>{l.r(B),l.d(B,{AppAdministrationNavComponent:()=>Jn});var m=l(91),b=l(8071),Z=l(3839),Q=l(4520),a=l(9736),K=l(5043),k=l(6041),p=l(196),Y=l(217);const w={App:"App",Site:"Site",Global:"Global"};var L=l(9731),t=l(9039),O=l(6861),$=l(9743),T=l(9498),V=l(1417),u=l(895),_=l(6515),h=l(257),I=l(2484),P=l(1465),R=l(6480);let C=(()=>{class o{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(R.H7,16))};static#e=this.\u0275pipe=t.Yjl({name:"safeResourceUrl",type:o,pure:!0})}return o})(),S=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-getting-started"]],inputs:{gettingStartedUrl:"gettingStartedUrl"},decls:2,vars:3,consts:[[1,"iframe",3,"src"]],template:function(i,n){1&i&&(t._UZ(0,"iframe",0),t.ALo(1,"safeResourceUrl")),2&i&&t.Q6J("src",t.lcZ(1,1,n.gettingStartedUrl),t.uOi)},dependencies:[C],styles:[".iframe[_ngcontent-%COMP%]{border:none;width:100%;height:calc(100vh - 209px)}@media (max-width: 600px){.iframe[_ngcontent-%COMP%]{height:calc(100vh - 161px)}}"]})}return o})();var d=l(6253),x=l(1527),U=l(3317),y=l(4323),D=l(7662),z=l(3488),X=l(3955),j=l(8657),rt=l(5253),tt=l(6433),ct=l(8834),vt=l(237),N=l(2957),xt=l(5530),yt=l(3188),v=l(8128),W=l(5392);function At(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createOrEditMetadata())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function bt(o,s){1&o&&(t.TgZ(0,"div",10)(1,"mat-icon"),t._uU(2,"edit"),t.qZA()())}function Zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openMetadata())}),t.TgZ(1,"mat-icon",12),t._uU(2," local_offer "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Metadata.length)("matBadgeHidden",!e.contentType.Metadata.length)}}function wt(o,s){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2," local_offer "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Metadata.length)("matBadgeHidden",!e.contentType.Metadata.length)}}function St(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openPermissions())}),t.TgZ(1,"mat-icon",12),t._uU(2," person"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Permissions.Count)("matBadgeHidden",!e.contentType.Permissions.Count)}}function Ut(o,s){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2," person"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Permissions.Count)("matBadgeHidden",!e.contentType.Permissions.Count)}}function Mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.editContentType())}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Rename"),t.qZA()(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openRestApi())}),t._UZ(6,"mat-icon",17),t.TgZ(7,"span"),t._uU(8,"REST API"),t.qZA()(),t.TgZ(9,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportType())}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Export content type"),t.qZA()(),t.TgZ(14,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openDataExport())}),t.TgZ(15,"mat-icon"),t._uU(16,"cloud_download"),t.qZA(),t.TgZ(17,"span"),t._uU(18,"Export data"),t.qZA()(),t.TgZ(19,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openDataImport())}),t.TgZ(20,"mat-icon"),t._uU(21,"cloud_upload"),t.qZA(),t.TgZ(22,"span"),t._uU(23,"Import data"),t.qZA()(),t.TgZ(24,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteContentType())}),t.TgZ(25,"mat-icon"),t._uU(26,"delete"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.contentType.EditInfo.DisableRename),t.xp6(24),t.Q6J("disabled",e.contentType.EditInfo.DisableDelete)}}let kt=(()=>{class o{agInit(e){this.params=e,this.contentType=this.params.data;const i=this.params.enablePermissionsGetter();this.enablePermissions=i&&(0,yt.M)().test(this.contentType.StaticName)}refresh(e){return!0}createOrEditMetadata(){this.params.onCreateOrEditMetadata(this.contentType)}openPermissions(){this.params.onOpenPermissions(this.contentType)}editContentType(){this.params.onEdit(this.contentType)}openMetadata(){this.params.onOpenMetadata(this.contentType)}openRestApi(){this.params.onOpenRestApi(this.contentType)}exportType(){this.params.onTypeExport(this.contentType)}openDataExport(){this.params.onOpenDataExport(this.contentType)}openDataImport(){this.params.onOpenDataImport(this.contentType)}deleteContentType(){this.params.onDelete(this.contentType)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-actions"]],decls:13,vars:7,consts:[[1,"actions-component"],["class","eav-grid-action-button highlight","matRipple","","tippy","Description and more"],["class","eav-grid-action-button disabled"],["class","eav-grid-action-button highlight","matRipple","","tippy","Metadata"],["class","eav-grid-action-button highlight","matRipple","","tippy","Permissions"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Description and more",1,"eav-grid-action-button","highlight",3,"click"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","Metadata",1,"eav-grid-action-button","highlight",3,"click"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,At,3,0,"div",1)(2,bt,3,0,"div",2)(3,Zt,3,2,"div",3)(4,wt,3,2,"div",2)(5,St,3,2,"div",4)(6,Ut,3,2,"div",2),t.TgZ(7,"div",5)(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA()()(),t.TgZ(10,"mat-menu",6,7),t.YNc(12,Mt,29,2,"ng-template",8),t.qZA()),2&i){const r=t.MAs(11);t.xp6(1),t.um2(1,!n.contentType.EditInfo.DisableEdit||n.contentType.Properties?1:-1),t.xp6(1),t.um2(2,n.contentType.EditInfo.DisableEdit&&!n.contentType.Properties?2:-1),t.xp6(1),t.um2(3,n.contentType.EditInfo.DisableMetadata?-1:3),t.xp6(1),t.um2(4,n.contentType.EditInfo.DisableMetadata?4:-1),t.xp6(1),t.um2(5,!n.contentType.EditInfo.DisableEdit&&n.enablePermissions?5:-1),t.xp6(1),t.um2(6,n.contentType.EditInfo.DisableEdit||!n.enablePermissions?6:-1),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},dependencies:[T.$,_.Hw,h.wG,v.VK,v.OP,v.KA,v.p6,W.k]})}return o})(),Ot=(()=>{class o{agInit(e){this.params=e,this.contentType=e.data,this.value=e.value,this.tooltip=this.contentType.EditInfo.ReadOnly?`${this.contentType.EditInfo.ReadOnlyMessage?`${this.contentType.EditInfo.ReadOnlyMessage}\n\n`:""}This ContentType shares the definition of #${this.contentType.SharedDefId} so you can't edit it here. Read 2sxc.org/help?tag=shared-types`:"Edit fields",this.icon=this.contentType.EditInfo.ReadOnly?"share":"dns"}refresh(e){return!0}editFields(){this.params.onEditFields(this.contentType)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-fields"]],decls:4,vars:4,consts:[[1,"actions-component"],["matRipple","",1,"eav-grid-action-button","highlight",3,"tippy","click"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.editFields()}),t.TgZ(2,"mat-icon",2),t._uU(3),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("tippy",n.tooltip),t.xp6(1),t.Q6J("matBadge",n.value)("matBadgeHidden",!n.value),t.xp6(1),t.hij(" ",n.icon," "))},dependencies:[T.$,_.Hw,h.wG,W.k]})}return o})(),It=(()=>{class o{agInit(e){this.params=e,this.contentType=e.data,this.value=e.value}refresh(e){return!0}showItems(){this.params.onShowItems(this.contentType)}addItem(){this.params.onAddItem(this.contentType)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-items"]],decls:7,vars:2,consts:[[1,"actions-component"],["matRipple","",1,"eav-grid-action-button","highlight",3,"tippy","click"],[1,"text-icon"],["matRipple","","tippy","Add item",1,"eav-grid-action-button","highlight",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.showItems()}),t.TgZ(2,"div",2),t._uU(3),t.qZA()(),t.TgZ(4,"div",3),t.NdJ("click",function(){return n.addItem()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()()()),2&i&&(t.xp6(1),t.MGl("tippy","",n.value," items"),t.xp6(2),t.Oqu(n.value))},dependencies:[T.$,_.Hw,h.wG],styles:[".text-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;line-height:22px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid rgba(29,39,61,.44);border-radius:12px;box-sizing:border-box;background-color:#002753;color:#fff;-webkit-user-select:none;user-select:none}.text-icon[_ngcontent-%COMP%]{min-width:24px;width:initial}"]})}return o})();var H=l(9409),lt=l(2849),et=l(8621),nt=l(8849),Pt=l(1268),Dt=l(6355),F=l(6575);function Et(o,s){if(1&o&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ","Scope: "+e.name," ")}}function Nt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.createGhost())}),t.TgZ(1,"mat-icon",9),t._uU(2,"share"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Ghost"),t.qZA()()}}function Ft(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"ag-grid-angular",2),t.NdJ("filesDropped",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.filesDropped(n))}),t.qZA(),t.TgZ(2,"mat-dialog-actions",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-select",6),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.changeScope(n))}),t.SjG(6,Et,2,2,"mat-option",7,t.x6l),t.TgZ(8,"mat-option",7),t._uU(9,"Scope: Other..."),t.qZA()()(),t.TgZ(10,"button",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.importType())}),t.TgZ(11,"mat-icon",9),t._uU(12,"cloud_upload"),t.qZA(),t.TgZ(13,"span"),t._uU(14,"Content Type"),t.qZA()(),t.YNc(15,Nt,5,0,"button",10),t.qZA(),t.TgZ(16,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.editContentType(null))}),t.TgZ(17,"mat-icon"),t._uU(18,"add"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("rowData",s.contentTypes)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),t.xp6(4),t.Q6J("ngModel",s.scope),t.xp6(1),t.wJu(s.scopeOptions),t.xp6(2),t.Q6J("value",e.dropdownInsertValue),t.xp6(7),t.um2(15,s.debugEnabled?15:-1)}}let Jt=(()=>{class o extends k.H{constructor(e,i,n,r,c,g){super(e,i),this.router=e,this.route=i,this.contentTypesService=n,this.globalConfigService=r,this.snackBar=c,this.contentExportService=g,this.contentTypes$=new b.X(void 0),this.scope$=new b.X(void 0),this.scopeOptions$=new b.X([]),this.gridOptions=this.buildGridOptions(),this.dropdownInsertValue=ct.G,this.viewModel$=(0,Z.a)([this.contentTypes$,this.scope$,this.scopeOptions$,this.globalConfigService.getDebugEnabled$()]).pipe((0,a.U)(([f,E,M,at])=>({contentTypes:f,scope:E,scopeOptions:M,debugEnabled:at})))}ngOnInit(){this.fetchScopes(),this.refreshScopeOnRouteChange(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchContentTypes()}))}ngOnDestroy(){this.contentTypes$.complete(),this.scope$.complete(),this.scopeOptions$.complete(),super.ngOnDestroy()}filesDropped(e){const i=e[0];switch(i.name.substring(i.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":(0,d.D)((0,vt.B)(e[0])).pipe((0,x.q)(1)).subscribe(r=>{const c=r.split('<Entity Type="')[1]?.split('"')[0],g=this.contentTypes$.value.find(f=>f.Name===c);null!=g?this.openDataImport(g,e):this.snackBar.open(`Cannot find Content Type named '${c}'. Please open Content Type Import dialog manually.`,null,{duration:5e3})});break;case"json":this.importType(e)}}importType(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}showContentItems(e){this.router.navigate([`items/${e.StaticName}`],{relativeTo:this.route.firstChild})}editContentType(e){if(e){if(e.EditInfo.ReadOnly)return;this.router.navigate([`${e.StaticName}/edit`],{relativeTo:this.route.firstChild})}else this.router.navigate(["add"],{relativeTo:this.route.firstChild})}fetchContentTypes(){this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(e=>{for(const i of e)i._compareLabel=i.Label.replace(new RegExp("\\p{Emoji}","gu"),"\u017e");this.contentTypes$.next(e),this.scope$.value!==p.Zy.scopes.default.value&&this.snackBar.open("Warning! You are in a special scope. Changing things here could easily break functionality",null,{duration:2e3})})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{const i=[...this.scopeOptions$.value];e.forEach(n=>{const r=i.find(c=>c.value===n.value);r?r.name=n.name:i.push(n)}),this.scopeOptions$.next(i)})}createGhost(){const e=window.prompt("To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");e&&(this.snackBar.open("Saving..."),this.contentTypesService.createGhost(e).subscribe(i=>{this.snackBar.open("Saved",null,{duration:2e3}),this.fetchContentTypes()}))}changeScope(e){e===ct.G&&(e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||p.Zy.scopes.default.value),this.router.navigate([`data/${e}`],{relativeTo:this.route})}enablePermissionsGetter(){return this.enablePermissions}addItem(e){const n=(0,N.f)({items:[{ContentTypeName:e.StaticName}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}editFields(e){this.router.navigate([`fields/${e.StaticName}`],{relativeTo:this.route.firstChild})}createOrEditMetadata(e){const n=(0,N.f)({items:[e.Properties?{EntityId:e.Properties.Id}:{ContentTypeName:p.Zy.contentTypes.contentType,For:{Target:p.Zy.metadata.contentType.target,TargetType:p.Zy.metadata.contentType.targetType,String:e.StaticName},Prefill:{Label:e.Name,Description:e.Description}}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}openMetadata(e){const i=X.U.getUrlContentType(e.StaticName,`Metadata for Content Type: ${e.Name} (${e.Id})`);this.router.navigate([i],{relativeTo:this.route.firstChild})}openRestApi(e){this.router.navigate([D.i.getUrlData(e)],{relativeTo:this.route.firstChild})}exportType(e){this.contentExportService.exportJson(e.StaticName)}openDataExport(e){this.router.navigate([`export/${e.StaticName}`],{relativeTo:this.route.firstChild})}openDataImport(e,i){this.router.navigate([`${e.StaticName}/import`],{relativeTo:this.route.firstChild,state:{files:i}})}openPermissions(e){this.router.navigate([j.i.getUrlContentType(e.StaticName)],{relativeTo:this.route.firstChild})}deleteContentType(e){confirm(`Are you sure you want to delete '${e.Name}' (${e.Id})?`)&&(this.snackBar.open("Deleting..."),this.contentTypesService.delete(e).subscribe(i=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchContentTypes()}))}refreshScopeOnRouteChange(){this.subscription.add(this.router.events.pipe((0,Q.h)(e=>e instanceof m.m2),(0,a.U)(()=>this.route.snapshot.firstChild.paramMap.get("scope")),(0,K.O)(this.route.snapshot.firstChild.paramMap.get("scope")),(0,Q.h)(e=>!!e),(0,U.x)()).subscribe(e=>{this.scope$.next(e),this.scopeOptions$.value.map(i=>i.value).includes(e)||this.scopeOptions$.next([...this.scopeOptions$.value,{name:e,value:e}]),this.fetchContentTypes()}))}buildGridOptions(){return{...tt.f,columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:i=>("id-action no-padding no-outline "+(i.data.EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:i=>i.data.Id,cellRenderer:rt.m,cellRendererParams:{tooltipGetter:n=>`ID: ${n.Id}\nGUID: ${n.StaticName}`}},{headerName:"Content Type",field:"ContentType",flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:i=>{this.showContentItems(i.data)},valueGetter:i=>i.data.Label,comparator:(i,n,r,c,g)=>r.data._compareLabel.localeCompare(c.data._compareLabel)},{field:"Items",width:102,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:i=>i.data.Items,cellRenderer:It,cellRendererParams:(()=>({onShowItems:n=>this.showContentItems(n),onAddItem:n=>this.addItem(n)}))()},{field:"Fields",width:94,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:i=>i.data.Fields,cellRenderer:Ot,cellRendererParams:(()=>({onEditFields:n=>this.editFields(n)}))()},{field:"Name",flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter",cellClass:i=>(i.data.EditInfo.DisableEdit?"no-outline":"primary-action highlight").split(" "),valueGetter:i=>i.data.Name,onCellClicked:i=>{this.editContentType(i.data)}},{field:"Description",flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.Properties?.Description},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:kt,cellRendererParams:(()=>({enablePermissionsGetter:()=>this.enablePermissionsGetter(),onCreateOrEditMetadata:n=>this.createOrEditMetadata(n),onOpenPermissions:n=>this.openPermissions(n),onEdit:n=>this.editContentType(n),onOpenRestApi:n=>this.openRestApi(n),onOpenMetadata:n=>this.openMetadata(n),onTypeExport:n=>this.exportType(n),onOpenDataExport:n=>this.openDataExport(n),onOpenDataImport:n=>this.openDataImport(n),onDelete:n=>this.deleteContentType(n)}))()}]}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(xt.s),t.Y36(z.bE),t.Y36(H.ux),t.Y36(y.i))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-data"]],inputs:{enablePermissions:"enablePermissions"},features:[t.qOj],decls:2,vars:3,consts:[["class","grid-wrapper mat-tab-grid-wrapper"],[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["color","accent",1,"eav-form-field","eav-scope-dropdown"],["name","Scope",3,"ngModel","ngModelChange"],[3,"value"],["mat-button","","tippy","Import content type",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","class","eav-button__with-icon","color","accent","tippy","Create a ghost content type"],["mat-fab","","mat-elevation-z24","","tippy","Create a new content type",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",1,"eav-button__with-icon",3,"click"]],template:function(i,n){if(1&i&&(t.YNc(0,Ft,19,6,"div",0),t.ALo(1,"async")),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[lt.z,T.$,O.H8,u.lW,u.cs,_.Hw,et.N8,nt.JJ,nt.On,Pt.KE,Dt.gD,h.ey,F.Ov],styles:[".eav-scope-dropdown[_ngcontent-%COMP%]{margin-top:-14px;width:300px}.eav-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-dialog-actions[_ngcontent-%COMP%]   .eav-dialog-actions-div[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.eav-dialog-actions[_ngcontent-%COMP%]   .eav-button__with-icon[_ngcontent-%COMP%]   .eav-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}"]})}return o})();var it=l(7356),Gt=l(7749),J=function(o){return o[o.Edit=0]="Edit",o[o.Metadata=1]="Metadata",o[o.Rest=2]="Rest",o[o.Clone=3]="Clone",o[o.Permissions=4]="Permissions",o[o.Export=5]="Export",o[o.Delete=6]="Delete",o}(J||{});class qt{agInit(s){this.params=s,this.item=this.params.data}refresh(s){return!0}}function Bt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Metadata,n.item))}),t.TgZ(1,"mat-icon",10),t._uU(2," local_offer "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",null==e.item.Metadata?null:e.item.Metadata.length)("matBadgeHidden",!(null!=e.item.Metadata&&e.item.Metadata.length))}}function Rt(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"mat-icon",12),t._uU(2," local_offer "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",null==e.item.Metadata?null:e.item.Metadata.length)("matBadgeHidden",!(null!=e.item.Metadata&&e.item.Metadata.length))}}function Qt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Permissions,n.item))}),t.TgZ(1,"mat-icon",10),t._uU(2," person "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.item._Permissions.Count)("matBadgeHidden",!e.item._Permissions.Count)}}function Ht(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"mat-icon",12),t._uU(2," person "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.item._Permissions.Count)("matBadgeHidden",!e.item._Permissions.Count)}}function Kt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Rest,n.item))}),t._UZ(1,"mat-icon",15),t.TgZ(2,"span"),t._uU(3,"REST API"),t.qZA()(),t.TgZ(4,"button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Clone,n.item))}),t.TgZ(5,"mat-icon"),t._uU(6,"file_copy"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"Copy"),t.qZA()(),t.TgZ(9,"button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Export,n.item))}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Export"),t.qZA()(),t.TgZ(14,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.params.do(n.actions.Delete,n.item))}),t.TgZ(15,"mat-icon"),t._uU(16,"delete"),t.qZA(),t.TgZ(17,"span"),t._uU(18,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(14),t.Q6J("disabled",e.item._EditInfo.DisableDelete)}}let Vt=(()=>{class o extends qt{constructor(){super(...arguments),this.actions=J}agInit(e){super.agInit(e),this.enablePermissions=this.params.getEnablePermissions()}static#t=this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.n5z(o)))(n||o)}})();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-queries-actions"]],features:[t.qOj],decls:14,vars:5,consts:[[1,"actions-component"],["matRipple","","tippy","Edit",1,"eav-grid-action-button","highlight",3,"click"],["class","eav-grid-action-button highlight","matRipple","","tippy","Metadata"],["class","eav-grid-action-button disabled"],["class","eav-grid-action-button highlight","matRipple","","tippy","Permissions"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Metadata",1,"eav-grid-action-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],[1,"eav-grid-action-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["mat-menu-item","",3,"disabled","click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.params.do(n.actions.Edit,n.item)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.YNc(4,Bt,3,2,"div",2)(5,Rt,3,2,"div",3)(6,Qt,3,2,"div",4)(7,Ht,3,2,"div",3),t.TgZ(8,"div",5)(9,"mat-icon"),t._uU(10,"more_horiz"),t.qZA()()(),t.TgZ(11,"mat-menu",6,7),t.YNc(13,Kt,19,1,"ng-template",8),t.qZA()),2&i){const r=t.MAs(12);t.xp6(4),t.um2(4,n.item._EditInfo.DisableMetadata?-1:4),t.xp6(1),t.um2(5,n.item._EditInfo.DisableMetadata?5:-1),t.xp6(1),t.um2(6,!n.item._EditInfo.DisableEdit&&n.enablePermissions?6:-1),t.xp6(1),t.um2(7,n.item._EditInfo.DisableEdit||!n.enablePermissions?7:-1),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},dependencies:[T.$,_.Hw,h.wG,v.VK,v.OP,v.KA,v.p6,W.k],encapsulation:2})}return o})();function Wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"ag-grid-angular",2),t.NdJ("filesDropped",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.importQuery(n))}),t.qZA(),t.TgZ(2,"mat-dialog-actions",3)(3,"button",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.importQuery())}),t.TgZ(4,"mat-icon",5),t._uU(5,"cloud_upload"),t.qZA(),t.TgZ(6,"span"),t._uU(7,"Query"),t.qZA()(),t.TgZ(8,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.editQuery(null))}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("rowData",s.queries)("gridOptions",e.gridOptions)("allowedFileTypes","json")}}let Yt=(()=>{class o extends k.H{constructor(e,i,n,r,c,g){super(e,i),this.router=e,this.route=i,this.pipelinesService=n,this.contentExportService=r,this.snackBar=c,this.dialogService=g,this.queries$=new b.X(void 0),this.gridOptions=this.buildGridOptions(),this.viewModel$=(0,Z.a)([this.queries$]).pipe((0,a.U)(([f])=>({queries:f})))}ngOnInit(){this.fetchQueries(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchQueries()}))}ngOnDestroy(){this.queries$.complete(),super.ngOnDestroy()}fetchQueries(){this.pipelinesService.getAll(p.Zy.contentTypes.query).subscribe(e=>{this.queries$.next(e)})}importQuery(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}doMenuAction(e,i){switch(e){case J.Edit:return this.editQuery(i);case J.Metadata:return this.openMetadata(i);case J.Rest:return this.router.navigate([D.i.getUrlQuery(i.Guid)],{relativeTo:this.route.firstChild});case J.Clone:return this.cloneQuery(i);case J.Permissions:return this.openPermissions(i);case J.Export:return this.exportQuery(i);case J.Delete:return this.deleteQuery(i)}}editQuery(e){const n=(0,N.f)({items:[null==e?{ContentTypeName:p.Zy.contentTypes.query,Prefill:{TestParameters:p.Zy.pipelineDesigner.testParameters}}:{EntityId:e.Id}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}enablePermissionsGetter(){return this.enablePermissions}openVisualQueryDesigner(e){e._EditInfo.ReadOnly||this.dialogService.openQueryDesigner(e.Id)}openMetadata(e){const i=X.U.getUrlEntity(e.Guid,`Metadata for Query: ${e.Name} (${e.Id})`);this.router.navigate([i],{relativeTo:this.route.firstChild})}cloneQuery(e){this.snackBar.open("Copying..."),this.pipelinesService.clonePipeline(e.Id).subscribe(()=>{this.snackBar.open("Copied",null,{duration:2e3}),this.fetchQueries()})}openPermissions(e){this.router.navigate([j.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}exportQuery(e){this.contentExportService.exportEntity(e.Id,"Query",!0)}deleteQuery(e){confirm(`Delete Pipeline '${e.Name}' (${e.Id})?`)&&(this.snackBar.open("Deleting..."),this.pipelinesService.delete(e.Id).subscribe(i=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchQueries()}))}buildGridOptions(){return{...tt.f,columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:i=>("id-action no-padding no-outline "+(i.data._EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:i=>i.data.Id,cellRenderer:rt.m,cellRendererParams:{tooltipGetter:n=>`ID: ${n.Id}\nGUID: ${n.Guid}`}},{field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellClass:i=>(i.data._EditInfo.DisableEdit?"no-outline":"primary-action highlight").split(" "),onCellClicked:i=>{this.openVisualQueryDesigner(i.data)},valueGetter:i=>i.data.Name},{field:"Description",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.Description},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:Vt,cellRendererParams:(()=>({getEnablePermissions:()=>this.enablePermissionsGetter(),do:(n,r)=>this.doMenuAction(n,r)}))()}]}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(Gt.vG),t.Y36(y.i),t.Y36(H.ux),t.Y36(it.x))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-queries"]],inputs:{enablePermissions:"enablePermissions"},features:[t.qOj],decls:2,vars:3,consts:[["class","grid-wrapper mat-tab-grid-wrapper"],[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"eav-dialog-actions"],["mat-button","","tippy","Import query",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-fab","","mat-elevation-z24","","tippy","Create a new query",1,"grid-fab",3,"click"]],template:function(i,n){if(1&i&&(t.YNc(0,Wt,11,3,"div",0),t.ALo(1,"async")),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[lt.z,T.$,O.H8,u.lW,u.cs,_.Hw,et.N8,F.Ov],styles:[".eav-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-dialog-actions[_ngcontent-%COMP%]   .eav-button__with-icon[_ngcontent-%COMP%]   .eav-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}"]})}return o})();var pt=l(8730),$t=l(6992);function zt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openCode())}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA()()}}function Xt(o,s){1&o&&(t.TgZ(0,"div",10)(1,"mat-icon"),t._uU(2,"code"),t.qZA()())}function jt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openMetadata())}),t.TgZ(1,"mat-icon",12),t._uU(2," local_offer "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Metadata.length)("matBadgeHidden",!e.view.Metadata.length)}}function te(o,s){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2," local_offer "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Metadata.length)("matBadgeHidden",!e.view.Metadata.length)}}function ee(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openPermissions())}),t.TgZ(1,"mat-icon",12),t._uU(2," person "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Permissions.Count)("matBadgeHidden",!e.view.Permissions.Count)}}function ne(o,s){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2," person "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Permissions.Count)("matBadgeHidden",!e.view.Permissions.Count)}}function ie(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.cloneView())}),t.TgZ(1,"mat-icon"),t._uU(2,"file_copy"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Copy"),t.qZA()(),t.TgZ(5,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportView())}),t.TgZ(6,"mat-icon"),t._uU(7,"cloud_download"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Export"),t.qZA()(),t.TgZ(10,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteView())}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA(),t.TgZ(13,"span"),t._uU(14,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(10),t.Q6J("disabled",e.view.EditInfo.DisableDelete)}}let oe=(()=>{class o{agInit(e){this.params=e,this.view=this.params.data,this.enableCode=this.params.enableCodeGetter(),this.enablePermissions=this.params.enablePermissionsGetter()}refresh(e){return!0}openCode(){this.params.onOpenCode(this.view)}openPermissions(){this.params.onOpenPermissions(this.view)}openMetadata(){this.params.onOpenMetadata(this.view)}cloneView(){this.params.onClone(this.view)}exportView(){this.params.onExport(this.view)}deleteView(){this.params.onDelete(this.view)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-actions"]],decls:13,vars:7,consts:[[1,"actions-component"],["class","eav-grid-action-button highlight","matRipple","","tippy","Code"],["class","eav-grid-action-button disabled"],["class","eav-grid-action-button highlight","matRipple","","tippy","Metadata"],["class","eav-grid-action-button highlight","matRipple","","tippy","Permissions"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight",3,"click"],[1,"eav-grid-action-button","disabled"],["matRipple","","tippy","Metadata",1,"eav-grid-action-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,zt,3,0,"div",1)(2,Xt,3,0,"div",2)(3,jt,3,2,"div",3)(4,te,3,2,"div",2)(5,ee,3,2,"div",4)(6,ne,3,2,"div",2),t.TgZ(7,"div",5)(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA()()(),t.TgZ(10,"mat-menu",6,7),t.YNc(12,ie,15,1,"ng-template",8),t.qZA()),2&i){const r=t.MAs(11);t.xp6(1),t.um2(1,!n.view.EditInfo.DisableEdit&&n.enableCode?1:-1),t.xp6(1),t.um2(2,n.view.EditInfo.DisableEdit||!n.enableCode?2:-1),t.xp6(1),t.um2(3,n.view.EditInfo.DisableMetadata?-1:3),t.xp6(1),t.um2(4,n.view.EditInfo.DisableMetadata?4:-1),t.xp6(1),t.um2(5,!n.view.EditInfo.DisableEdit&&n.enablePermissions?5:-1),t.xp6(1),t.um2(6,n.view.EditInfo.DisableEdit||!n.enablePermissions?6:-1),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},dependencies:[T.$,_.Hw,h.wG,v.VK,v.OP,v.KA,v.p6,W.k]})}return o})(),ae=(()=>{class o{agInit(e){this.value=e.value}refresh(e){return!0}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-show"]],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"mat-icon"),t._uU(2),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(n.value?"visibility":"visibility_off"))},dependencies:[_.Hw]})}return o})();function dt(o){let s="",e="";return o.HasQuery?(s="Data (from query)",e="filter_list"):o.List?(s="Items (list)",e="format_list_numbered"):o.ContentType||o.HasQuery?o.List||(s="Item (one)",e="looks_one"):(s="Code",e="check_box_outline_blank"),{value:s,icon:e}}function se(o,s){1&o&&(t.TgZ(0,"div",3)(1,"mat-icon"),t._uU(2,"share"),t.qZA()())}let re=(()=>{class o{agInit(e){this.value=e.value;const i=e.data,n=dt(i);this.icon=n.icon,this.isShared=i.IsShared}refresh(e){return!0}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-type"]],decls:5,vars:3,consts:[[1,"icon-container"],[1,"eav-grid-action-button","icon",3,"tippy"],["class","eav-grid-action-button icon","tippy","View is shared"],["tippy","View is shared",1,"eav-grid-action-button","icon"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon"),t._uU(3),t.qZA()(),t.YNc(4,se,3,0,"div",2),t.qZA()),2&i&&(t.xp6(1),t.Q6J("tippy",n.value),t.xp6(2),t.Oqu(n.icon),t.xp6(1),t.um2(4,n.isShared?4:-1))},dependencies:[T.$,_.Hw]})}return o})();function le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"ag-grid-angular",2),t.NdJ("filesDropped",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.importView(n))}),t.qZA(),t.TgZ(2,"mat-dialog-actions",3)(3,"div",4)(4,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.editPolymorphisms())}),t.TgZ(5,"span",6),t._UZ(6,"img",7),t.TgZ(7,"span"),t._uU(8),t.qZA()()(),t.TgZ(9,"button",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.importView())}),t.TgZ(10,"mat-icon",9),t._uU(11,"cloud_upload"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"View"),t.qZA()()(),t.TgZ(14,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.editView(null))}),t.TgZ(15,"mat-icon"),t._uU(16,"add"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("rowData",s.views)("gridOptions",e.gridOptions)("allowedFileTypes","json"),t.xp6(3),t.Q6J("disabled",e.appIsInherited),t.xp6(2),t.Q6J("src",e.polymorphLogo,t.LSH),t.xp6(2),t.hij("Polymorphism ",s.polymorphStatus,"")}}let ce=(()=>{class o extends k.H{constructor(e,i,n,r,c){super(e,i),this.router=e,this.route=i,this.viewsService=n,this.snackBar=r,this.dialogService=c,this.views$=new b.X(void 0),this.polymorphStatus$=new b.X(void 0),this.polymorphLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOUAAADcCAYAAACPvGZzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFIVJREFUeNrsnVusJFUVhnftbnw2JibGhHcfNRpuE2AiIBIYZuacMzPMjCFeIBiIEYjxipAYDMIDRAlqVAKJAg4wDKCCRlSQEKPIu+HVxJiYGB9FurusXbfeXae6u6r2ba1d/5r09PV0V1Xvr/5/rbWrOknTVCAQCDohsQkQCECJQCAAJQIBKBEIBKBEIAAlAoEAlAgEoEQgEIASgQCUCASCUEyxCfpHMr0ccxMHRjp7LcFW2DK+MPcVAAJUQAkQEQAUUAJEwAkoASMCcAJKwAg4ASWARABOQAkYEfGDORooXQCZDQ4Q0m3bA05AaR9IAEgT1hjBjB5KEyABIg84YwMzaihtWVbASd/axgRmtFAOBfIjTz8hptnX++ax04DTM4xq+5pAGguYUUJpqpAXP/ukmIjiEJo/7p0CmB5grJ9PLls+MUlGCaYEkELcdtOH8ksV52UXpZbvybbO1c89uW9Quaomjg1IBeMKkNrz53/mDnH+jbcLMU+df/+AkkEOqdRRQVnAmYhD554Sh59/CnAawNgG5L4oAVRAUhgHgNIzkLoytj32ys6pHMhJqZqT7PbuCz8Xe9kFcJrB2Abktm144O5vj2a7jfLMA21Atm6cpEhrZAak2lA5oNmNk784I05nlz6DCjC+tjkf76CSfcDkrJYykkGQ2gJSf/6FIydzICdlzWEi1e3ivgL2xl+egWr2zBu7/M3YFXNUStlVIfXXKesqpajhlMlSQc/LLje9dEbc/NLTo4ezc97YBmTPXLIrmFzVUkYwGFKbQDbjzPU3rKhjBeO0srUK1uz2rS8/LW779TOjs7SDrGqLbe0bMYMpAeT2v1Ewqlwyt7BiFcbC2iaFtc3u3/GbZ0ahmsYwiv0tEMQI7evQ+Ol1J+q8UodRh7MqBKn7X/rts+LL2SVWOE1h7FPcGaNaSsYDw6ltbf7to9eeyIGblgBWt6ctapnfz1709d+dFXdll1jgHJo3mhZ3xlb4ifq8ryZAtsVSHbNBVd5PsvtJfl3dr24n9e17/nA2/5t7Du6uDEouU/a2TY0b9H6WJgr02YlzmYLHUil92hEd7B9cc7y2qtPSulbFn4lWpc2fk2WlVrO99772HCvVtJE32izujMXGRptT2lRJ/b0qq1rDWFrV3L6KMr+sLW7R29R7nfe//px44PVz5OF0AiOKO3FCGXpv99DVxwrYNOhqGOWyjynz/HIJ4/K5AugH3zgnHnqDHpw280YXxZ0xqKWMEUjbuWTzPVcmFOjAica0vESDVBSQVgpaXb73p+fFw9nFRRGEhFUNvF5QypHEd67c62RVpTbBQAdRahXcygb/8M/PB1NN1zC6VsnY1JINlCFVsu29771idwlei1WdtBWC6il6Sfk3Rfm7eu2P//KCePTNF7zB6dyqBlDJGFokUbVEXALZukdLli2RSdkmydsgomyblI/J+rn9r5VaSyUpbe7jb72Yv/+nP3r9vkFtu9jiGsb68zy3QLrs5Km2SFgoJSW7oYN/98Hd+njLVqtaKadmVfXXVlXcKidV9xNtmCg4K0BtKI6PvHGTbfUV3G1sNDmlT5VcmRcrV2FsWlXZsKqtOaYoHlsXbWD2hTMIjAItkCihpJ6Uf/XSnZXDuWRDNfVJ61IuYZxoMCcdTNQ61dwGp8+8MURxJ0a1lDEA6TuX3KeWWgVWV8JVWytWrGpXGLvCScaqBijuxFb0QUvEQtx54OgKfCZWtQ+cbRBSgDG0SnJ3Y5L7hgqhkm2f/cVLjlqzqiaqSQJGQWeiAEe1ZK2UIYFs3ZiWrSpXMCi2QDippcQGsrdj+PyFR0pVtGtV14XqY+q9zHW2NpRtpRLcij6SK5CUVHJf0ceBVW0Dcp2VtdFCsaHOaIGM0L5SjM9+7LBzGLep47p80wucRG0rJ7UkBSVHlWxbpiY0LmHcVOjxDSf1o0C4FH3YzX2lCKTLaAN8G4jr4Gy+n/VTkjAr7mwSh5DzYiWlDcEdINtqOUQZu8JpWzW5HCvJQS0l10Ef8zJ2zRtNwLQJJ8cWCGWRkGPfAL6tp4u8MTicc15fH/Wiz5QLkJxySbWsj/zkb97zRlNLOyTfRAtk5PY1RrX0qYxO8k2mtpWyWgaFMkaVbFvmNjBd540+LC33E2FRLfpMOQ3uWJWTAox9LW2MxZ1N4uGzRSJDrmjs1rWplpSsqrGlncfx9VG0sZLLoI4BTE4wdl1eFHcigXIMKqlCVWCbVVhOMK6FU1PJvz/2UH6BWjLOKWMu7ugwxhrrqskKTKjmCOxrDEBeeXCSX7YNajahFXeaEHJWTUpq6RXKmFWyzarqMMYAZttyxwQnlRYJuZYINyDbrKoOYFS2dUMLpHpMh7G6HZutdd0ikT5XJDabus2qboKVnVp2bIGsU07YWGJQxmZb+8LIXUX1HUhX1Ysp3/QdKPRYzBtt5GiUVbKvDeWab4ZWS+dQxqCSQ6xqV7WkDqaN5eMIZ8iiT1Q/hefapnK1nyFUcpOlbRaDOBeCXBR9pOsF5qqSNpWRq1q6Wi4uqhlKLYMrJTUgfaqjet9XXp3TBdLhUSAxtVBsq6V0uaDcrKprdQyhSqa21XVQb6GEKPrIkEBSUcmQMFLMUYe0QMZiaX0EWiKBYCStloEOXm5TzTGqZZKmdm0KB5WkWFXVc8uQh3e5ziX7RK2Uk6Q3IC7ijW99Y+trbOSWQZQyFJBteSNVCzk2lexiabuCETJsqKWktkA+80Zq1jm0jeUyw0iBGQJOXyrtvSXiWyU5KWPIFgkl27oJCB3G6ja1s9KZtkikzQWhpowhq6rsVIvJibAUgE0IfSqnj6KP9AmkD5XkDmOI5QzRAnEFZwwRVUuEM4xB1ZLx+VtDqKZrtTSGkoJK2j6kipJaugaT/TmDAllal3msl0KPKyDR3rAAZERnOV9XDApZCBpS9JGmHxjKpsZmVYOo5TzO0+/6Uk1XNtZ5TmlbJWOH0ZfqcyzuULe0tmIwlL5VMra8MXjuN5If53ENpwu1lC6BtKGSY7CqvtUyhuKOLTh9gknGvgJGgjCNRCVD5psmYiZdvbGJSgLG9WppCuYYVdKHpbWplk5aIkOBRIvDg9KOWCXXgeRzPm2XFgkJ+wqr6kkt5yk2pMN80xbIsi/ltlUSMA4D08S2QiXp5ZsklHLsLQ4rVnSASgJIt/lmF7XcJm5Wc8ouKom80Vwtq2MuFZhdTh2C4g6PfLO3UppOFkDeGDCgkl7zTVNovdhXwOgut9ymglBJmvnmJpGzZl/brCusqh8buxFIqCQ7S+tEKWFV/cZaNUQLJJilNYFUAsY4bOwmUKGSPCxtL/vapciD9kZ4tVypxMK2Bre0pOwrgAyjlpU6orhDw9I6VUrAyCygkqSUM4hSIm8kpJYfPoQNQjDf7BOdfuCH229NQiUji0kS5Ve17mgR/BQeAkEsppaIZ7nymQPIr0P+9JytqIs7parEsE76eg1dn0XmBOcLda1MRJobiUV5Xd1Wz820xxfZ6+ei+Lt5/ly6fF6ZkUVxPctfVzxePT8rX/9Odv373VPhcspqcCMIQooIEkOBtGpfFZiAMzyA//zgfwBm4Hh555TR31s/HUgFJldLGwuQCP9x7shJK+/TSSm7nHa9CSGUM1xALf3GmetvEGcP37CRh2BKWS2IDqO6DdX0r5Lq/gf+8V5sJNMxveG5nx06sVWcguaUUE0ayrgNXoSdePzaE/vGvD7uTca7NaVsKuI61US+aV8lN8EKteynftviR9ccd6KOzuwrLC09ldQhjqV3GSIe+eQxqzBuqtN4m9EDS+tXJdughY3tHw9+Yk989+pjG61qm2v0klN2qcBuW5i2lQGcw4FEC8RtPHDVXi8YbUWQua+AM5zFhVpuj3uv2BX3XbHnNG/0mlP2yReRb/pTSRR9tsc9B3eN88YuwmL1t0T6/nY78k33yuc6Jx1LfPPyHWOramvMOrGvQxYOltY9SLCx++Mrl+6Ir122482qdhG26ZA3dXnQM/qbblUSUcSdB44aW1UXKulMKW0s5DrlhEpCLU3iCxcfEbdfctTYqrpSycFQusotkW9uBtKWSo5VbW+96IgTGG2PR6ctEVsLi3yThwpTjZsvOCxuufCwt7zRVMimJh/SJbe02eIYW77pcqLAGFokbTsc2+PEhTCwPHHW2PJN13YzNrVU69NcJxd5Y9cx1zfdk4ZwJDYXHvmmX1BiLPr4gNF1TC2AkYQ8L2yMlhbzW2laVR8q6dW+ulYwtFDGqZa+rKpLJ2ldKfuopY95rer9OatmCJXkWPTxrYw+d/ZRniE9hhZKKNvKQS055I0mvfypzYWgopZc882QQHBQy5Dq6DMlklT2Dsg3w6skZbWkoI4uizvB7WsoICjnlRRA4FD04djiCGZf+9rYkF9qc8dg+iMyNoFEC4SOVQ2hkvlndfl9ygErkPYBhNqG9g0nNSj13DLktuAwVlykb65Oxhx0pk/faA48n9aNokqGWI51/UYK4Xuc4kdjN4DpE06qttXHNqDc4vBpW53llH1zS0onyqrA1AeJy3yTck/QR4uEWt5IJZwqJdUWSRc4fVpa6sUd2+tOeWpcaJUkY1+p9gxdWloOM2dst0i4wBhaeCTHhaagmiaDlFMLxNbycYMxpFBIbIRwcHKLIetKuapKVXAkpYXnMGHcNN/kOFFgyHJytqqhxyFaIoHyTa4zd7atI/e8MVRxJwiUManlUEvL2ep2KfrEVsQJFVOfH0Z9Xqypanbtb8Y2vzWWfiMFlcyXw8Xc1y0rTmZebPUlPPbXF0WSuBukCsxYJp1vm1Dg6oxxPsdDSCCD5JQUbewi2zGpi63906ZCEHeVXLf83K0qpbQJhZ4s5qkCM7sIu2C2WVfuJ0BuW/6x5I2+eu6S8sr52nsVSpldLxSgdlVz3cDmBue6ZY4BSGrFRShlFrMMwPmiBNOBaqr49+fen1+4qWYbjLqF5X4aTyrFHRJQUlJLBeFcLFVyvrCjmm1VyTYwqcLZBmMFZExgUotpyA+n0iKpwEuTJFNIISZCLVIi1F5DPS5lKhJ13aNEqwPZBLG6/75H/7UPAGpnHmhTx1iCokqysa+u98R1oafMLSvVrC3tYvl8zJZ2nVVdB+QY1DLEARWSy0q7/NKrPHJegqdgnJdw5vcrWBfL9slQlVwHZ0hL2xfGGBSU8k5kKhCFAmZmVe2h0npPleYGNs3trLKxaW1fc1ub/ZPqFUl32LqA6dvSbiriDBnoMbVHQh12KDmtvKu9m25dK8Wcp0tVbFPNxRrVNJ3fus7S2lbObVXVPsFNLalbbTI5ZciDoWc1jOk+OOvHsxv168pcU3++6Wj7qKTPfNPEqsYw4KkWd9gVelx/6QrEWaPgU+eRdd+yfF2jfaJPOnBxFIhN1XQJI1okkeaUoVokCqxESV1SZJKTMm+s8kqh5Zp5llm2T4SWa95ywWFrKmk73xxLiyMGlWSplC72xHlVVSzzyEo1q2prUzXr12mq6SP65puurWqMaknhnFKS60ax+aXPRVr3InPgFgWIc6FNu9PB1ItD2Y1bLzriTCWH5Ju+YeSgwJx2Epj7KoqccFZWWReLVeiaqrloUU2fQPbNN33BSBkELraVNJS+1VKvvirVnK1RzdUqbfH8HQeOBt1WbaoZWrVQ9Imo0BOq6FP0GrW5rklxX5bVHXU3L+jIvBJUPJ6kIhHhVLIKvfizrsAz5p/X46aSpKHss9FNZ5Eoiyoz6CblDJ78S1K9R6mUMhGT7OvKi62ZPKZJOXE9e+Fdl+0EW+82GPUdQ7NS6xtM/bdIqM/0oXbCcNI5pa+NVRVvZmXOWFdVF1WVNS17kcvJA3ddvhNMJZtAtllYCoeIhVZortY5irmvpnvi6ugP1W9USihLO6v+zw/lyvuSxVzX/PMC7Ve3qeO65ygcIkZVLSn+rAZ5KH38pJ5SwKRMKHMes9wxze1smWkmZR6ZT0MX4r6P73lVyb4wdoXTV4skxOFonAtMOEqktK35kSCiyB/TRbqimisHQHtsgZjC2Pa3IVXTl1pyLO6wySn7bryhe0ellLN6zqt2RMhimV9W/cn7r9ojkzcOBdN3vokWSaRK6bJFsiims+Y2ddFQzaTKL+tc061K2lZHDvkmVDJy+zrEIs0yBCdpUhZ7RHlgc5E/5ja2tLAPX3OcjVWllm9SapFQ/81UVtPsXNnY6tCraq6rsrDv6qcHya6/rwFpGxZXVnUInC4trWsFjsUao9AjRA1jro6JyFWzor9SzZjUkYKlDaWWHH5ZnB2ULlokefU1Kexr3ZMs76sPevy6E1ahoQajTzhdtUhiKiBBKUuVFPmJsIrWR92TzHuXiTVwqMPoO9+0pZYxFHfY5pSucstZNbWuOgJElC2S7MYTh05EkzdSyTfRIolUKW22SN7J3uW8Mm9UU+ny2TwZ9mePnDRWNG7qSCHfHLNKjsK+drFIs3JC+jwv8qRimpR9kRFZVd9w+myRcAKSPZS2ij7viuX0uUXxzuJXO6cGwRQrjC7yTdOiT6zWF6cDKXPKd0sbq1TznYHzWznnjaHzzb6AxWhbo4HSRtFHQfi/RVrD+eruqd5WtQ3IsYTJfNoh+WjsxaEockpTG5sfxFzmkQvRfX7rWKyqL0vbJbfsAyRHlRylfW37UmclmP/Nrt86dnqwMo4ZSBNL27VFMpb2STTV1z4tkrY9sirwvH389FbFG7NNtaGaviwrV5WMTin7fBF9v+Sx542u802bEwo4AxmVUprG2yc+1Qob8kZ/+aaNebHcgcx3SmmaRjcATGb6bAISMNqJth1dBacJlDEAGS2UJmA2z2MDIP3COXYgo4bSVDEBIx84YwJSRdQtERtfls29OQJAjl4pbasm1BOWFVASBhPB3wUBSoCJAIyAEnACSEAJOBGAEVACTsAIKAEnAjACSgAKEAElApACQkCJQCCKwImzEAhAiUAgACUCASgRCASgRCAAJQKBAJQIBKBEIBCAEoEAlAgEAlAiEAhAiUBwif8LMAC8si4r3FdHgQAAAABJRU5ErkJggg==",this.gridOptions=this.buildGridOptions()}ngOnInit(){this.fetchTemplates(),this.fetchPolymorphism(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchTemplates(),this.fetchPolymorphism()})),this.viewModel$=(0,Z.a)([this.views$,this.polymorphStatus$]).pipe((0,a.U)(([e,i])=>({views:e,polymorphStatus:i})))}ngOnDestroy(){this.views$.complete(),this.polymorphStatus$.complete(),super.ngOnDestroy()}importView(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}fetchTemplates(){this.viewsService.getAll().subscribe(e=>{this.views$.next(e)})}fetchPolymorphism(){this.viewsService.getPolymorphism().subscribe(e=>{this.polymorphism=e,this.polymorphStatus$.next(null===e.Id?"not configured":null===e.Resolver?"disabled":"using "+e.Resolver)})}editView(e){const i={items:[null==e?{ContentTypeName:p.Zy.contentTypes.template,Prefill:{...this.appIsGlobal&&{Location:"Global"}}}:{EntityId:e.Id}]},n=(0,N.f)(i);this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}editPolymorphisms(){if(!this.polymorphism)return;const i=(0,N.f)({items:[this.polymorphism.Id?{EntityId:this.polymorphism.Id}:{ContentTypeName:this.polymorphism.TypeName}]});this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}enableCodeGetter(){return this.enableCode}enablePermissionsGetter(){return this.enablePermissions}openUsage(e){this.router.navigate([`usage/${e.Guid}`],{relativeTo:this.route.firstChild})}openCode(e){this.dialogService.openCodeFile(e.TemplatePath,e.IsShared,e.Id)}openPermissions(e){this.router.navigate([j.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}openMetadata(e){const i=X.U.getUrlEntity(e.Guid,`Metadata for View: ${e.Name} (${e.Id})`);this.router.navigate([i],{relativeTo:this.route.firstChild})}cloneView(e){const n=(0,N.f)({items:[{ContentTypeName:p.Zy.contentTypes.template,DuplicateEntity:e.Id}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}exportView(e){this.viewsService.export(e.Id)}deleteView(e){confirm(`Delete '${e.Name}' (${e.Id})?`)&&(this.snackBar.open("Deleting..."),this.viewsService.delete(e.Id).subscribe(i=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchTemplates()}))}buildGridOptions(){return{...tt.f,columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:i=>("id-action no-padding no-outline "+(i.data.EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:i=>i.data.Id,cellRenderer:rt.m,cellRendererParams:{tooltipGetter:n=>`ID: ${n.Id}\nGUID: ${n.Guid}`}},{field:"Show",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:pt.U,valueGetter:i=>!i.data.IsHidden,cellRenderer:ae},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:i=>{this.editView(i.data)},valueGetter:i=>i.data.Name},{field:"Type",width:82,headerClass:"dense",cellClass:"no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>dt(i.data).value,cellRenderer:re},{field:"Used",width:70,headerClass:"dense",cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agNumberColumnFilter",onCellClicked:i=>{this.openUsage(i.data)},valueGetter:i=>i.data.Used},{headerName:"Url Key",field:"UrlKey",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.ViewNameInUrl},{field:"Path",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.TemplatePath},{field:"Content",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.ContentType.Name},{headerName:"Default",field:"ContentDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>{const n=i.data;return`${n.ContentType.DemoId} ${n.ContentType.DemoTitle}`}},{field:"Presentation",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.PresentationType.Name},{headerName:"Default",field:"PresentationDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>{const n=i.data;return`${n.PresentationType.DemoId} ${n.PresentationType.DemoTitle}`}},{field:"Header",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.ListContentType.Name},{headerName:"Default",field:"HeaderDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>{const n=i.data;return`${n.ListContentType.DemoId} ${n.ListContentType.DemoTitle}`}},{headerName:"Header Presentation",field:"HeaderPresentation",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.ListPresentationType.Name},{headerName:"Default",field:"HeaderPresentationDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>{const n=i.data;return`${n.ListPresentationType.DemoId} ${n.ListPresentationType.DemoTitle}`}},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:oe,cellRendererParams:(()=>({enableCodeGetter:()=>this.enableCodeGetter(),enablePermissionsGetter:()=>this.enablePermissionsGetter(),onOpenCode:n=>this.openCode(n),onOpenPermissions:n=>this.openPermissions(n),onOpenMetadata:n=>this.openMetadata(n),onClone:n=>this.cloneView(n),onExport:n=>this.exportView(n),onDelete:n=>this.deleteView(n)}))()}]}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36($t.h),t.Y36(H.ux),t.Y36(it.x))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-views"]],inputs:{enableCode:"enableCode",enablePermissions:"enablePermissions",appIsGlobal:"appIsGlobal",appIsInherited:"appIsInherited"},features:[t.qOj],decls:2,vars:3,consts:[["class","grid-wrapper mat-tab-grid-wrapper"],[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Configure polymorphism",1,"eav-polymorph-button",3,"disabled","click"],[1,"eav-polymorph-button-span"],[1,"eav-polymorph-logo",3,"src"],["mat-button","","tippy","Import view",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-fab","","mat-elevation-z24","","tippy","Create a new view",1,"grid-fab",3,"click"]],template:function(i,n){if(1&i&&(t.YNc(0,le,17,6,"div",0),t.ALo(1,"async")),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[lt.z,T.$,O.H8,u.lW,u.cs,_.Hw,et.N8,F.Ov],styles:[".eav-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-dialog-actions[_ngcontent-%COMP%]   .eav-dialog-actions-div[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.eav-dialog-actions[_ngcontent-%COMP%]   .eav-button__with-icon[_ngcontent-%COMP%]   .eav-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}.eav-polymorph-button[_ngcontent-%COMP%]   .eav-polymorph-button-span[_ngcontent-%COMP%]{display:flex;align-items:center}.eav-polymorph-logo[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:4px}.eav-polymorph-button[disabled][_ngcontent-%COMP%]   .eav-polymorph-logo[_ngcontent-%COMP%]{opacity:33%;filter:grayscale(1)}"]})}return o})();var pe=l(1485),de=l(7220);function ue(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openCode())}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA()()}}function me(o,s){1&o&&(t.TgZ(0,"div",8)(1,"mat-icon"),t._uU(2,"code"),t.qZA()())}function ge(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openRestApi())}),t._UZ(1,"mat-icon",10),t.TgZ(2,"span"),t._uU(3,"REST API"),t.qZA()()}}let _e=(()=>{class o{agInit(e){this.params=e,this.enableCode=this.params.enableCodeGetter()}refresh(e){return!0}openCode(){this.params.onOpenCode(this.params.data)}openRestApi(){this.params.onOpenRestApi(this.params.data)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api-actions"]],decls:9,vars:3,consts:[[1,"actions-component"],["class","eav-grid-action-button highlight","matRipple","","tippy","Code"],["class","eav-grid-action-button disabled"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"eav-grid-action-button","highlight",3,"click"],[1,"eav-grid-action-button","disabled"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,ue,3,0,"div",1)(2,me,3,0,"div",2),t.TgZ(3,"div",3)(4,"mat-icon"),t._uU(5,"more_horiz"),t.qZA()()(),t.TgZ(6,"mat-menu",4,5),t.YNc(8,ge,4,0,"ng-template",6),t.qZA()),2&i){const r=t.MAs(7);t.xp6(1),t.um2(1,n.enableCode?1:-1),t.xp6(1),t.um2(2,n.enableCode?-1:2),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},dependencies:[T.$,_.Hw,h.wG,v.VK,v.OP,v.KA,v.p6]})}return o})();function he(o,s){1&o&&(t.TgZ(0,"div",2)(1,"mat-icon"),t._uU(2,"share"),t.qZA()())}let Ce=(()=>{class o{agInit(e){this.value=e.value}refresh(e){return!0}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api-type"]],decls:2,vars:1,consts:[[1,"icon-container"],["class","eav-grid-action-button icon","tippy","WebApi is shared"],["tippy","WebApi is shared",1,"eav-grid-action-button","icon"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t.YNc(1,he,3,0,"div",1),t.qZA()),2&i&&(t.xp6(1),t.um2(1,n.value?1:-1))},dependencies:[T.$,_.Hw]})}return o})();function fe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"ag-grid-angular",2),t.TgZ(2,"mat-dialog-actions",3)(3,"button",4)(4,"mat-icon"),t._uU(5,"add"),t.qZA()(),t.TgZ(6,"mat-menu",null,5)(8,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createController(!1))}),t.TgZ(9,"span"),t._uU(10,"App"),t.qZA()(),t.TgZ(11,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createController(!0))}),t.TgZ(12,"span"),t._uU(13,"Shared (global)"),t.qZA()()()()()}if(2&o){const e=t.MAs(7),i=t.oxw();t.xp6(1),t.Q6J("rowData",s.webApis)("gridOptions",i.gridOptions),t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}let Te=(()=>{class o{constructor(e,i,n,r,c,g,f){this.sourceService=e,this.snackBar=i,this.dialogService=n,this.router=r,this.route=c,this.dialog=g,this.viewContainerRef=f,this.webApis$=new b.X(void 0),this.gridOptions=this.buildGridOptions()}ngOnInit(){this.fetchWebApis(),this.viewModel$=(0,Z.a)([this.webApis$]).pipe((0,a.U)(([e])=>({webApis:e})))}ngOnDestroy(){this.webApis$.complete()}createController(e){this.dialog.open(de.UH,{autoFocus:!1,data:{folder:"api",global:e,purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(r=>{if(r){if(r.name.endsWith("Controller.cs")){const c=r.name.substring(r.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(c))return void this.snackBar.open(`"${c}" is invalid controller name. Should be something like "MyController.cs"`,null,{duration:5e3})}this.snackBar.open("Saving..."),this.sourceService.create(r.name,e,r.templateKey).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.fetchWebApis()})}})}fetchWebApis(){this.sourceService.getWebApis().subscribe(e=>{this.webApis$.next(e)})}enableCodeGetter(){return this.enableCode}openCode(e){this.dialogService.openCodeFile(e.path,e.isShared)}openRestApi(e){this.router.navigate([D.i.getUrlWebApi(e)],{relativeTo:this.route.firstChild})}buildGridOptions(){return{...tt.f,columnDefs:[{field:"Folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:i=>i.data.folder},{field:"Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>i.data.name},{field:"Type",flex:1,minWidth:250,cellClass:"no-outline",sortable:!0,filter:pt.U,valueGetter:i=>i.data.isShared,cellRenderer:Ce},{width:82,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:_e,cellRendererParams:(()=>({enableCodeGetter:()=>this.enableCodeGetter(),onOpenCode:n=>this.openCode(n),onOpenRestApi:n=>this.openRestApi(n)}))()}]}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(pe.t),t.Y36(H.ux),t.Y36(it.x),t.Y36(m.F0),t.Y36(m.gz),t.Y36(O.uw),t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api"]],inputs:{enableCode:"enableCode"},decls:2,vars:3,consts:[["class","grid-wrapper mat-tab-grid-wrapper"],[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller","tippyPlacement","left",1,"grid-fab",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(i,n){if(1&i&&(t.YNc(0,fe,14,3,"div",0),t.ALo(1,"async")),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[T.$,O.H8,u.cs,_.Hw,et.N8,v.VK,v.OP,v.p6,F.Ov]})}return o})();var ut=l(7100),mt=l(2611),ve=l(7648),xe=l(7596),gt=l(1217),_t=l(7501),ht=l(3379);const ye={Settings:"Settings",Resources:"Resources"};var Ct=l(9877),ot=l(5331),Ae=l(8968),A=l(8497),ft=l(9818),be=l(4472);function Ze(o,s){1&o&&t.GkF(0)}const Se=()=>({link:"https://docs.2sxc.org/basics/app/configuration.html"});function Ue(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",2)(1,"mat-card-header",3)(2,"mat-card-title"),t._uU(3,"Configuration"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5,"redeem"),t.qZA()(),t.TgZ(6,"mat-card-content"),t._UZ(7,"p"),t.TgZ(8,"div",4)(9,"div",5),t._uU(10,"Name:"),t.qZA(),t.TgZ(11,"div",6)(12,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.displayName))}),t._uU(13),t.qZA()()(),t.TgZ(14,"div",4)(15,"div",5),t._uU(16,"Folder:"),t.qZA(),t.TgZ(17,"div",6)(18,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.folder))}),t._uU(19),t.qZA()()(),t.TgZ(20,"div",4)(21,"div",5),t._uU(22,"Version:"),t.qZA(),t.TgZ(23,"div",6)(24,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.version))}),t._uU(25),t.qZA()()(),t.TgZ(26,"div",4)(27,"div",5),t._uU(28,"For"),t.qZA(),t.TgZ(29,"div",6)(30,"b"),t._uU(31,"2sxc: "),t.qZA(),t.TgZ(32,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.toSxc))}),t._uU(33),t.qZA(),t.TgZ(34,"b"),t._uU(35," DNN: "),t.qZA(),t.TgZ(36,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.dnn))}),t._uU(37),t.qZA(),t.TgZ(38,"b"),t._uU(39," Oqt: "),t.qZA(),t.TgZ(40,"span",7),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.copyToClipboard(r.oqt))}),t._uU(41),t.qZA()()()(),t._UZ(42,"div",8),t.TgZ(43,"mat-card-actions",9),t.YNc(44,Ze,1,0,"ng-container",10),t.TgZ(45,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.edit())}),t.TgZ(46,"mat-icon",12),t._uU(47,"edit"),t.qZA(),t.TgZ(48,"span"),t._uU(49,"Edit"),t.qZA()(),t.TgZ(50,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openMetadata())}),t.TgZ(51,"mat-icon",12),t._uU(52,"local_offer"),t.qZA(),t.TgZ(53,"span"),t._uU(54,"Metadata"),t.qZA()()()()}if(2&o){t.oxw();const e=t.MAs(3);t.xp6(12),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.Oqu(s.displayName),t.xp6(5),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.Oqu(s.folder),t.xp6(5),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.Oqu(s.version),t.xp6(7),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.hij(" ",s.toSxc," "),t.xp6(3),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.hij(" ",s.dnn," "),t.xp6(3),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.hij(" ",s.oqt," "),t.xp6(3),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.DdM(16,Se)),t.xp6(2),t.Q6J("matBadge",s.appConfigurationsCount||null),t.xp6(5),t.Q6J("matBadge",s.appMetadataCount||null)}}function Me(o,s){if(1&o&&(t.TgZ(0,"a",13)(1,"mat-icon",14),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&o){const e=s.$implicit,i=s.$implicit;let r;t.s9C("href",s.link,t.LSH),t.Q6J("tippy","online documentation"),t.xp6(2),t.Oqu(null!==(r=e)&&void 0!==r?r:"menu_book"),t.xp6(2),t.Oqu(i)}}let ke=(()=>{class o extends k.H{constructor(e,i,n,r,c,g){super(e,i),this.router=e,this.route=i,this.contentItemsService=n,this.context=r,this.snackBar=c,this.appInternalsService=g,this.appSettingsInternal$=new Ct.x,this.viewModel$=(0,Z.a)([this.appSettingsInternal$,this.contentItemsService.getAll(p.Zy.contentTypes.appConfiguration)]).pipe((0,a.U)(([f,E])=>{const M=E[0];return{appConfigurationsCount:f.EntityLists.ToSxcContentApp.length,appMetadataCount:f.MetadataList.Items.length,displayName:M?.DisplayName??"-",folder:M?.Folder??"-",version:M?.Version??"-",toSxc:M?.RequiredVersion??"-",dnn:M?.RequiredDnnVersion??"-",oqt:M?.RequiredOqtaneVersion??"-"}}))}ngOnInit(){this.fetchSettings(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchSettings()}))}ngOnDestroy(){this.snackBar.dismiss(),super.ngOnDestroy()}copyToClipboard(e){(0,be.v)(e),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}edit(){const e=p.Zy.contentTypes.appConfiguration;this.contentItemsService.getAll(e).subscribe(i=>{let n;if(i.length<1)throw new Error(`Found no settings for type ${e}`);if(i.length>1)throw new Error(`Found too many settings for type ${e}`);n={items:[{EntityId:i[0].Id}]};const r=(0,N.f)(n);this.router.navigate([`edit/${r}`],{relativeTo:this.route.firstChild})})}openMetadata(){const e=X.U.getUrlApp(this.context.appId,`Metadata for App: ${this.dialogSettings.Context.App.Name} (${this.context.appId})`);this.router.navigate([e],{relativeTo:this.route.firstChild})}fetchSettings(){this.appInternalsService.getAppInternals(p.Zy.metadata.app.targetType,p.Zy.metadata.app.keyType,this.context.appId).subscribe(i=>{this.appSettingsInternal$.next(i)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(ut.l),t.Y36(mt._),t.Y36(H.ux),t.Y36(_t.l))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-app-configuration-card"]],inputs:{dialogSettings:"dialogSettings"},features:[t.qOj],decls:4,vars:3,consts:[["class","eav-card"],["docsLink",""],[1,"eav-card"],[1,"eav-card-header"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"tippy","click"],[1,"eav-card-space-div"],["align","start"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-button","",1,"eav-button__with-icon",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","","target","_blank",1,"eav-button__with-icon",3,"href","tippy"],[1,"eav-icon"]],template:function(i,n){if(1&i&&(t.YNc(0,Ue,55,17,"mat-card",0),t.ALo(1,"async"),t.YNc(2,Me,5,4,"ng-template",null,1,t.W1O)),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[T.$,F.tP,u.zs,u.lW,_.Hw,A.a8,A.hq,A.dn,A.dk,A.n5,W.k,F.Ov],styles:[".eav-card-space-div[_ngcontent-%COMP%]{min-height:30px}"]})}return o})();function Oe(o,s){1&o&&t._uU(0," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. ")}function Ie(o,s){1&o&&t._uU(0," This is the Primary App of this Site. You can also configure sitewide settings and resources here. ")}function Pe(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Oe,1,0)(2,Ie,1,0),t._uU(3," See "),t.TgZ(4,"a",5),t._uU(5,"docs"),t.qZA(),t._uU(6,". "),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.um2(1,e.isGlobal?1:-1),t.xp6(1),t.um2(2,e.isPrimary?2:-1)}}function De(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Global"),t.qZA(),t.TgZ(3,"td")(4,"button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.App))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customSettings,"edit"))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customSettings,"config"))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null)}}function Ee(o,s){1&o&&t.GkF(0)}function Ne(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Site"),t.qZA(),t.TgZ(3,"td")(4,"button",26),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.Site))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customSettings,"edit"))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",28),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customSettings,"config"))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()(),t.YNc(14,Ee,1,0,"ng-container",29)}if(2&o){const e=t.oxw(),i=t.MAs(65);t.xp6(5),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",i)}}function Fe(o,s){1&o&&t.GkF(0)}function Je(o,s){1&o&&t.GkF(0)}function Ge(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.App))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.settings))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.config(n.eavConstants.contentTypes.settings))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()(),t.YNc(14,Fe,1,0,"ng-container",29)(15,Je,1,0,"ng-container",29)}if(2&o){const e=t.oxw(),i=t.MAs(67),n=t.MAs(65),r=t.oxw();t.xp6(2),t.Oqu(r.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function qe(o,s){1&o&&t.GkF(0)}function Be(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Global"),t.qZA(),t.TgZ(3,"td")(4,"button",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.App))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customResources,"edit"))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customResources,"config"))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null)}}function Re(o,s){1&o&&t.GkF(0)}function Qe(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Site"),t.qZA(),t.TgZ(3,"td")(4,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.Site))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customResources,"edit"))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fixContentType(n.eavConstants.contentTypes.customResources,"config"))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()(),t.YNc(14,Re,1,0,"ng-container",29)}if(2&o){const e=t.oxw(),i=t.MAs(65);t.xp6(5),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",i)}}function He(o,s){1&o&&t.GkF(0)}function Ke(o,s){1&o&&t.GkF(0)}function Ve(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.App))}),t.TgZ(5,"mat-icon",23),t._uU(6,"edit"),t.qZA()()(),t.TgZ(7,"td")(8,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.edit(n.eavConstants.contentTypes.resources))}),t.TgZ(9,"mat-icon",23),t._uU(10,"edit"),t.qZA()(),t.TgZ(11,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.config(n.eavConstants.contentTypes.resources))}),t.TgZ(12,"mat-icon",23),t._uU(13,"dns"),t.qZA()()()(),t.YNc(14,He,1,0,"ng-container",29)(15,Ke,1,0,"ng-container",29)}if(2&o){const e=t.oxw(),i=t.MAs(67),n=t.MAs(65),r=t.oxw();t.xp6(2),t.Oqu(r.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function We(o,s){1&o&&t.GkF(0)}function Ye(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Global"),t.qZA(),t.TgZ(3,"td")(4,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.openGlobalSettings())}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA()()()()}}function Le(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Site"),t.qZA(),t.TgZ(3,"td")(4,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.openSiteSettings())}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA()()()()}}function $e(o,s){1&o&&t.GkF(0)}function ze(o,s){1&o&&t.GkF(0)}function Xe(o,s){1&o&&t.GkF(0)}function je(o,s){1&o&&t._uU(0," (not on Global App) ")}function tn(o,s){1&o&&t._uU(0," (not on Content) ")}function en(o,s){if(1&o&&t.YNc(0,je,1,0)(1,tn,1,0),2&o){const e=t.oxw(2);t.um2(0,e.isGlobal?0:-1),t.xp6(1),t.um2(1,e.isApp?1:-1)}}function nn(o,s){1&o&&t.GkF(0)}const Tt=()=>({link:"https://go.2sxc.org/settings"}),on=()=>({link:"https://go.2sxc.org/lightspeed"}),an=()=>({link:"https://go.2sxc.org/csp"}),sn=()=>({link:"https://docs.2sxc.org/basics/app/permissions.html"}),ln=()=>({link:"https://patrons.2sxc.org/features/feat/PermissionsByLanguage"});function cn(o,s){if(1&o){const e=t.EpF();t.YNc(0,Pe,7,2,"div",1),t.TgZ(1,"div",2)(2,"mat-card",3)(3,"mat-card-header",4)(4,"mat-card-title"),t._uU(5,"Settings"),t.qZA(),t.TgZ(6,"mat-icon"),t._uU(7,"settings"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"p"),t._uU(10,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.TgZ(11,"a",5),t._uU(12,"docs"),t.qZA()(),t.TgZ(13,"table",6)(14,"thead")(15,"tr"),t._UZ(16,"th"),t.TgZ(17,"th"),t._uU(18,"System Settings"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Custom Settings"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,De,14,3,"tr")(23,Ne,15,4)(24,Ge,16,6),t.qZA()()(),t._UZ(25,"div",7),t.TgZ(26,"mat-card-actions",8),t.YNc(27,qe,1,0,"ng-container",9),t.TgZ(28,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.analyze(n.AnalyzeParts.Settings))}),t.TgZ(29,"mat-icon",11),t._uU(30,"manage_search"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"Analyze Combined Settings"),t.qZA()()()(),t.TgZ(33,"mat-card",3)(34,"mat-card-header",4)(35,"mat-card-title"),t._uU(36,"Language Resources (i18n)"),t.qZA(),t.TgZ(37,"mat-icon"),t._uU(38,"translate"),t.qZA()(),t.TgZ(39,"mat-card-content")(40,"p"),t._uU(41," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.TgZ(42,"a",5),t._uU(43,"docs"),t.qZA()(),t.TgZ(44,"table",6)(45,"thead")(46,"tr"),t._UZ(47,"th"),t.TgZ(48,"th"),t._uU(49,"System Resources"),t.qZA(),t.TgZ(50,"th"),t._uU(51,"Custom Resources"),t.qZA()()(),t.TgZ(52,"tbody"),t.YNc(53,Be,14,3,"tr")(54,Qe,15,4)(55,Ve,16,6),t.qZA()()(),t._UZ(56,"div",7),t.TgZ(57,"mat-card-actions",8),t.YNc(58,We,1,0,"ng-container",9),t.TgZ(59,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.analyze(n.AnalyzeParts.Resources))}),t.TgZ(60,"mat-icon",11),t._uU(61,"manage_search"),t.qZA(),t.TgZ(62,"span"),t._uU(63,"Analyze Combined Resources"),t.qZA()()()(),t.YNc(64,Ye,7,0,"ng-template",null,13,t.W1O)(66,Le,7,0,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(68,"div",2),t._UZ(69,"app-app-configuration-card",15),t.TgZ(70,"mat-card",3)(71,"mat-card-header",4)(72,"mat-card-title"),t._uU(73,"Performance"),t.qZA(),t.TgZ(74,"mat-icon"),t._uU(75,"bolt"),t.qZA()(),t.TgZ(76,"mat-card-content")(77,"p"),t._uU(78," LightSpeed Output Cache to speed up page by 50-90% "),t.qZA(),t._UZ(79,"app-feature-text-info",16),t.qZA(),t._UZ(80,"div",7),t.TgZ(81,"mat-card-actions",8),t.YNc(82,$e,1,0,"ng-container",9),t.TgZ(83,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openLightSpeed())}),t.TgZ(84,"mat-icon",18),t._uU(85,"bolt"),t.qZA(),t.TgZ(86,"span"),t._uU(87,"Edit LightSpeed"),t.qZA()()()(),t.TgZ(88,"mat-card",3)(89,"mat-card-header",4)(90,"mat-card-title"),t._uU(91,"Security"),t.qZA(),t.TgZ(92,"mat-icon"),t._uU(93,"local_police"),t.qZA()(),t.TgZ(94,"mat-card-content")(95,"p"),t._uU(96," ContentSecurityPolicy (CSP) features in this App - for maximum control. "),t.qZA(),t._UZ(97,"app-feature-text-info",16),t.qZA(),t._UZ(98,"div",7),t.TgZ(99,"mat-card-actions",8),t.YNc(100,ze,1,0,"ng-container",9),t.qZA()(),t.TgZ(101,"mat-card",3)(102,"mat-card-header",4)(103,"mat-card-title"),t._uU(104,"Permissions"),t.qZA(),t.TgZ(105,"mat-icon"),t._uU(106,"person"),t.qZA()(),t.TgZ(107,"mat-card-content")(108,"p"),t._uU(109," Give access to the entire app (all data). Use with care. "),t.qZA()(),t._UZ(110,"div",7),t.TgZ(111,"mat-card-actions",8),t.YNc(112,Xe,1,0,"ng-container",9),t.TgZ(113,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openPermissions())}),t.TgZ(114,"mat-icon",18),t._uU(115,"person"),t.qZA(),t.TgZ(116,"span"),t._uU(117," Edit Permissions "),t.YNc(118,en,2,2),t.qZA()(),t.YNc(119,nn,1,0,"ng-container",9),t.TgZ(120,"button",19),t.NdJ("click",function(){const r=t.CHM(e),c=t.oxw();return t.KtG(c.openLanguagePermissions(r.langPermsEnabled))}),t.TgZ(121,"mat-icon",20),t._uU(122," person "),t.qZA(),t.TgZ(123,"span"),t._uU(124,"Language Permissions"),t.qZA()()()()()}if(2&o){const e=t.oxw(),i=t.MAs(3);t.um2(0,e.isGlobal||e.isPrimary?0:-1),t.xp6(22),t.um2(22,e.isGlobal?22:-1),t.xp6(1),t.um2(23,e.isPrimary?23:-1),t.xp6(1),t.um2(24,e.isApp?24:-1),t.xp6(3),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(30,Tt)),t.xp6(26),t.um2(53,e.isGlobal?53:-1),t.xp6(1),t.um2(54,e.isPrimary?54:-1),t.xp6(1),t.um2(55,e.isApp?55:-1),t.xp6(3),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(31,Tt)),t.xp6(11),t.Q6J("dialogSettings",e.dialogSettings),t.xp6(10),t.Q6J("featureNameId","LightSpeedOutputCache")("asInfo",!0),t.xp6(3),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(32,on)),t.xp6(1),t.s9C("disabled",!s.lightSpeedEnabled),t.xp6(1),t.Q6J("matBadge",s.appLightSpeedCount||null),t.xp6(13),t.Q6J("featureNameId","ContentSecurityPolicy")("asInfo",!0),t.xp6(3),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(33,an)),t.xp6(12),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(34,sn)),t.xp6(1),t.Q6J("disabled",!e.dialogSettings.Context.Enable.AppPermissions),t.xp6(1),t.Q6J("matBadge",e.dialogSettings.Context.App.Permissions.Count||null),t.xp6(4),t.um2(118,e.dialogSettings.Context.Enable.AppPermissions?-1:118),t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.DdM(35,ln)),t.xp6(2),t.Q6J("matBadgeHidden",s.langPermsEnabled)}}function pn(o,s){if(1&o&&(t.TgZ(0,"a",44)(1,"mat-icon",11),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()),2&o){const e=s.$implicit,i=s.$implicit;let r;t.s9C("href",s.link,t.LSH),t.Q6J("tippy","online documentation"),t.xp6(2),t.Oqu(null!==(r=e)&&void 0!==r?r:"menu_book"),t.xp6(2),t.Oqu(i)}}let dn=(()=>{class o extends k.H{constructor(e,i,n,r,c,g,f,E,M,at,Gn,qn,Bn,Rn){super(e,i),this.router=e,this.route=i,this.contentItemsService=n,this.context=r,this.importAppPartsService=c,this.snackBar=g,this.dialogService=f,this.appInternalsService=E,this.contentTypesService=M,this.globalConfigService=at,this.dialog=qn,this.viewContainerRef=Bn,this.changeDetectorRef=Rn,this.eavConstants=p.Zy,this.AnalyzeParts=ye,this.SystemSettingsScopes=p.xB,this.AppScopes=w,this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.appSettingsInternal$=new Ct.x,this.appStateAdvanced=!1,this.features=new ve.k,this.features.loadFromService(Gn),this.viewModel$=(0,Z.a)([this.appSettingsInternal$,this.features.isEnabled$(ot.C.LightSpeed),this.features.isEnabled$(ot.C.ContentSecurityPolicy),this.features.isEnabled$(ot.C.PermissionsByLanguage)]).pipe((0,a.U)(([G,Qn,Hn,Kn])=>({lightSpeedEnabled:Qn,cspEnabled:Hn,langPermsEnabled:Kn,appLightSpeedCount:G.MetadataList.Items.filter(q=>q._Type.Name==p.Zy.appMetadata.LightSpeed.ContentTypeName).length,systemSettingsCount:this.isPrimary?G.EntityLists.SettingsSystem.filter(q=>q.SettingsEntityScope===p.xB.Site).length:G.EntityLists.SettingsSystem.filter(q=>!q.SettingsEntityScope).length,customSettingsCount:G.EntityLists.AppSettings?.length,customSettingsFieldsCount:G.FieldAll.AppSettings?.length,systemResourcesCount:this.isPrimary?G.EntityLists.ResourcesSystem.filter(q=>q.SettingsEntityScope===p.xB.Site).length:G.EntityLists.ResourcesSystem.filter(q=>!q.SettingsEntityScope).length,customResourcesCount:G.EntityLists.AppResources?.length,customResourcesFieldsCount:G.FieldAll.AppResources?.length})))}ngOnInit(){this.fetchSettings(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchSettings()}))}ngOnChanges(e){if(null!=e.dialogSettings){const i=this.dialogSettings.Context.App.SettingsScope;this.isGlobal=i===w.Global,this.isPrimary=i===w.Site,this.isApp=i===w.App}}ngOnDestroy(){this.snackBar.dismiss(),super.ngOnDestroy()}edit(e,i){this.contentItemsService.getAll(e).subscribe(n=>{let r;switch(e){case p.Zy.contentTypes.systemSettings:case p.Zy.contentTypes.systemResources:const g=n.filter(M=>i===p.xB.App?!M.SettingsEntityScope:M.SettingsEntityScope===p.xB.Site);if(g.length>1)throw new Error(`Found too many settings for type ${e}`);const f=g[0];r={items:[null==f?{ContentTypeName:e,Prefill:{...i===p.xB.Site&&{SettingsEntityScope:p.xB.Site}}}:{EntityId:f.Id}]};break;case p.Zy.contentTypes.customSettings:case p.Zy.contentTypes.customResources:if(n.length>1)throw new Error(`Found too many settings for type ${e}`);const E=n[0];r={items:[null==E?{ContentTypeName:e}:{EntityId:E.Id}]};break;default:if(n.length<1)throw new Error(`Found no settings for type ${e}`);if(n.length>1)throw new Error(`Found too many settings for type ${e}`);r={items:[{EntityId:n[0].Id}]}}const c=(0,N.f)(r);this.router.navigate([`edit/${c}`],{relativeTo:this.route.firstChild})})}openLightSpeed(){const e=xe.h.getLightSpeedEditParams(this.context.appId),i=(0,N.f)(e);this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}openSiteSettings(){const e=this.dialogSettings.Context.Site.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}openGlobalSettings(){const e=this.dialogSettings.Context.System.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}config(e){this.router.navigate([`fields/${e}`],{relativeTo:this.route.firstChild})}openPermissions(){this.router.navigate([j.i.getUrlApp(this.context.appId)],{relativeTo:this.route.firstChild})}openLanguagePermissions(e){e?this.router.navigate(["language-permissions"],{relativeTo:this.route.firstChild}):Ae.B.openDialog(this.dialog,ot.C.PermissionsByLanguage,this.viewContainerRef,this.changeDetectorRef)}analyze(e){this.router.navigate([`analyze/${e}`],{relativeTo:this.route.firstChild})}fetchSettings(){this.appInternalsService.getAppInternals(p.Zy.metadata.app.targetType,p.Zy.metadata.app.keyType,this.context.appId).subscribe(i=>{this.appSettingsInternal$.next(i)})}fixContentType(e,i){this.contentTypesService.retrieveContentTypes(p.Zy.scopes.configuration.value).subscribe(n=>{n.some(c=>c.Name===e)?"edit"===i?this.edit(e):"config"===i&&this.config(e):this.contentTypesService.save({StaticName:"",Name:e,Description:"",Scope:p.Zy.scopes.configuration.value,ChangeStaticName:!1,NewStaticName:""}).subscribe(g=>{g&&("edit"===i?this.edit(e):"config"===i&&this.config(e))})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(ut.l),t.Y36(mt._),t.Y36(ht.z),t.Y36(H.ux),t.Y36(it.x),t.Y36(_t.l),t.Y36(gt.sF),t.Y36(z.bE),t.Y36(gt.Kw),t.Y36(O.uw),t.Y36(t.s_b),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-app-configuration"]],inputs:{dialogSettings:"dialogSettings"},features:[t.qOj,t.TTD],decls:4,vars:3,consts:[["docsLink",""],["class","alert alert-info scope-info"],[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],["href","https://go.2sxc.org/settings","target","_blank"],[1,"eav-settings-and-resources-table"],[1,"eav-card-space-div"],["align","start"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-button","","tippy","See the result of combining all settings",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","tippy","See the result of combining all resources",1,"eav-button__with-icon",3,"click"],["goToGlobal",""],["goToSite",""],[3,"dialogSettings"],[3,"featureNameId","asInfo"],["mat-button","",1,"eav-button__with-icon",3,"disabled","click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon",3,"click"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadgeHidden"],[1,"alert","alert-info","scope-info"],["mat-icon-button","","tippy","Edit global system settings",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge"],["mat-icon-button","","tippy","Edit custom global settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom global settings",3,"click"],["mat-icon-button","","tippy","Edit site system settings",3,"click"],["mat-icon-button","","tippy","Edit custom site settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom site settings",3,"click"],[4,"ngTemplateOutlet"],["mat-icon-button","","tippy","Edit app system settings",3,"click"],["mat-icon-button","","tippy","Edit custom app settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom app settings",3,"click"],["mat-icon-button","","tippy","Edit global system resources",3,"click"],["mat-icon-button","","tippy","Edit custom global resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom global resources",3,"click"],["mat-icon-button","","tippy","Edit site system resources",3,"click"],["mat-icon-button","","tippy","Edit custom site resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom site resources",3,"click"],["mat-icon-button","","tippy","Edit app system resources",3,"click"],["mat-icon-button","","tippy","Edit custom app resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom app resources",3,"click"],["mat-icon-button","","tippy","Go to global",3,"click"],["mat-icon-button","","tippy","Go to site",3,"click"],["mat-button","","target","_blank",1,"eav-button__with-icon",3,"href","tippy"]],template:function(i,n){if(1&i&&(t.YNc(0,cn,125,36),t.ALo(1,"async"),t.YNc(2,pn,5,4,"ng-template",null,0,t.W1O)),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[T.$,F.tP,u.zs,u.lW,u.RK,_.Hw,A.a8,A.hq,A.dn,A.dk,A.n5,W.k,ft.B,ke,F.Ov],styles:[".eav-settings-and-resources-table[_ngcontent-%COMP%]{width:100%}.eav-settings-and-resources-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.eav-settings-and-resources-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]})}return o})();var un=l(2091),mn=l(9293);function gn(o,s){1&o&&(t.TgZ(0,"p"),t._UZ(1,"br"),t._uU(2," In Advanced mode you can also sync all the site files used by this app. They will be placed in a folder inside "),t.TgZ(3,"code"),t._uU(4,"App_Data"),t.qZA(),t._uU(5," and allow sync/restore with git or another server. "),t.qZA())}function _n(o,s){1&o&&t._UZ(0,"app-feature-text-info",9),2&o&&t.Q6J("featureNameId","AppSyncWithSiteFiles")}function hn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportAppXml(!1))}),t.TgZ(1,"mat-icon",6),t._uU(2,"more_time"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Save state"),t.qZA()(),t.TgZ(5,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.resetApp(!1))}),t.TgZ(6,"mat-icon",6),t._uU(7,"restore"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Restore state"),t.qZA()()}}function Cn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportAppXml(!0))}),t.TgZ(1,"mat-icon",6),t._uU(2,"more_time"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Save with Assets"),t.qZA()(),t.TgZ(5,"button",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.resetApp(!0))}),t.TgZ(6,"mat-icon",6),t._uU(7,"restore"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Restore with Assets"),t.qZA()()}}let fn=(()=>{class o extends k.H{constructor(e,i,n,r,c){super(e,i),this.router=e,this.route=i,this.exportAppService=n,this.importAppPartsService=r,this.snackBar=c,this.appStateAdvanced=!1}ngOnInit(){}ngOnDestroy(){this.snackBar.dismiss(),super.ngOnDestroy()}exportApp(){this.router.navigate(["export"],{relativeTo:this.route.firstChild})}exportParts(){this.router.navigate(["export/parts"],{relativeTo:this.route.firstChild})}importParts(){this.router.navigate(["import/parts"],{relativeTo:this.route.firstChild})}exportAppXml(e){this.snackBar.open("Exporting..."),this.exportAppService.exportForVersionControl({includeContentGroups:!0,resetAppGuid:!1,withFiles:e}).subscribe({next:i=>{this.snackBar.open("Export completed into the 'App_Data' folder.",null,{duration:3e3})},error:i=>{this.snackBar.open("Export failed. Please check console for more information",null,{duration:3e3})}})}resetApp(e){confirm("Are you sure? All changes since last xml export will be lost")&&(this.snackBar.open("Resetting..."),this.importAppPartsService.resetApp(e).subscribe({next:i=>{this.snackBar.open("Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct",null,{duration:3e4})},error:i=>{this.snackBar.open("Reset failed. Please check console for more information",null,{duration:3e3})}}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(un.v),t.Y36(ht.z),t.Y36(H.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-sync-configuration"]],inputs:{dialogSettings:"dialogSettings"},features:[t.qOj],decls:73,vars:6,consts:[[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],[1,"eav-card-space-div"],["align","start"],["mat-button","",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],[1,"eav-card-header-title-toggle"],[1,"eav-card-header-toggle",3,"ngModel","ngModelChange"],[3,"featureNameId"]],template:function(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",0)(2,"mat-card",1)(3,"mat-card-header",2)(4,"mat-card-title"),t._uU(5,"Instructions for Sync or Export/Import"),t.qZA(),t.TgZ(6,"mat-icon"),t._uU(7,"info"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"p"),t._uU(10," This section is for export/import of the entire App, for synchronizing with the file storage (eg. for Git) or to export parts of the App for re-import in another App. "),t.qZA(),t.TgZ(11,"p"),t._uU(12," To export/import Content-Types, Queries, Views or Data, use the respective tabs. "),t.qZA()()()(),t.TgZ(13,"div",0)(14,"mat-card",1)(15,"mat-card-header",2)(16,"mat-card-title"),t._uU(17,"Export this entire App"),t.qZA(),t.TgZ(18,"mat-icon"),t._uU(19,"cloud_download"),t.qZA()(),t.TgZ(20,"mat-card-content")(21,"p"),t._uU(22," Create an package (zip) which can be installed in another site. "),t.qZA()(),t._UZ(23,"div",3),t.TgZ(24,"mat-card-actions",4)(25,"button",5),t.NdJ("click",function(){return n.exportApp()}),t.TgZ(26,"mat-icon",6),t._uU(27,"cloud_download"),t.qZA(),t.TgZ(28,"span"),t._uU(29,"Export App"),t.qZA()()()(),t.TgZ(30,"mat-card",1)(31,"mat-card-header",2)(32,"mat-card-title"),t._uU(33,"Export or Import parts of this App"),t.qZA(),t.TgZ(34,"mat-icon"),t._uU(35,"import_export"),t.qZA()(),t.TgZ(36,"mat-card-content")(37,"p"),t._uU(38," Create an xml containing parts of the app, e.g. content and templates. Import parts from such an xml into this app. "),t.qZA()(),t._UZ(39,"div",3),t.TgZ(40,"mat-card-actions",4)(41,"button",5),t.NdJ("click",function(){return n.exportParts()}),t.TgZ(42,"mat-icon",6),t._uU(43,"cloud_download"),t.qZA(),t.TgZ(44,"span"),t._uU(45,"Export Parts"),t.qZA()(),t.TgZ(46,"button",5),t.NdJ("click",function(){return n.importParts()}),t.TgZ(47,"mat-icon",6),t._uU(48,"cloud_upload"),t.qZA(),t.TgZ(49,"span"),t._uU(50,"Import Parts"),t.qZA()()()()(),t.TgZ(51,"div",0)(52,"mat-card",1)(53,"mat-card-header",2)(54,"div",7)(55,"mat-card-title"),t._uU(56,"App-State Versioning"),t.qZA(),t.TgZ(57,"mat-slide-toggle",8),t.NdJ("ngModelChange",function(c){return n.appStateAdvanced=c}),t._uU(58),t.qZA()(),t.TgZ(59,"mat-icon"),t._uU(60,"history_toggle_off"),t.qZA()(),t.TgZ(61,"mat-card-content")(62,"p"),t._uU(63," You can save / restore the app with data and configuration in "),t.TgZ(64,"code"),t._uU(65,".data/app.xml"),t.qZA(),t._uU(66,". This file can then also be versioned using git. "),t.qZA(),t.YNc(67,gn,6,0,"p"),t.qZA(),t.YNc(68,_n,1,1,"app-feature-text-info",9),t._UZ(69,"div",3),t.TgZ(70,"mat-card-actions",4),t.YNc(71,hn,10,0)(72,Cn,10,0),t.qZA()()(),t.BQk()),2&i&&(t.xp6(57),t.Q6J("ngModel",n.appStateAdvanced),t.xp6(1),t.Oqu(n.appStateAdvanced?"advanced":"basic"),t.xp6(9),t.um2(67,n.appStateAdvanced?67:-1),t.xp6(1),t.um2(68,n.appStateAdvanced?68:-1),t.xp6(3),t.um2(71,n.appStateAdvanced?-1:71),t.xp6(1),t.um2(72,n.appStateAdvanced?72:-1))},dependencies:[u.lW,_.Hw,nt.JJ,nt.On,A.a8,A.hq,A.dn,A.dk,A.n5,mn.Rr,ft.B],styles:[".eav-card-header-title-toggle[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:100%;margin-right:8px}.eav-card-header-title-toggle[_ngcontent-%COMP%]   .eav-card-header-toggle[_ngcontent-%COMP%]{margin-left:8px;margin-top:2px}"]})}return o})();const Tn=["sidenav"],vn=(o,s)=>s.path;function xn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"img",16),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(19);return t.KtG(n.opened=!n.opened)}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("src",(null==e.dialogSettings?null:e.dialogSettings.Context.App.Icon)+"?w=40&h=40&mode=crop",t.LSH)}}function yn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",17),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(19);return t.KtG(n.opened=!n.opened)}),t._uU(1,"menu"),t.qZA()}}function An(o,s){1&o&&t._uU(0," Global ")}function bn(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw();t.hij(" ",null==e.dialogSettings?null:e.dialogSettings.Context.App.Name," ")}}function Zn(o,s){if(1&o&&(t.TgZ(0,"mat-icon",18),t._uU(1,"chevron_right"),t.qZA(),t._uU(2)),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e," ")}}function wn(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Zn,3,1),t.BQk()),2&o){const e=s.last;t.xp6(1),t.um2(1,e?1:-1)}}function Sn(o,s){}function Un(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.changeUrl(r.path))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"div",20),t._uU(4),t.qZA()()}if(2&o){const e=s.$implicit;t.Q6J("routerLink",e.path)("tippy",e.tippy),t.xp6(2),t.Oqu(e.icon),t.xp6(2),t.Oqu(e.name)}}function Mn(o,s){if(1&o&&t._UZ(0,"app-getting-started",11),2&o){const e=t.oxw();t.Q6J("gettingStartedUrl",e.dialogSettings.Context.App.GettingStartedUrl)}}function kn(o,s){if(1&o&&t._UZ(0,"app-data",12),2&o){const e=t.oxw();t.Q6J("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)}}function On(o,s){if(1&o&&t._UZ(0,"app-queries",12),2&o){const e=t.oxw();t.Q6J("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)}}function In(o,s){if(1&o&&t._UZ(0,"app-views",13),2&o){const e=t.oxw();t.Q6J("enableCode",e.dialogSettings.Context.Enable.CodeEditor)("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)("appIsGlobal",e.dialogSettings.Context.App.IsShared)("appIsInherited",e.dialogSettings.Context.App.IsInherited)}}function Pn(o,s){if(1&o&&t._UZ(0,"app-web-api",14),2&o){const e=t.oxw();t.Q6J("enableCode",e.dialogSettings.Context.Enable.CodeEditor)}}function Dn(o,s){if(1&o&&t._UZ(0,"app-app-configuration",15),2&o){const e=t.oxw();t.Q6J("dialogSettings",e.dialogSettings)}}function En(o,s){if(1&o&&t._UZ(0,"app-sync-configuration",15),2&o){const e=t.oxw();t.Q6J("dialogSettings",e.dialogSettings)}}function Nn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-toolbar")(1,"div",0),t.YNc(2,xn,1,1,"img",1)(3,yn,2,0),t.TgZ(4,"div"),t.YNc(5,An,1,0)(6,bn,1,1),t.TgZ(7,"span"),t._uU(8," Admin "),t.qZA()(),t.TgZ(9,"xng-breadcrumb",2),t.YNc(10,wn,2,1,"ng-container",3),t.qZA(),t.YNc(11,Sn,0,0,"ng-template",null,4,t.W1O),t.qZA(),t._UZ(13,"span",5),t.TgZ(14,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeDialog())}),t.TgZ(15,"mat-icon"),t._uU(16,"close"),t.qZA()()(),t.TgZ(17,"mat-sidenav-container")(18,"mat-sidenav",7,8),t.SjG(20,Un,5,4,"a",21,vn),t.TgZ(22,"div",9)(23,"p"),t._uU(24,"use App logo to show/hide menu"),t.qZA()()(),t.TgZ(25,"mat-sidenav-content"),t._UZ(26,"router-outlet"),t.TgZ(27,"div",10),t.YNc(28,Mn,1,1,"app-getting-started",11)(29,kn,1,1,"app-data",12)(30,On,1,1,"app-queries",12)(31,In,1,4,"app-views",13)(32,Pn,1,1,"app-web-api",14)(33,Dn,1,1,"app-app-configuration",15)(34,En,1,1,"app-sync-configuration",15),t.qZA()()()}if(2&o){const e=t.MAs(12),i=t.oxw();t.xp6(2),t.um2(2,null!=s.dialogSettings&&s.dialogSettings.Context.App.Icon?2:3),t.xp6(3),t.um2(5,(null==s.dialogSettings?null:s.dialogSettings.Context.App.SettingsScope)===i.AppScopes.Global?5:-1),t.xp6(1),t.um2(6,(null==s.dialogSettings?null:s.dialogSettings.Context.App.SettingsScope)!==i.AppScopes.Global?6:-1),t.xp6(3),t.Q6J("separator",e),t.xp6(9),t.Q6J("mode",i.smallScreen.matches?"over":"side")("opened",i.sideNavOpened),t.xp6(2),t.wJu(i.navItems),t.xp6(8),t.um2(28,"home"===s.currentPath?28:-1),t.xp6(1),t.um2(29,"data"===s.currentPath?29:-1),t.xp6(1),t.um2(30,"queries"===s.currentPath?30:-1),t.xp6(1),t.um2(31,"views"===s.currentPath?31:-1),t.xp6(1),t.um2(32,"web-api"===s.currentPath?32:-1),t.xp6(1),t.um2(33,"app"===s.currentPath?33:-1),t.xp6(1),t.um2(34,"sync"===s.currentPath?34:-1)}}const Fn=[{name:"Info",path:"home",icon:"info",tippy:"App Info"},{name:"Data",path:"data",icon:"menu",tippy:"Data / Content"},{name:"Queries",path:"queries",icon:"filter_list",tippy:"Queries / Visual Query Designer"},{name:"Views",path:"views",icon:"layers",tippy:"Views / Templates"},{name:"Web API",path:"web-api",icon:"offline_bolt",tippy:"WebApi"},{name:"App",path:"app",icon:"settings_applications",tippy:"App Settings"},{name:"Sync",path:"sync",icon:"sync",tippy:"App Export / Import"}];let Jn=(()=>{class o extends k.H{constructor(e,i,n,r,c){super(e,i),this.router=e,this.route=i,this.dialogRef=n,this.appDialogConfigService=r,this.media=c,this.AppScopes=w,this.dialogSettings$=new b.X(void 0),this.pathsArray$=new b.X(void 0),this.currentPath$=(0,Z.a)([this.pathsArray$,this.router.events.pipe((0,Q.h)(g=>g instanceof m.m2),(0,a.U)(()=>this.route.snapshot.firstChild.url[0].path),(0,K.O)(this.route.snapshot.firstChild.url[0].path))]).pipe((0,a.U)(([g,f])=>{if(null!=g)return f})),this.viewModel$=(0,Z.a)([this.dialogSettings$,this.currentPath$]).pipe((0,a.U)(([g,f])=>({dialogSettings:g,currentPath:f}))),this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=Fn}ngOnInit(){this.fetchDialogSettings(),this.subscription.add(this.refreshOnChildClosedDeep().subscribe(()=>{this.fetchDialogSettings()})),this.smallScreen.addEventListener("change",e=>this.sidenav.opened=!e.matches)}ngOnDestroy(){this.dialogSettings$.complete(),this.pathsArray$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}changeUrl(e){"data"===e&&(e=`data/${p.Zy.scopes.default.value}`),this.router.navigate([e],{relativeTo:this.route})}fetchDialogSettings(){this.appDialogConfigService.getShared$().subscribe(e=>{(0,Y.X)(e.Context.App),this.dialogSettings$.next(e),e.Context.Enable.Query||(this.navItems=this.navItems.filter(i=>"Queries"!==i.name&&"Web API"!==i.name)),this.pathsArray$.next(this.navItems.map(i=>i.path))})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(O.so),t.Y36(L.K),t.Y36($.vx))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-app-administration-nav"]],viewQuery:function(i,n){if(1&i&&t.Gf(Tn,5),2&i){let r;t.iGM(r=t.CRH())&&(n.sidenav=r.first)}},features:[t.qOj],decls:2,vars:3,consts:[[1,"toolbar-container"],[3,"src"],[3,"separator"],[4,"xngBreadcrumbItem"],["emptyTemplate",""],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],["sidenav",""],[1,"sideNav-bottom-info"],[1,"container-content"],[3,"gettingStartedUrl"],[3,"enablePermissions"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited"],[3,"enableCode"],[3,"dialogSettings"],[3,"src","click"],[1,"menu-container",3,"click"],[1,"breadcrumb-icon"],["routerLinkActive","active","matRipple","",1,"app-menu-container",3,"routerLink","tippy","click"],[1,"link-text"],["routerLinkActive","active","matRipple","","class","app-menu-container",3,"routerLink","tippy"]],template:function(i,n){if(1&i&&(t.YNc(0,Nn,35,13),t.ALo(1,"async")),2&i){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[m.lC,m.rH,m.Od,T.$,V.LI,V.Of,u.RK,_.Hw,h.wG,I.Ye,P.JX,P.TM,P.Rh,S,Jt,Yt,ce,Te,dn,fn,F.Ov],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}.app-menu-container[_ngcontent-%COMP%]{padding:16px 32px;display:flex;align-items:center;text-decoration:none;color:#000;transition:all 225ms ease-in-out}.app-menu-container[_ngcontent-%COMP%]:hover{background-color:#80808033}.app-menu-container[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-left:25px}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}"]})}return o})()},5331:(st,B,l)=>{l.d(B,{C:()=>m});const m={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},9818:(st,B,l)=>{l.d(B,{B:()=>V});var m=l(8968),b=l(8071),Z=l(3839),Q=l(9736),a=l(9039),K=l(6861),k=l(7648),p=l(6515),Y=l(9498),w=l(6575),L=l(1916);function t(u,_){if(1&u){const h=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){a.CHM(h);const P=a.oxw(2);return a.KtG(P.openDialog())}),a.ALo(1,"translate"),a.TgZ(2,"mat-icon"),a._uU(3),a.qZA(),a.TgZ(4,"div",3)(5,"div",4),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.TgZ(8,"div",5),a._uU(9),a.ALo(10,"translate"),a.qZA()()()}if(2&u){const h=a.oxw();a.Q6J("tippy",a.xi3(1,7,"Features.Tooltip",h.feature)),a.xp6(2),a.Gre("icon icon-",h.icon,""),a.xp6(1),a.Oqu(h.icon),a.xp6(3),a.Oqu(a.lcZ(7,10,"Features.FeatureNotActivated")),a.xp6(3),a.Oqu(a.lcZ(10,12,"Features.ClickToFindOutMore"))}}function O(u,_){1&u&&a.YNc(0,t,11,14,"div",1),2&u&&a.um2(0,_.show?0:-1)}function $(u,_){1&u&&(a.TgZ(0,"div"),a._uU(1,"loading..."),a.qZA())}function T(u,_){1&u&&(a.TgZ(0,"div"),a._uU(1,"loading..."),a.qZA())}let V=(()=>{class u extends m.B{set asInfo(h){this.asInfo$.next(h)}constructor(h,I,P,R){super(h,I,R,P),this.asInfo$=new b.X(!1),this.viewModel$=(0,Z.a)([this.feature$,this.asInfo$,this.show$]).pipe((0,Q.U)(([C,S,d])=>({feature:C,icon:S?"info":"warning",show:d})))}static#t=this.\u0275fac=function(I){return new(I||u)(a.Y36(K.uw),a.Y36(a.s_b),a.Y36(k.k),a.Y36(a.sBO))};static#e=this.\u0275cmp=a.Xpm({type:u,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},features:[a.qOj],decls:5,vars:3,consts:[["loading",""],["class","feature-text-info",3,"tippy"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(I,P){if(1&I&&(a.YNc(0,O,1,1),a.ALo(1,"async"),a.YNc(2,$,2,0)(3,T,2,0,"ng-template",null,0,a.W1O)),2&I){let R;a.um2(0,(R=a.lcZ(1,1,P.viewModel$))?0:2,R)}},dependencies:[p.Hw,Y.$,w.Ov,L.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return u})()},8968:(st,B,l)=>{l.d(B,{B:()=>R});var m=l(6861),b=l(3839),Z=l(9736),Q=l(4472),a=l(9039),K=l(9409),k=l(8737),p=l(895),Y=l(6515),w=l(8497),L=l(9498),t=l(6575),O=l(6537),$=l(1916);function T(C,S){if(1&C){const d=a.EpF();a.TgZ(0,"div",1)(1,"div",2),a._uU(2,"ID:"),a.qZA(),a.TgZ(3,"div",8)(4,"span",9),a.NdJ("click",function(){const y=a.CHM(d),D=a.oxw(2);return a.KtG(D.copyToClipboard(y))}),a._uU(5),a.qZA()()()}2&C&&(a.xp6(4),a.Q6J("tippy",S),a.xp6(1),a.Oqu(S))}function V(C,S){if(1&C){const d=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(){const y=a.CHM(d),D=a.oxw(2);return a.KtG(D.findOutMore(y))}),a.TgZ(1,"mat-icon"),a._uU(2,"open_in_new"),a.qZA(),a._uU(3),a.ALo(4,"translate"),a.qZA()}2&C&&(a.xp6(3),a.hij(" ",a.lcZ(4,1,"Features.FindOutMore")," "))}function u(C,S){if(1&C){const d=a.EpF();a.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a._uU(3),a.qZA()(),a.TgZ(4,"mat-card-content"),a._UZ(5,"p",0),a.ALo(6,"safeHtml"),a.TgZ(7,"div",1)(8,"div",2),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.TgZ(11,"div",3)(12,"span"),a._uU(13),a.ALo(14,"translate"),a.qZA()()(),a.YNc(15,T,6,2,"div",4),a.qZA(),a.TgZ(16,"mat-card-actions",5),a.YNc(17,V,5,3,"button",6),a.TgZ(18,"button",7),a.NdJ("click",function(){a.CHM(d);const U=a.oxw();return a.KtG(U.closeDialog())}),a._uU(19),a.ALo(20,"translate"),a.qZA()()()}if(2&C){let d;a.xp6(3),a.Oqu(S.feature.Name),a.xp6(2),a.Q6J("innerHtml",a.lcZ(6,7,S.feature.Description),a.oJD),a.xp6(4),a.hij("",a.lcZ(10,9,"Features.Status"),":"),a.xp6(4),a.Oqu(a.lcZ(14,11,S.feature.IsEnabled?"Features.Active":"Features.NotActive")),a.xp6(2),a.um2(15,(d=S.feature.NameId)?15:-1,d),a.xp6(2),a.um2(17,(d=S.feature.Link)?17:-1,d),a.xp6(2),a.hij(" ",a.lcZ(20,13,"Features.Close")," ")}}let _=(()=>{class C{constructor(d,x,U,y){this.dialogData=d,this.dialogRef=x,this.snackBar=U,this.featureDetailService=y}ngOnInit(){this.viewModel$=(0,b.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,Z.U)(([d])=>({feature:d})))}copyToClipboard(d){(0,Q.v)(d),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(d){window.open(d,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(x){return new(x||C)(a.Y36(m.WI),a.Y36(m.so),a.Y36(K.ux),a.Y36(k.f))};static#e=this.\u0275cmp=a.Xpm({type:C,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["class","eav-info-row"],["align","end"],["mat-raised-button","","color","accent","class","eav-card-action-button"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"]],template:function(x,U){if(1&x&&(a.YNc(0,u,21,15,"mat-card"),a.ALo(1,"async")),2&x){let y;a.um2(0,(y=a.lcZ(1,1,U.viewModel$))?0:-1,y)}},dependencies:[p.lW,Y.Hw,w.a8,w.hq,w.dn,w.dk,w.n5,L.$,t.Ov,O.z,$.X$]})}return C})();var h=l(8071),I=l(1891),P=l(7648);let R=(()=>{class C{set featureNameId(d){this.featureNameId$.next(d)}set showIf(d){this.showIf$.next(1==d)}constructor(d,x,U,y){this.dialog=d,this.viewContainerRef=x,this.changeDetectorRef=U,this.featuresService=y,this.featureNameId$=new h.X(null),this.showIf$=new h.X(!1),this.feature$=this.featureNameId$.pipe((0,I.w)(D=>this.featuresService.get$(D))),this.show$=(0,b.a)([this.feature$,this.showIf$]).pipe((0,Z.U)(([D,z])=>z==(D?.IsEnabled??!1)))}openDialog(){C.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(d,x,U,y){d.open(_,{autoFocus:!1,data:x,viewContainerRef:U,width:"400px"}),y.markForCheck()}static#t=this.\u0275fac=function(x){return new(x||C)(a.Y36(m.uw),a.Y36(a.s_b),a.Y36(a.sBO),a.Y36(P.k))};static#e=this.\u0275dir=a.lG2({type:C,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return C})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.02/dist/ng-edit/projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30.adc8fcc9886f83a0.js.map