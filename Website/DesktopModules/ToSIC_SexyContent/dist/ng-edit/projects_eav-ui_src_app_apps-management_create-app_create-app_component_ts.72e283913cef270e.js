"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{2348:(M,u,o)=>{o.r(u),o.d(u,{CreateAppComponent:()=>N});var n=o(8849),h=o(8071),C=o(3839),_=o(9736);const v=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var A=o(6680),t=o(9039),g=o(6861),T=o(9409),Z=o(91),i=o(9851),p=o(895),l=o(9674),c=o(1268),m=o(6575);function d(a,f){1&a&&(t.TgZ(0,"app-field-hint",11),t._uU(1," Required "),t.qZA()),2&a&&t.Q6J("isError",!0)}function b(a,f){if(1&a&&(t.TgZ(0,"app-field-hint",11),t._uU(1),t.qZA()),2&a){const e=t.oxw(3);t.Q6J("isError",!0),t.xp6(1),t.hij(" ",e.appNameError," ")}}function E(a,f){if(1&a&&t.YNc(0,d,2,1,"app-field-hint",11)(1,b,2,2,"app-field-hint",11),2&a){const e=t.oxw(2);t.um2(0,null!=e.form.controls.name.errors&&e.form.controls.name.errors.required?0:-1),t.xp6(1),t.um2(1,null!=e.form.controls.name.errors&&e.form.controls.name.errors.pattern?1:-1)}}function F(a,f){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._uU(3,"Create App"),t.qZA()(),t.TgZ(4,"div",4),t._UZ(5,"router-outlet"),t.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"app-field-hint"),t._uU(12," App name will also be used for the folder "),t.qZA(),t.YNc(13,E,2,2),t.qZA()(),t.TgZ(14,"mat-dialog-actions",8)(15,"button",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.closeDialog())}),t._uU(16," Cancel "),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.create())}),t._uU(18," Create "),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(6),t.Q6J("formGroup",e.form),t.xp6(7),t.um2(13,e.form.controls.name.touched?13:-1),t.xp6(2),t.Q6J("disabled",f.loading),t.xp6(2),t.Q6J("disabled",f.loading||!e.form.valid)}}let N=(()=>{class a{constructor(e,r,s){this.dialogRef=e,this.appsListService=r,this.snackBar=s,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.form=this.buildForm(),this.loading$=new h.X(!1)}ngOnInit(){this.viewModel$=(0,C.a)([this.loading$]).pipe((0,_.U)(([e])=>({loading:e})))}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const e=this.form.controls.name.value?.trim().replace(/\s\s+/g," ");this.snackBar.open("Creating app..."),this.appsListService.create(e).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new n.nJ({name:new n.p4(null,[n.kI.required,n.kI.pattern(v)])})}static#t=this.\u0275fac=function(r){return new(r||a)(t.Y36(g.so),t.Y36(A.A),t.Y36(T.ux))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(r,s){2&r&&t.Ikx("className",s.hostClass)},decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["matInput","","type","text","formControlName","name"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError"]],template:function(r,s){if(1&r&&(t.YNc(0,F,19,4,"div",0),t.ALo(1,"async")),2&r){let O;t.um2(0,(O=t.lcZ(1,1,s.viewModel$))?0:-1,O)}},dependencies:[Z.lC,i.Y,g.H8,p.lW,n._Y,n.Fj,n.JJ,n.JL,l.Nt,c.KE,c.hX,n.sg,n.u,m.Ov]})}return a})()},9851:(M,u,o)=>{o.d(u,{Y:()=>Z});var n=o(9039),h=o(6575),C=o(1268);function _(i,p){1&i&&n.GkF(0)}function v(i,p){if(1&i&&(n.TgZ(0,"mat-hint"),n.YNc(1,_,1,0,"ng-container",2),n.qZA()),2&i){n.oxw();const l=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",l)}}function x(i,p){1&i&&n.GkF(0)}function A(i,p){if(1&i&&(n.TgZ(0,"mat-error"),n.YNc(1,x,1,0,"ng-container",2),n.qZA()),2&i){n.oxw();const l=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",l)}}function t(i,p){1&i&&n.Hsn(0)}const g=i=>({"hint-box__short":i}),T=["*"];let Z=(()=>{class i{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(c){return new(c||i)};static#n=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:T,decls:5,vars:4,consts:[[1,"hint-box",3,"ngClass","click"],["content",""],[4,"ngTemplateOutlet"]],template:function(c,m){if(1&c&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",function(){return m.toggleIsShort()}),n.YNc(1,v,2,1)(2,A,2,1),n.qZA(),n.YNc(3,t,1,0,"ng-template",null,1,n.W1O)),2&c){let d;n.Q6J("ngClass",n.VKq(2,g,m.isShort)),n.xp6(1),n.um2(1,!1===(d=m.isError)?1:!0===d?2:-1)}},dependencies:[h.mk,h.tP,C.bx,C.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.05/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.72e283913cef270e.js.map