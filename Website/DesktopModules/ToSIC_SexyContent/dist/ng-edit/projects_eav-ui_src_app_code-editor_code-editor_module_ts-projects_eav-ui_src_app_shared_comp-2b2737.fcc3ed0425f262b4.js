"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737"],{5530:(Z,P,a)=>{a.d(P,{_:()=>y,s:()=>v});var d=a(9736),w=a(2611),I=a(9039),b=a(4860),O=a(6232);const y="admin/type/";let v=(()=>{class r{constructor(h,x,m){this.http=h,this.context=x,this.dnnContext=m}apiUrl(h){return this.dnnContext.$2sxc.http.apiUrl(h)}retrieveContentType(h){return this.http.get(this.apiUrl(y+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:h}})}retrieveContentTypes(h){return this.http.get(this.apiUrl(y+"list"),{params:{appId:this.context.appId.toString(),scope:h}})}getScopes(){return this.http.get(this.apiUrl(y+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,d.U)(h=>Object.keys(h).map(m=>({name:h[m],value:m}))))}save(h){return this.http.post(this.apiUrl(y+"save"),h,{params:{appid:this.context.appId.toString()}})}delete(h){return this.http.delete(this.apiUrl(y+"delete"),{params:{appid:this.context.appId.toString(),staticName:h.StaticName}})}import(h){const x=new FormData;for(const m of h)x.append("File",m);return this.http.post(this.apiUrl(y+"import"),x,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(h){return this.http.post(this.apiUrl(y+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:h}})}static#t=this.\u0275fac=function(x){return new(x||r)(I.LFG(b.eN),I.LFG(w._),I.LFG(O._y))};static#e=this.\u0275prov=I.Yz7({token:r,factory:r.\u0275fac})}return r})()},9681:(Z,P,a)=>{a.r(P),a.d(P,{CodeEditorModule:()=>se,translateLoaderFactoryCode:()=>nt});var d=a(6575),w=a(895),I=a(257),b=a(6861),O=a(6515),y=a(3910),v=a(9409),r=a(1916),c=a(7220),h=a(2380),x=a(2611),m=a(7138),u=a(8206),C=a(3739),f=a(91),M=a(8071),k=a(3839),L=a(4300),$=a(5584),R=a(1891),J=a(4980),H=a(9736),G=a(9016),E=a(926),ot=a(9097),W=a(6115),t=a(9039);function it(i,g){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA(),t._UZ(2,"br")),2&i){const e=t.oxw();t.xp6(1),t.AsE('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function st(i,g){if(1&i&&t._uU(0),2&i){const e=t.oxw(2);t.hij(' You are editing "',e.snackBarData.edition,'" edition. ')}}function at(i,g){1&i&&t._uU(0," You may be editing an edition which is not the one you see. ")}function rt(i,g){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,st,1,1),t._uU(2),t.YNc(3,at,1,0),t._uU(4," See "),t.TgZ(5,"a",3),t._uU(6,"docs"),t.qZA(),t._uU(7,". "),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.um2(1,e.snackBarData.edition?1:-1),t.xp6(1),t.AsE(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.xp6(1),t.um2(3,e.snackBarData.edition?-1:3)}}function lt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openCodeBehind())}),t._uU(1," Open code-behind file "),t.qZA()}}let ct=(()=>{class i{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(v.OX),t.Y36(v.qD))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,it,3,2)(2,rt,8,4,"div"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,lt,2,0,"button",2),t.qZA()),2&n&&(t.xp6(1),t.um2(1,o.snackBarData.codeFile?1:-1),t.xp6(1),t.um2(2,o.snackBarData.otherEditions?2:-1),t.xp6(2),t.um2(4,o.snackBarData.codeFile?4:-1))},dependencies:[w.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}return i})();const Y={Templates:"Templates",Snippets:"Snippets"};var pt=a(3704),dt=a(6191),ut=a(5807),_t=a(4860),ht=a(6232);let z=(()=>{class i{constructor(e,n,o){this.http=e,this.dnnContext=n,this.translate=o}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,H.U)(n=>{const o=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(o),l=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:l}}))}filterAwayNotNeededSnippetsList(e,n){const o=["@","["],s=_=>_.Type.indexOf("Razor")>-1?0:1,l=[];for(const _ of e){const p=o.indexOf(_.set[0]);(-1===p||p===s(n))&&(p===s(n)&&(_.set=_.set.substring(1)),l.push(_))}return l}extractInputTypeSnippets(e){const n=[],o=[];for(const _ of e)"\\"===_.set[0]?(_.set=_.set.substring(1),o.push(_)):n.push(_);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(o)}}catalogInputTypeSnippets(e){const n={};for(const o of e)void 0===n[o.subset]&&(n[o.subset]=[]),n[o.subset].push(o);return n}initSnippetsWithConfig(e,n,o){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,o),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,o),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,o),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,o)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,o),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,o)),s}makeTree(e){const n={};for(const o of e){void 0===n[o.set]&&(n[o.set]={}),void 0===n[o.set][o.subset]&&(n[o.set][o.subset]=[]);const s={key:o.name,label:this.label(o.set,o.subset,o.name),snip:o.content,help:o.help||this.help(o.set,o.subset,o.name),links:this.linksList(o.links)};n[o.set][o.subset].push(s)}return n}label(e,n,o){const s=this.getHelpKey(e,n,o,".Key");let l=this.translate.instant(s);return l===s&&(l=o),l}getHelpKey(e,n,o,s){return"SourceEditorSnippets."+e+"."+n+"."+o+s}help(e,n,o){const s=this.getHelpKey(e,n,o,".Help");let l=this.translate.instant(s);return l===s&&(l=""),l}linksList(e){if(!e)return null;const n=[],o=e.split("\n");for(const s of o){const l=s.split(":");if(3===l.length){const _={name:l[0].trim(),url:l[1].trim()+":"+l[2].trim()};n.push(_)}}return 0===n.length?null:n}loadContentType(e,n,o,s,l){this.getFields(s.AppId,n).subscribe(_=>{for(const p of _){const T=p.StaticName;e[T]={key:T,label:T,snip:this.valuePlaceholder(o,T,s),help:p.Metadata.merged.Notes||" ("+p.Type.toLowerCase()+") "};const S=(0,pt.Z)(e[T]);this.attachSnippets(e,o,T,p.InputType,S,l)}if(_.length){const p=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let T=0;T<p.length;T++)e[p[T]]={key:p[T],label:p[T],snip:this.valuePlaceholder(o,p[T],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+p[T]+".Help")}}})}valuePlaceholder(e,n,o){return o.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(ut.jt),{params:{appid:e.toString(),staticName:n}}).pipe((0,H.U)(o=>{o=o.filter(s=>s.Type!==dt.Q.Empty);for(const s of o){if(!s.Metadata)continue;const l=s.Metadata;l.merged={...l.All,...l[s.Type],...l[s.InputType]}}return o}))}attachSnippets(e,n,o,s,l,_){let p=_[s];if(s.indexOf("-")){const S=s.substring(0,s.indexOf("-"));if(S){const F=_[S];F&&(p=p?p.concat(F):F)}}if(!p)return;void 0===e[o].more&&(e[o].more={});const T=e[o].more;for(let S=0;S<p.length;S++)try{T[o+"-"+p[S].name]=Object.assign({},l,{key:o+" - "+p[S].name,label:p[S].name,snip:this.localizeGenericSnippet(p[S].content,n,o),collapse:!0})}finally{}}localizeGenericSnippet(e,n,o){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+o+"$2")}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(_t.eN),t.LFG(ht._y),t.LFG(r.sK))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac})}return i})();var X=a(1485),Q=a(6480),V=a(131),gt=a(40),K=a(9498),ft=a(9424),Ct=a(6537);let xt=(()=>{class i{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275pipe=t.Yjl({name:"objectToArray",type:i,pure:!0})}return i})();function vt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"mat-icon",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(5);return t.KtG(s.toggleMore(o.key))}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.hij(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function Tt(i,g){if(1&i&&(t.TgZ(0,"div")(1,"a",12),t._uU(2),t.qZA()()),2&i){const e=g.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function yt(i,g){if(1&i&&(t.TgZ(0,"div",10),t._UZ(1,"div",11),t.ALo(2,"safeHtml"),t.SjG(3,Tt,3,2,"div",null,t.x6l),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,e.help),t.oJD),t.xp6(2),t.wJu(e.links)}}function St(i,g){if(1&i&&(t.TgZ(0,"div")(1,"a",12),t._uU(2),t.qZA()()),2&i){const e=g.$implicit;t.xp6(1),t.Q6J("href",e.url,t.LSH),t.xp6(1),t.Oqu(e.name)}}function wt(i,g){if(1&i&&(t.TgZ(0,"div",15),t._UZ(1,"div",11),t.ALo(2,"safeHtml"),t.SjG(3,St,3,2,"div",null,t.x6l),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,e.help),t.oJD),t.xp6(2),t.wJu(e.links)}}function bt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",4)(2,"div",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(7);return t.KtG(l.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(7);return t.KtG(l.toggleInfo(s.key))}),t._uU(5,"info"),t.qZA()(),t.YNc(6,wt,5,3,"div",14),t.qZA()}if(2&i){const e=g.$implicit,n=t.oxw(7);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(3),t.um2(6,n.toggledInfos.includes(e.key)?6:-1)}}function Mt(i,g){if(1&i&&(t.SjG(0,bt,7,3,"div",null,t.x6l),t.ALo(2,"objectToArray")),2&i){const e=t.oxw().$implicit;t.wJu(t.lcZ(2,0,e.more))}}function It(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(5);return t.KtG(l.addSnippet(s.snip))}),t._uU(3),t.qZA(),t.YNc(4,vt,2,1,"mat-icon",6),t.TgZ(5,"mat-icon",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(5);return t.KtG(l.toggleInfo(s.key))}),t._uU(6,"info"),t.qZA()(),t.YNc(7,yt,5,3,"div",8)(8,Mt,3,2),t.qZA()}if(2&i){const e=g.$implicit,n=t.oxw(5);t.xp6(2),t.Q6J("tippy",e.snip),t.xp6(1),t.hij(" ",e.label," "),t.xp6(1),t.um2(4,e.more?4:-1),t.xp6(3),t.um2(7,n.toggledInfos.includes(e.key)?7:-1),t.xp6(1),t.um2(8,n.toggledMores.includes(e.key)?8:-1)}}function Ot(i,g){if(1&i&&(t.SjG(0,It,9,5,"div",16,t.x6l),t.ALo(2,"objectToArray")),2&i){const e=t.oxw().$implicit;t.wJu(t.lcZ(2,0,e.value))}}function Ft(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",2),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.toggleFolder(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Ot,3,2),t.qZA()}if(2&i){const e=g.$implicit,n=t.oxw(2).$implicit,o=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.xp6(3),t.hij(" ",o.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.xp6(2),t.um2(8,o.toggledFolders.includes(e.key)?8:-1)}}function Pt(i,g){if(1&i&&(t.SjG(0,Ft,9,8,"div",null,t.x6l),t.ALo(2,"keyvalue")),2&i){const e=t.oxw().$implicit;t.wJu(t.lcZ(2,0,e.value))}}function Et(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",1),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.toggleSection(s.key))}),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.YNc(8,Pt,3,2),t.qZA()}if(2&i){const e=g.$implicit,n=t.oxw();t.xp6(1),t.Q6J("tippy",t.lcZ(2,4,"SourceEditorSnippets."+e.key+".Help")),t.xp6(3),t.hij(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(t.lcZ(7,6,"SourceEditorSnippets."+e.key+".Title")),t.xp6(2),t.um2(8,n.toggledSections.includes(e.key)?8:-1)}}let At=(()=>{class i{constructor(){this.insertSnippet=new t.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){E.iX.toggleInArray(e,this.toggledSections)}toggleFolder(e){E.iX.toggleInArray(e,this.toggledFolders)}toggleInfo(e){E.iX.toggleInArray(e,this.toggledInfos)}toggleMore(e){E.iX.toggleInArray(e,this.toggledMores)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more"],[1,"snippet-help","snippet-help-more"],["class","snippet"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.SjG(1,Et,9,8,"div",null,t.x6l),t.ALo(3,"keyvalue"),t.qZA()),2&n&&(t.xp6(1),t.wJu(t.lcZ(3,0,o.snippets)))},dependencies:[V.E,K.$,O.Hw,I.wG,Ct.z,d.Nd,r.X$,xt],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}return i})();function q(i){if(!i)return[];const g=[];for(const e of i){let n=g;const o=e.Path.split("/"),s=o[o.length-1];let l="";for(let _=0;_<o.length;_++){const p=o[_];l+=_?`/${p}`:p;const T=n.find(S=>S.name===p);if(T)n=T.children;else{const S={depth:_,name:p,pathFromRoot:l,isShared:e.Shared,isFolder:p!==s,...p!==s&&{children:[]}};n.push(S),n=S.children}}}return g}var U=a(8128);let Dt=(()=>{class i{constructor(e){this.sanitizer=e}transform(e,n){let o;return o=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${o}px;`)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(Q.H7,16))};static#e=this.\u0275pipe=t.Yjl({name:"depthPadding",type:i,pure:!0})}return i})(),Zt=(()=>{class i{transform(e){return null==e||e.sort((n,o)=>n.isFolder<o.isFolder?1:n.isFolder>o.isFolder?-1:0),e}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275pipe=t.Yjl({name:"sortItems",type:i,pure:!0})}return i})();function Lt(i,g){1&i&&t.GkF(0)}const tt=i=>({item:i});function $t(i,g){if(1&i&&t.YNc(0,Lt,1,0,"ng-container",6),2&i){const e=g.$implicit;t.oxw();const n=t.MAs(6);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}const jt=i=>({active:i});function Ut(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().item,s=t.oxw();return t.KtG(s.openTemplate(o.pathFromRoot,o.isShared))}),t.ALo(1,"depthPadding"),t._uU(2),t.qZA()}if(2&i){const e=t.oxw().item,n=t.oxw();t.Akn(t.xi3(1,5,e.depth,e.isFolder)),t.Q6J("ngClass",t.VKq(8,jt,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.xp6(2),t.hij(" ",e.name," ")}}function Nt(i,g){1&i&&t.GkF(0)}function Rt(i,g){if(1&i&&t.YNc(0,Nt,1,0,"ng-container",6),2&i){const e=g.$implicit;t.oxw(4);const n=t.MAs(6);t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,tt,e))}}function Jt(i,g){if(1&i&&(t.SjG(0,Rt,1,4,"ng-container",null,t.x6l),t.ALo(2,"sortItems")),2&i){const e=t.oxw(2).item;t.wJu(t.lcZ(2,0,e.children))}}const Ht=i=>({"app-shared-root":i});function Vt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().item,s=t.oxw();return t.KtG(s.toggleItem(o.pathFromRoot,o.isShared))}),t.ALo(2,"depthPadding"),t.TgZ(3,"div",10)(4,"mat-icon"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.TgZ(8,"div",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().item,s=t.oxw();return t.KtG(s.addFile(o.pathFromRoot,o.isShared))}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()()(),t.YNc(11,Jt,3,2),t.qZA()}if(2&i){const e=t.oxw().item,n=t.oxw();t.xp6(1),t.Akn(t.xi3(2,7,e.depth+1,e.isFolder)),t.Q6J("ngClass",t.VKq(10,Ht,e.depth<0)),t.xp6(2),t.Q6J("tippy",e.name),t.xp6(2),t.hij(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.xp6(2),t.Oqu(e.name),t.xp6(4),t.um2(11,n.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function Kt(i,g){if(1&i&&t.YNc(0,Ut,3,10,"div",7)(1,Vt,12,12,"div"),2&i){const e=g.item;t.um2(0,e.isFolder?-1:0),t.xp6(1),t.um2(1,e.isFolder?1:-1)}}let Bt=(()=>{class i{constructor(){this.openView=new t.vpe,this.createTemplate=new t.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function kt(i){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:q(i.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:q(i.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){E.iX.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const o=n?this.toggledItemsShared:this.toggledItemsApp;if(o.includes(e))return;const s=["",...e.split("/")];let l="";for(const _ of s)l=l?`${l}/${_}`:_,!o.includes(l)&&this.toggleItem(l,n)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[t.TTD],decls:19,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div"),t.SjG(2,$t,1,4,"ng-container",null,t.x6l),t.ALo(4,"sortItems"),t.YNc(5,Kt,2,2,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(7,"div",2)(8,"button",3)(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"mat-menu",null,4)(13,"button",5),t.NdJ("click",function(){return o.addFile("",!1)}),t.TgZ(14,"span"),t._uU(15,"App"),t.qZA()(),t.TgZ(16,"button",5),t.NdJ("click",function(){return o.addFile("",!0)}),t.TgZ(17,"span"),t._uU(18,"Shared (global)"),t.qZA()()()()()),2&n){const s=t.MAs(12);t.xp6(2),t.wJu(t.lcZ(4,1,o.tree)),t.xp6(6),t.Q6J("matMenuTriggerFor",s)}},dependencies:[V.E,K.$,d.mk,d.tP,w.RK,O.Hw,U.VK,U.OP,U.p6,Dt,Zt],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}return i})();function Gt(i,g){1&i&&(t.TgZ(0,"mat-icon",20),t._uU(1,"share"),t.qZA())}function Wt(i,g){1&i&&(t.TgZ(0,"mat-icon",21),t._uU(1,"circle"),t.qZA())}function Yt(i,g){1&i&&t._UZ(0,"mat-spinner",22)}const zt=(i,g,e)=>({active:i,modified:g,loading:e});function Xt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.openView(s.viewKey))}),t.TgZ(1,"div",13),t.YNc(2,Gt,2,0,"mat-icon",14),t.TgZ(3,"span",15),t._uU(4),t.qZA()(),t.TgZ(5,"div",16),t.YNc(6,Wt,2,0,"mat-icon",17)(7,Yt,1,0,"mat-spinner",18),t.TgZ(8,"mat-icon",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.closeEditor(s.viewKey))}),t._uU(9,"close"),t.qZA()()()}if(2&i){const e=g.$implicit;t.Q6J("ngClass",t.kEZ(6,zt,e.isActive,e.isModified,e.isLoading)),t.xp6(1),t.Q6J("tippy",e.label),t.xp6(1),t.um2(2,e.viewKey.shared?2:-1),t.xp6(2),t.Oqu(e.label),t.xp6(2),t.um2(6,e.isModified?6:-1),t.xp6(1),t.um2(7,e.isLoading?7:-1)}}function Qt(i,g){if(1&i&&(t.TgZ(0,"div",11),t.SjG(1,Xt,10,10,"div",23,t.x6l),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.wJu(e.tabs)}}function qt(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"app-monaco-editor",24),t.NdJ("valueChanged",function(o){t.CHM(e);const s=t.oxw(),l=t.oxw();return t.KtG(l.codeChanged(o,s.viewKey))}),t.qZA()}if(2&i){const e=t.oxw(),n=t.oxw();t.Q6J("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("tooltips",e.tooltips)("autoFocus",!0)}}function te(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.save())}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}const ee=i=>({"sxc-dark":i}),et=i=>({active:i});function ne(i,g){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleExplorer(o.Explorers.Templates))}),t.TgZ(3,"mat-icon"),t._uU(4,"file_copy"),t.qZA()(),t.TgZ(5,"div",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleExplorer(o.Explorers.Snippets))}),t.TgZ(6,"mat-icon"),t._uU(7,"code"),t.qZA()()(),t.TgZ(8,"app-code-templates",5),t.NdJ("openView",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.openView(o))})("createTemplate",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.createTemplate(o))}),t.qZA(),t.TgZ(9,"app-code-snippets",6),t.NdJ("insertSnippet",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.insertSnippet(o))}),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,Qt,3,0,"div",8)(12,qt,1,6,"app-monaco-editor",9),t.qZA(),t.YNc(13,te,3,0,"button",10),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("ngClass",t.VKq(11,ee,"2sxc-dark"===e.monacoOptions.theme)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,et,e.activeExplorer===e.Explorers.Templates)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,et,e.activeExplorer===e.Explorers.Snippets)),t.xp6(3),t.Q6J("hidden",e.activeExplorer!==e.Explorers.Templates)("view",g.view)("templates",g.templates),t.xp6(1),t.Q6J("hidden",e.activeExplorer!==e.Explorers.Snippets)("snippets",g.explorerSnipps),t.xp6(2),t.um2(11,g.tabs.length>0?11:-1),t.xp6(1),t.um2(12,g.view?12:-1),t.xp6(1),t.um2(13,g.activeView?13:-1)}}const oe=[{path:"",component:(()=>{class i extends ot.f{constructor(e,n,o,s,l,_,p,T,S){super(),this.context=e,this.route=n,this.snackBar=o,this.sourceService=s,this.snippetsService=l,this.zone=_,this.titleService=p,this.dialog=T,this.viewContainerRef=S,this.Explorers=Y,this.activeExplorer=Y.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.context.init(this.route);const F=JSON.parse(sessionStorage.getItem(W.kF)),D="true"===sessionStorage.getItem(W.PH);F.forEach(A=>{A.Path.startsWith("/")&&(A.Path=A.Path.substring(1)),A.IsShared??=D}),this.urlItems=F}ngOnInit(){this.templates$=new M.X([]);const e=this.urlItems.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.activeView$=new M.X(e[0]),this.openViews$=new M.X(e),this.viewInfos$=new M.X([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscription.add((0,k.a)([this.templates$,this.openViews$]).subscribe(([n,o])=>{if(0===n.length)return;let s=this.viewInfos$.value;const l=o.filter(_=>!s.some(p=>E.iX.objectsEqual(p.viewKey,_)));0!==l.length&&((0,L.D)(l.map(_=>{const p={viewKey:_};s=[...s,p];const T=this.sourceService.get(_.key,_.shared,this.urlItems).pipe((0,$.B)()),S=T.pipe((0,R.w)(D=>this.snippetsService.getSnippets(D))),F=T.pipe((0,R.w)(D=>this.snippetsService.getTooltips(D.Extension.substring(1))));return(0,L.D)([(0,J.of)(_),T,S,F])})).subscribe(_=>{let p=this.viewInfos$.value;_.forEach(([T,S,F,D])=>{const A=p.findIndex(j=>E.iX.objectsEqual(j.viewKey,T));if(A<0)return;const N={viewKey:T,view:S,explorerSnipps:F.sets,editorSnipps:F.list,tooltips:D,savedCode:S.Code};p=[...p.slice(0,A),N,...p.slice(A+1)],this.showCodeAndEditionWarnings(T,S,n)}),this.viewInfos$.next(p)}),this.viewInfos$.next(s))})),this.subscription.add((0,k.a)([this.activeView$,this.viewInfos$]).subscribe(([n,o])=>{const s=o.find(T=>E.iX.objectsEqual(T.viewKey,n)),l="Code Editor",_=null==s?l:`${s.view?.FileName} - ${l}`;_!==this.titleService.getTitle()&&this.titleService.setTitle(_)})),this.viewModel$=(0,k.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,H.U)(([n,o,s,l])=>{const _=s.map(S=>{const F=l.find(A=>E.iX.objectsEqual(A.viewKey,S));return{viewKey:S,label:F?.view?.FileName??S.key,isActive:E.iX.objectsEqual(S,o),isModified:F?.view?.Code!==F?.savedCode,isLoading:null==F?.view}}),p=l.find(S=>E.iX.objectsEqual(S.viewKey,o));return{activeView:o,tabs:_,viewKey:p?.viewKey,view:p?.view,templates:n,explorerSnipps:p?.explorerSnipps,editorSnipps:p?.editorSnipps,tooltips:p?.tooltips}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(c.UH,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.sourceService.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(l=>{this.templates$.next(l)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let o=this.viewInfos$.value;const s=o.findIndex(p=>E.iX.objectsEqual(p.viewKey,n)),l=o[s],_={...l,view:{...l.view,Code:e}};o=[...o.slice(0,s),_,...o.slice(s+1)],this.viewInfos$.next(o)}openView(e){e=this.viewInfos$.value.find(s=>!E.iX.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e,E.iX.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const o=this.openViews$.value;if(!o.some(s=>E.iX.objectsEqual(s,e))){const s=[...o,e];this.openViews$.next(s)}}closeEditor(e){const n=this.openViews$.value,o=n.filter(l=>!E.iX.objectsEqual(l,e)),s=this.activeView$.value;if(E.iX.objectsEqual(s,e)){const l=n[n.findIndex(_=>E.iX.objectsEqual(_,s))-1]??o[0];this.activeView$.next(l)}this.openViews$.next(o)}save(e){e??=this.activeView$.value;const n=this.viewInfos$.value.find(s=>E.iX.objectsEqual(s.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const o=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let l=[...this.viewInfos$.value];const _=l.findIndex(S=>E.iX.objectsEqual(S.viewKey,e));if(_<0)return;const T={...l[_],savedCode:o};l=[...l.slice(0,_),T,...l.slice(_+1)],this.viewInfos$.next(l),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,o){const s=n.FileName,l=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,_=0===l?"":s.substring(0,l),p=s.substring(l),S=p.substring(0,p.length-n.Extension.length)+".code"+n.Extension,F=o.find(A=>A.Path===_+S&&A.Shared===n.IsShared),D=o.filter(A=>A.Path.endsWith(p)&&A.Shared===n.IsShared).length-1;if(F||D){const A={fileName:p,codeFile:F?.Path,edition:this.urlItems.find(j=>j.EntityId?.toString()===e.key&&j.IsShared===n.IsShared&&j.Path===n.FileName)?.Edition,otherEditions:D,openCodeBehind:!1},N=this.snackBar.openFromComponent(ct,{data:A,duration:1e4});N.onAction().subscribe(()=>{N.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:F?.Path,shared:F?.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscription.add((0,G.R)(window,"beforeunload").subscribe(e=>{this.viewInfos$.value.some(o=>null!=o.view&&o.view.Code!==o.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscription.add((0,G.R)(window,"keydown").subscribe(e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x._),t.Y36(f.gz),t.Y36(v.ux),t.Y36(X.t),t.Y36(z),t.Y36(t.R0b),t.Y36(Q.Dx),t.Y36(b.uw),t.Y36(t.s_b))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-code-editor"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.T,5),2&n){let s;t.iGM(s=t.CRH())&&(o.monacoEditorRef=s.first)}},features:[t.qOj],decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S"],[1,"tabs-container","fancy-scrollbar-dark"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","fontSet","material-icons"],["class","spinner","mode","indeterminate","diameter","14","color","white"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["class","tab",3,"ngClass"],[3,"filename","value","options","snippets","tooltips","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,o){if(1&n&&(t.YNc(0,ne,14,17,"div",0),t.ALo(1,"async")),2&n){let s;t.um2(0,(s=t.lcZ(1,1,o.viewModel$))?0:-1,s)}},dependencies:[V.E,gt.D,K.$,d.mk,w.cs,O.Hw,ft.T,y.Ou,At,Bt,d.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}return i})()}];let ie=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(oe),f.Bz]})}return i})();function nt(i){return new u.M(i,"./i18n/code-editor.",`.js?${window.sxcVersion}`)}let se=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({providers:[x._,X.t,z,r.sK],imports:[ie,m.q,d.ez,b.Is,w.ot,O.Ps,v.ZX,I.si,U.Tx,r.aw.forChild((0,C.f)(nt)),h.n,y.Cq,c.qH]})}return i})()},5807:(Z,P,a)=>{a.d(P,{Mr:()=>h,jt:()=>r});var d=a(9736),w=a(5530),I=a(2611),b=a(9039),O=a(4860),y=a(6232);const v="admin/field/",r="admin/field/all",c="admin/field/GetSharedFields";let h=(()=>{class x{constructor(u,C,f){this.http=u,this.context=C,this.dnnContext=f}apiUrl(u){return this.dnnContext.$2sxc.http.apiUrl(u)}typeListRetrieve(){return this.http.get(this.apiUrl(v+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(v+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,d.U)(u=>u.map(f=>({dataType:f.Type.substring(0,f.Type.indexOf("-")),inputType:f.Type,label:f.Label,description:f.Description,isDefault:f.IsDefault,isObsolete:f.IsObsolete,isRecommended:f.IsRecommended,obsoleteMessage:f.ObsoleteMessage,icon:f.IsDefault?"star":f.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(v+"ReservedNames"))}getFields(u){return this.http.get(this.apiUrl(r),{params:{appid:this.context.appId.toString(),staticName:u}}).pipe((0,d.U)(C=>{if(C)for(const f of C){if(!f.Metadata)continue;const M=f.Metadata;M.merged={...M.All,...M[f.Type],...M[f.InputType]}}return C}))}getShareableFields(){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(u){return this.http.get(this.apiUrl(c),{params:{appid:this.context.appId.toString(),attributeId:u.toString()}})}addInheritedField(u,C,f,M){return this.http.post(this.apiUrl(v+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:u.toString(),SourceType:C,SourceField:f,name:M}})}share(u,C=!0){return this.http.post(this.apiUrl(v+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),share:C}})}inherit(u,C){return this.http.post(this.apiUrl(v+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:u.toString(),inheritMetadataOf:C}})}reOrder(u,C){return this.http.post(this.apiUrl(v+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),order:JSON.stringify(u)}})}setTitle(u,C){return this.http.post(this.apiUrl(w._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),attributeId:u.Id.toString()}})}rename(u,C,f){return this.http.post(this.apiUrl(v+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:C.toString(),attributeId:u.toString(),newName:f}})}delete(u,C){if(u.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(v+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:C.Id.toString(),attributeId:u.Id.toString()}})}add(u,C){return this.http.post(this.apiUrl(v+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:C.toString(),Id:u.Id.toString(),Type:u.Type,InputType:u.InputType,StaticName:u.StaticName,IsTitle:u.IsTitle.toString(),Index:u.SortOrder.toString()}})}updateInputType(u,C,f){return this.http.post(this.apiUrl(v+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:u.toString(),field:C,inputType:f}})}static#t=this.\u0275fac=function(C){return new(C||x)(b.LFG(O.eN),b.LFG(I._),b.LFG(y._y))};static#e=this.\u0275prov=b.Yz7({token:x,factory:x.\u0275fac})}return x})()},2380:(Z,P,a)=>{a.d(P,{T:()=>d.T,n:()=>b});var d=a(9424),w=a(6575),I=a(9039);let b=(()=>{class O{static#t=this.\u0275fac=function(r){return new(r||O)};static#e=this.\u0275mod=I.oAB({type:O});static#n=this.\u0275inj=I.cJS({imports:[w.ez]})}return O})()},9424:(Z,P,a)=>{a.d(P,{T:()=>y});var d=a(9039);const I="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(v=>v.trim().toLocaleLowerCase());class b{constructor(r,c,h,x,m,u,C){this.monaco=r,this.filename=c,this.snippets=u,this.tooltips=C,this.globalCache=this.createGlobalCache(r),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=h,this.editorInstance=this.createInstance(this.monaco,c,h,x,m),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(x,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(r=>r.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(r){this.cachedValue!==r&&(this.cachedValue=r,this.editorInstance.getModel().setValue(r))}focus(){this.editorInstance.focus()}onValueChange(r){this.valueChangedCallback=r}onFocus(r){this.focusedCallback=r}onBlur(r){this.blurredCallback=r}insertSnippet(r){this.editorInstance.getContribution("snippetController2").insert(r)}setSnippets(r){this.snippets=r}setTooltips(r){this.tooltips=r}setJsonSchema(r){const c=this.editorInstance.getModel().uri.toString(),h=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,x=h.schemas?.some(C=>C.fileMatch[0]===c)??!1,m="link"===r?.type?{uri:r.value,fileMatch:[c]}:"raw"===r?.type?{uri:c,fileMatch:[c],schema:JSON.parse(r.value)}:void 0;if(!x&&!m)return;const u={...h,enableSchemaRequest:!0,schemas:x&&!m?h.schemas.filter(C=>C.fileMatch[0]!==c):x?h.schemas.map(C=>C.fileMatch[0]===c?m:C):[...h.schemas??[],m]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(u)}setJsonComments(r){if(!r)return;const c={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:r};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(c)}setJsDiagnostics(r){if(!r)return;const c={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...r};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(c)}setJsTypings(r){r?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(r,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(r){return null==r._2sxc&&(r._2sxc={themesAreDefined:!1,savedStates:{}}),r._2sxc}defineThemes(r,c){r.themesAreDefined||(r.themesAreDefined=!0,c.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(r,c,h,x,m){const u=r.editor.create(x,m),C=r.Uri.file(c),f=r.editor.createModel(h,void 0,C);return u.setModel(f),u}saveState(r,c){const h=c.getModel().uri.toString(),x=JSON.stringify(c.saveViewState());null==r.savedStates[h]?r.savedStates[h]={viewState:x}:r.savedStates[h].viewState=x}restoreState(r,c){const h=c.getModel().uri.toString(),x=r.savedStates[h];if(null==x)return;const m=JSON.parse(x.viewState);c.restoreViewState(m)}addSnippets(r,c){return[r.languages.registerCompletionItemProvider(c.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(x,m)=>{if(c.getModel()!==x)return{suggestions:[]};const u=x.getValueInRange({startLineNumber:m.lineNumber,startColumn:1,endLineNumber:m.lineNumber,endColumn:m.column});if(">"!==u[u.length-1])return{suggestions:[]};const f=u.lastIndexOf("<");if(-1===f)return{suggestions:[]};const M=u.substring(f);let k=0;if(Array.from(M).forEach(J=>{'"'===J&&k++}),k%2!=0)return{suggestions:[]};if(M.startsWith("</"))return{suggestions:[]};if(M.indexOf(">")!==M.length-1)return{suggestions:[]};let L=M.indexOf(" ");if(-1===L&&(L=M.indexOf(">")),-1===L)return{suggestions:[]};const $=M.substring(1,L);return $?I.includes($.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test($)?{suggestions:[{label:`</${$}>`,kind:r.languages.CompletionItemKind.Snippet,insertText:`$0</${$}>`,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:m.lineNumber,endLineNumber:m.lineNumber,startColumn:m.column,endColumn:m.column}}]}:{suggestions:[]}:{suggestions:[]}}}),r.languages.registerCompletionItemProvider(c.getModel().getLanguageId(),{provideCompletionItems:(x,m)=>{if(null==this.snippets||c.getModel()!==x)return{suggestions:[]};const u=x.getWordUntilPosition(m);return{suggestions:this.snippets.map(f=>f.content?{label:f.name,kind:r.languages.CompletionItemKind.Snippet,documentation:`${f.title??""}\n${f.help??""}\n${f.links??""}`,insertText:f.content,insertTextRules:r.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:m.lineNumber,endLineNumber:m.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn}}:void 0).filter(f=>!!f)}}}),r.languages.registerHoverProvider(c.getModel().getLanguageId(),{provideHover:(x,m)=>{if(null==this.tooltips||c.getModel()!==x)return;const u=x.getWordAtPosition(m);if(!u)return;const C=this.tooltips.find(f=>f.Term===u.word);return C?{contents:C.Help.map(f=>({value:f})),range:{startLineNumber:m.lineNumber,endLineNumber:m.lineNumber,startColumn:u.startColumn,endColumn:u.endColumn}}:void 0}})]}createResizeObserver(r,c){const h=new ResizeObserver(()=>{c.layout()});return h.observe(r),h}addEvents(r){r.getModel().onDidChangeContent(()=>{const c=r.getModel().getValue();c!==this.cachedValue&&(this.cachedValue=c,this.valueChangedCallback?.(c))}),r.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),r.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const O=["editor"];let y=(()=>{class v{constructor(){this.autoFocus=!1,this.valueChanged=new d.vpe,this.focused=new d.vpe,this.blurred=new d.vpe}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs"]}}),window.require(["vs/editor/editor.main"],c=>{this.monaco=c,this.createEditor(this.autoFocus)})}ngOnChanges(c){null!=c.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=c.value&&this.monacoInstance?.updateValue(this.value),null!=c.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema),null!=c.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments),null!=c.snippets&&this.monacoInstance?.setSnippets(this.snippets),null!=c.tooltips&&this.monacoInstance?.setTooltips(this.tooltips),null!=c.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings),null!=c.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics)}insertSnippet(c){this.monacoInstance?.insertSnippet(c),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(c){this.monacoInstance=new b(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets,this.tooltips),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.setJsTypings(this.jsTypings),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics),this.monacoInstance.onValueChange(h=>{this.valueChanged.emit(h)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),c&&this.monacoInstance.focus()}static#t=this.\u0275fac=function(h){return new(h||v)};static#e=this.\u0275cmp=d.Xpm({type:v,selectors:[["app-monaco-editor"]],viewQuery:function(h,x){if(1&h&&d.Gf(O,5),2&h){let m;d.iGM(m=d.CRH())&&(x.editorRef=m.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",tooltips:"tooltips",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",jsTypings:"jsTypings",jsDiagnostics:"jsDiagnostics",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},features:[d.TTD],decls:2,vars:0,consts:[[1,"editor"],["editor",""]],template:function(h,x){1&h&&d._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]})}return v})()},9851:(Z,P,a)=>{a.d(P,{Y:()=>x});var d=a(9039),w=a(6575),I=a(1268);function b(m,u){1&m&&d.GkF(0)}function O(m,u){if(1&m&&(d.TgZ(0,"mat-hint"),d.YNc(1,b,1,0,"ng-container",2),d.qZA()),2&m){d.oxw();const C=d.MAs(4);d.xp6(1),d.Q6J("ngTemplateOutlet",C)}}function y(m,u){1&m&&d.GkF(0)}function v(m,u){if(1&m&&(d.TgZ(0,"mat-error"),d.YNc(1,y,1,0,"ng-container",2),d.qZA()),2&m){d.oxw();const C=d.MAs(4);d.xp6(1),d.Q6J("ngTemplateOutlet",C)}}function r(m,u){1&m&&d.Hsn(0)}const c=m=>({"hint-box__short":m}),h=["*"];let x=(()=>{class m{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(f){return new(f||m)};static#e=this.\u0275cmp=d.Xpm({type:m,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:h,decls:5,vars:4,consts:[[1,"hint-box",3,"ngClass","click"],["content",""],[4,"ngTemplateOutlet"]],template:function(f,M){if(1&f&&(d.F$t(),d.TgZ(0,"div",0),d.NdJ("click",function(){return M.toggleIsShort()}),d.YNc(1,O,2,1)(2,v,2,1),d.qZA(),d.YNc(3,r,1,0,"ng-template",null,1,d.W1O)),2&f){let k;d.Q6J("ngClass",d.VKq(2,c,M.isShort)),d.xp6(1),d.um2(1,!1===(k=M.isError)?1:!0===k?2:-1)}},dependencies:[w.mk,w.tP,I.bx,I.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return m})()},40:(Z,P,a)=>{a.d(P,{D:()=>I});var d=a(3488),w=a(9039);let I=(()=>{class b{constructor(y){this.globalConfigService=y}onClick(y){(navigator.platform.match("Mac")?y.metaKey:y.ctrlKey)&&y.shiftKey&&y.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(v){return new(v||b)(w.Y36(d.bE))};static#e=this.\u0275dir=w.lG2({type:b,selectors:[["","appToggleDebug",""]],hostBindings:function(v,r){1&v&&w.NdJ("click",function(h){return r.onClick(h)})}})}return b})()},6537:(Z,P,a)=>{a.d(P,{z:()=>I});var d=a(9039),w=a(6480);let I=(()=>{class b{constructor(y){this.sanitizer=y}transform(y){return this.sanitizer.bypassSecurityTrustHtml(y)}static#t=this.\u0275fac=function(v){return new(v||b)(d.Y36(w.H7,16))};static#e=this.\u0275pipe=d.Yjl({name:"safeHtml",type:b,pure:!0})}return b})()},3739:(Z,P,a)=>{a.d(P,{f:()=>I});var d=a(4860),w=a(1916);function I(b){return{loader:{provide:w.Zw,useFactory:b,deps:[d.eN]},defaultLanguage:"en",isolate:!0}}},8206:(Z,P,a)=>{a.d(P,{M:()=>I});var d=a(2389),w=a(4980);class I{constructor(O,y,v){this.http=O,this.prefix=y,this.suffix=v}getTranslation(O){return this.http.get(`${this.prefix}${O}${this.suffix}`).pipe((0,d.K)(y=>(console.warn(`Translation: Failed to get language '${O}' from ${this.prefix}`,y),(0,w.of)({}))))}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.02/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_module_ts-projects_eav-ui_src_app_shared_comp-2b2737.fcc3ed0425f262b4.js.map