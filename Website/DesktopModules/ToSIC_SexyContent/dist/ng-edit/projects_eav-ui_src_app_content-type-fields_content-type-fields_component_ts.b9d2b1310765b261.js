"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts"],{3123:(E,_,s)=>{s.r(_),s.d(_,{ContentTypeFieldsComponent:()=>Pt});var p=s(8071),d=s(3839),h=s(9736),g=s(4980),a=s(4300),m=s(5530),C=s(3955),Z=s(8657),S=s(6041),F=s(6433),u=s(196),I=s(2957),P=s(6191),b=s(5809),R=s(9097),t=s(9039),N=s(9498),w=s(6515),B=s(257),$=s(8128),J=s(5392);function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openMetadata())}),t.TgZ(1,"mat-icon",11),t._uU(2,"local_offer"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount)}}function f(i,l){if(1&i&&(t.TgZ(0,"div",12)(1,"mat-icon",13),t._uU(2," local_offer "),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount)}}function O(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.shareOrInherit())}),t.TgZ(1,"mat-icon",15),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("tippy",e.shareText()),t.xp6(2),t.hij(" ",e.shareOrInheritIcon()," ")}}function c(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.shareOrInherit())}),t.TgZ(1,"mat-icon",17),t._uU(2," share "),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("tippy",e.shareText())}}function v(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openPermissions())}),t.TgZ(1,"mat-icon",11),t._uU(2," person "),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.field.Permissions.Count)("matBadgeHidden",!e.field.Permissions.Count)}}function D(i,l){if(1&i&&(t.TgZ(0,"div",12)(1,"mat-icon",13),t._uU(2," person "),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.field.Permissions.Count)("matBadgeHidden",!e.field.Permissions.Count)}}function T(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.rename())}),t.TgZ(1,"mat-icon"),t._uU(2,"text_fields"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Rename"),t.qZA()(),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteField())}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Delete"),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.field.EditInfo.DisableRename),t.xp6(5),t.Q6J("disabled",e.field.EditInfo.DisableDelete||e.field.IsTitle)}}let M=(()=>{class i extends R.f{constructor(){super()}ngOnDestroy(){super.ngOnDestroy()}agInit(e){this.params=e,this.field=this.params.data,this.metadataCount=this.field.Metadata?Object.keys(this.field.Metadata).filter(o=>"merged"!==o).length:0,this.enablePermissions=this.field.InputType===b.v.StringWysiwyg||this.field.Type===P.Q.Hyperlink}shareText(){const e="click to configure sharing",o=this.field.SysSettings;return o?o.Share?"shared enabled as "+this.field.Guid:o.InheritMetadataOf?"inherits "+o.InheritMetadataOf:e:e}shareOrInheritIcon(){const e=this.field.SysSettings;return e?e.Share?"share":e.InheritMetadataOf?"adjust":"":""}refresh(e){return!0}openMetadata(){this.params.onOpenMetadata(this.field)}rename(){this.params.onRename(this.field)}openPermissions(){this.params.onOpenPermissions(this.field)}deleteField(){this.params.onDelete(this.field)}shareOrInherit(){this.params.onShareOrInherit(this.field)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields-actions"]],features:[t.qOj],decls:13,vars:7,consts:[[1,"actions-component"],["class","eav-grid-action-button highlight","matRipple","","tippy","Metadata"],["class","eav-grid-action-button disabled"],["class","eav-grid-action-button highlight","matRipple","",3,"tippy"],["class","eav-grid-action-button disabled eav-hover-icon-div","matRipple","",3,"tippy"],["class","eav-grid-action-button highlight","matRipple","","tippy","Permissions"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Metadata",1,"eav-grid-action-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],[1,"eav-grid-action-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matRipple","",1,"eav-grid-action-button","highlight",3,"tippy","click"],["aria-hidden","false"],["matRipple","",1,"eav-grid-action-button","disabled","eav-hover-icon-div",3,"tippy","click"],["aria-hidden","false",1,"eav-hover-icon","disabled"],["matRipple","","tippy","Permissions",1,"eav-grid-action-button","highlight",3,"click"],["mat-menu-item","",3,"disabled","click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,k,3,2,"div",1)(2,f,3,2,"div",2)(3,O,3,2,"div",3)(4,c,3,1,"div",4)(5,v,3,2,"div",5)(6,D,3,2,"div",2),t.TgZ(7,"div",6)(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA()()(),t.TgZ(10,"mat-menu",7,8),t.YNc(12,T,10,2,"ng-template",9),t.qZA()),2&o){const r=t.MAs(11);t.xp6(1),t.um2(1,n.field.EditInfo.DisableMetadata?-1:1),t.xp6(1),t.um2(2,n.field.EditInfo.DisableMetadata?2:-1),t.xp6(1),t.um2(3,""!=n.shareOrInheritIcon()?3:-1),t.xp6(1),t.um2(4,""==n.shareOrInheritIcon()?4:-1),t.xp6(1),t.um2(5,!n.field.EditInfo.DisableEdit&&n.enablePermissions?5:-1),t.xp6(1),t.um2(6,n.field.EditInfo.DisableEdit||!n.enablePermissions?6:-1),t.xp6(1),t.Q6J("matMenuTriggerFor",r)}},dependencies:[N.$,w.Hw,B.wG,$.VK,$.OP,$.KA,$.p6,J.k],styles:[".eav-hover-icon[_ngcontent-%COMP%]{display:none}.eav-hover-icon-div[_ngcontent-%COMP%]:hover   .eav-hover-icon[_ngcontent-%COMP%]{display:block}"]})}return i})();function W(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeInputType())}),t.TgZ(1,"div",3),t._uU(2),t.qZA(),t.TgZ(3,"div",4)(4,"mat-icon"),t._uU(5,"arrow_drop_down"),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.value)}}function z(i,l){if(1&i&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7)(4,"mat-icon"),t._uU(5,"arrow_drop_down"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.value)}}let V=(()=>{class i{agInit(e){this.params=e,this.value=e.value,this.field=e.data}refresh(e){return!0}changeInputType(){this.params.onChangeInputType(this.field)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields-input-type"]],decls:2,vars:2,consts:[["matRipple","","class","input-component highlight"],["class","input-component disabled"],["matRipple","",1,"input-component","highlight",3,"click"],[1,"text"],[1,"eav-grid-action-button"],[1,"input-component","disabled"],[1,"text","disabled"],[1,"eav-grid-action-button","disabled"]],template:function(o,n){1&o&&t.YNc(0,W,6,1,"div",0)(1,z,6,1,"div",1),2&o&&(t.um2(0,n.field.EditInfo.DisableEdit?-1:0),t.xp6(1),t.um2(1,n.field.EditInfo.DisableEdit?1:-1))},dependencies:[w.Hw,B.wG]})}return i})();function q(i,l){1&i&&(t.TgZ(0,"mat-icon",1),t._uU(1,"functions"),t.qZA())}function tt(i,l){1&i&&(t.TgZ(0,"mat-icon",2),t._uU(1,"mobiledata_off"),t.qZA())}let et=(()=>{class i{agInit(e){const o=e.data;this.hasFormulas=o.HasFormulas,this.isEphemeral=o.IsEphemeral}refresh(e){return!0}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields-special"]],decls:3,vars:2,consts:[[1,"icon-container"],["tippy","Has Formulas"],["tippy","Ephemeral / Temporary, won't save"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,q,2,0,"mat-icon",1)(2,tt,2,0,"mat-icon",2),t.qZA()),2&o&&(t.xp6(1),t.um2(1,n.hasFormulas?1:-1),t.xp6(1),t.um2(2,n.isEphemeral?2:-1))},dependencies:[N.$,w.Hw]})}return i})();function nt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setTitle())}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.isTitle?"star":"star_outline")}}function it(i,l){if(1&i&&(t.TgZ(0,"div",4)(1,"mat-icon"),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.isTitle?"star":"star_outline")}}let ot=(()=>{class i{agInit(e){this.params=e,this.isTitle=e.value,this.field=e.data}refresh(e){return!0}setTitle(){this.params.onSetTitle(this.field)}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields-title"]],decls:3,vars:2,consts:[[1,"actions-component"],["class","eav-grid-action-button highlight","matRipple","","tippy","Use as title field"],["class","eav-grid-action-button disabled"],["matRipple","","tippy","Use as title field",1,"eav-grid-action-button","highlight",3,"click"],[1,"eav-grid-action-button","disabled"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.YNc(1,nt,3,1,"div",1)(2,it,3,1,"div",2),t.qZA()),2&o&&(t.xp6(1),t.um2(1,n.field.EditInfo.ReadOnly?-1:1),t.xp6(1),t.um2(2,n.field.EditInfo.ReadOnly?2:-1))},dependencies:[N.$,w.Hw,B.wG]})}return i})();var at=s(9294);let st=(()=>{class i{agInit(e){this.value=e.value,this.icon=(0,at.x)(this.value)}refresh(e){return!0}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields-type"]],decls:3,vars:2,consts:[[1,"icon-container",3,"tippy"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"mat-icon"),t._uU(2),t.qZA()()),2&o&&(t.Q6J("tippy",n.value),t.xp6(2),t.Oqu(n.icon))},dependencies:[N.$,w.Hw]})}return i})();var Q=s(5807),G=s(7043),lt=s(1527),H=s(6861),y=function(i){return i[i.None=0]="None",i[i.Sharing=1]="Sharing",i[i.Inheriting=2]="Inheriting",i}(y||{}),rt=s(8968),X=s(5331),dt=s(7648),L=s(6575),Y=s(895),A=s(5299),ct=s(8497),pt=s(425),ut=s(1916);function ht(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeDialog())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function gt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,e.message)," ",e.dialogData.Guid,"")}}function mt(i,l){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,e.message)," ",e.dialogData.SysSettings.InheritMetadataOf,"")}}function ft(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.chooseShare())}),t._uU(1,"Share"),t.qZA()}}function _t(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.chooseInherit())}),t._uU(1,"Inherit"),t.qZA()}}function Ct(i,l){1&i&&(t.TgZ(0,"span"),t._uU(1,"This will share the field definition"),t.qZA())}function vt(i,l){1&i&&(t.TgZ(0,"th",21)(1,"b"),t._uU(2,"Content Type"),t.qZA()())}function Tt(i,l){if(1&i&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.hij(" ",e.ContentType.Name," ")}}function yt(i,l){1&i&&(t.TgZ(0,"th",21)(1,"b"),t._uU(2,"Name"),t.qZA()())}function xt(i,l){if(1&i&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.hij(" ",e.StaticName," ")}}function Dt(i,l){1&i&&(t.TgZ(0,"th",21)(1,"b"),t._uU(2,"Type"),t.qZA()())}function It(i,l){if(1&i&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.hij(" ",e.Type," ")}}function St(i,l){1&i&&t._UZ(0,"tr",23)}const Ft=i=>({"eav-selected-row":i});function Ot(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit,x=t.oxw(3);return t.KtG(x.inheritField(r))}),t.qZA()}if(2&i){const e=l.$implicit,o=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Ft,o.guid===e.Guid))}}function bt(i,l){if(1&i&&(t.TgZ(0,"mat-card",12)(1,"table",13),t.ynx(2,14),t.YNc(3,vt,3,0,"th",15)(4,Tt,2,1,"td",16),t.BQk(),t.ynx(5,17),t.YNc(6,yt,3,0,"th",15)(7,xt,2,1,"td",16),t.BQk(),t.ynx(8,18),t.YNc(9,Dt,3,0,"th",15)(10,It,2,1,"td",16),t.BQk(),t.YNc(11,St,1,0,"tr",19)(12,Ot,1,3,"tr",20),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("dataSource",l.shareableFields),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedShareableFieldsColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedShareableFieldsColumns)}}function At(i,l){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ft,2,0,"button",7)(2,_t,2,0,"button",8)(3,Ct,2,0,"span")(4,bt,13,3,"mat-card",9),t.ALo(5,"async"),t.qZA()),2&i){const e=t.oxw();let o;t.xp6(1),t.um2(1,e.state==e.sharingOrInheriting.None?1:-1),t.xp6(1),t.um2(2,e.state==e.sharingOrInheriting.None?2:-1),t.xp6(1),t.um2(3,e.state==e.sharingOrInheriting.Sharing?3:-1),t.xp6(1),t.um2(4,(o=t.lcZ(5,4,e.state==e.sharingOrInheriting.Inheriting&&e.viewModel$))?4:-1,o)}}function Zt(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",25)(1,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeDialog())}),t._uU(2,"Cancel"),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.save())}),t.TgZ(4,"div",27)(5,"span"),t._uU(6,"Save"),t.qZA(),t._UZ(7,"app-feature-icon-indicator",28),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("disabled",e.isSaveDisabled),t.xp6(4),t.Q6J("featureNameId","FieldShareConfigManagement")}}let wt=(()=>{class i extends R.f{constructor(e,o,n,r,x,K,U){super(),this.dialogData=e,this.dialogRef=o,this.contentTypesFieldsService=n,this.featuresService=r,this.dialog=x,this.viewContainerRef=K,this.changeDetectorRef=U,this.displayedShareableFieldsColumns=["contentType","name","type"],this.state=y.None,this.initialState=y.None,this.sharingOrInheriting=y,this.guid=null,this.isSaveDisabled=!0,this.shareableFields$=new p.X(void 0)}ngOnInit(){if(this.initialState=this.dialogData.SysSettings&&(this.dialogData.SysSettings.Share||this.dialogData.SysSettings.InheritMetadataOf)?this.dialogData.SysSettings.Share?y.Sharing:y.Inheriting:y.None,this.initialState===y.None){this.title="SharingOrInheriting.TitleNone";const e=this.contentTypesFieldsService.getShareableFieldsFor(this.dialogData.AttributeId);this.viewModel$=(0,d.a)([e]).pipe((0,h.U)(([o])=>(this.shareableFields$.next(o),{shareableFields:o})))}else this.initialState===y.Sharing?(this.title="SharingOrInheriting.TitleSharing",this.message="SharingOrInheriting.MessageSharing"):this.initialState===y.Inheriting&&(this.title="SharingOrInheriting.TitleInheriting",this.message="SharingOrInheriting.MessageInheriting")}ngOnDestroy(){super.ngOnDestroy()}chooseShare(){this.guid=null,this.state=y.Sharing,this.isSaveDisabled=!1}chooseInherit(){this.guid=null,this.state=y.Inheriting,this.isSaveDisabled=!0}inheritField(e){this.guid=e.Guid,this.isSaveDisabled=!1}save(){this.featuresService.isEnabled$(X.C.FieldShareConfigManagement).pipe((0,lt.q)(1)).subscribe(e=>{e?this.state==y.Sharing?this.subscription.add(this.contentTypesFieldsService.share(this.dialogData.Id).subscribe(()=>this.dialogRef.close())):this.state==y.Inheriting&&this.subscription.add(this.contentTypesFieldsService.inherit(this.dialogData.Id,this.guid).subscribe(()=>this.dialogRef.close())):rt.B.openDialog(this.dialog,X.C.FieldShareConfigManagement,this.viewContainerRef,this.changeDetectorRef)})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(H.WI),t.Y36(H.so),t.Y36(Q.Mr),t.Y36(dt.k),t.Y36(H.uw),t.Y36(t.s_b),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-share-or-inherit-dialog"]],features:[t.qOj],decls:11,vars:8,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog"],[1,"eav-dialog-content"],["class","eav-dialog-actions"],["mat-icon-button","","tippy","Close dialog",3,"click"],["mat-raised-button","","type","button","class","eav-dialog-action-button"],["mat-raised-button","","type","button"],["class","eav-table-div"],["mat-raised-button","","type","button",1,"eav-dialog-action-button",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"eav-table-div"],["mat-table","",1,"mat-elevation-z8","eav-fields-table",3,"dataSource"],["matColumnDef","contentType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"ngClass","click"],[1,"eav-dialog-actions"],["mat-raised-button","","type","submit","color","accent",1,"eav-dialog-action-button",3,"disabled","click"],[1,"eav-button-feature"],[1,"eav-button-feature-icon",3,"featureNameId"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,ht,3,0,"button",3),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,gt,3,4,"div")(8,mt,3,4,"div")(9,At,6,6,"div"),t.qZA(),t.YNc(10,Zt,8,2,"div",5),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,6,n.title)," "),t.xp6(2),t.um2(5,n.initialState!=n.sharingOrInheriting.None?5:-1),t.xp6(2),t.um2(7,n.initialState==n.sharingOrInheriting.Sharing?7:-1),t.xp6(1),t.um2(8,n.initialState==n.sharingOrInheriting.Inheriting?8:-1),t.xp6(1),t.um2(9,n.initialState==n.sharingOrInheriting.None?9:-1),t.xp6(1),t.um2(10,n.initialState==n.sharingOrInheriting.None?10:-1))},dependencies:[L.mk,N.$,Y.lW,Y.RK,w.Hw,A.BZ,A.fO,A.as,A.w1,A.Dz,A.nj,A.ge,A.ev,A.XQ,A.Gk,ct.a8,pt.F,L.Ov,ut.X$],styles:[".eav-table-div[_ngcontent-%COMP%]{margin-top:8px;width:100%;max-height:400px;overflow-y:auto;border:1px solid rgba(0,0,0,.1)}.eav-table-div[_ngcontent-%COMP%]   .eav-selected-row[_ngcontent-%COMP%]{background-color:#00000026}.eav-dialog-actions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;padding:8px 0}.eav-dialog-action-button[_ngcontent-%COMP%]{margin-right:8px}.eav-dialog-action-button[_ngcontent-%COMP%]   .eav-button-feature[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.eav-dialog-action-button[_ngcontent-%COMP%]   .eav-button-feature[_ngcontent-%COMP%]   .eav-button-feature-icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:6px}"]})}return i})();var j=s(91),Mt=s(9409),Et=s(40),Rt=s(8621);const Nt=(i,l)=>({"grid-sorted":i,"grid-filtered":l});function Ut(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._uU(3),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeDialog())}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"div",5),t._UZ(8,"router-outlet"),t.TgZ(9,"div",6)(10,"ag-grid-angular",7),t.NdJ("rowDragEnter",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onRowDragEnter(n))})("rowDragEnd",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onRowDragEnd(n))})("rowDragMove",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onRowDragMove(n))})("gridReady",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onGridReady(n))})("sortChanged",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onSortChanged(n))})("filterChanged",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onFilterChanged(n))}),t.qZA()()(),t.TgZ(11,"mat-dialog-actions",8)(12,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.add())}),t.TgZ(13,"mat-icon"),t._uU(14,"add"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.hij(" ",(null==l.contentType?null:l.contentType.Label)||(null==l.contentType?null:l.contentType.Name)," Fields "),t.xp6(7),t.Q6J("rowData",l.fields)("gridOptions",e.gridOptions)("ngClass",t.WLB(5,Nt,e.sortApplied,e.filterApplied)),t.xp6(2),t.Q6J("disabled",null==l.contentType||l.contentType.EditInfo.ReadOnly)}}let Pt=(()=>{class i extends S.H{constructor(e,o,n,r,x,K,U){super(e,o),this.router=e,this.route=o,this.dialogRef=n,this.contentTypesService=r,this.contentTypesFieldsService=x,this.snackBar=K,this.dialog=U,this.contentType$=new p.X(void 0),this.fields$=new p.X(void 0),this.gridOptions=this.buildGridOptions(),this.sortApplied=!1,this.filterApplied=!1,this.rowDragSuppressed=!1,this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName")}ngOnInit(){this.fetchFields(),this.subscription.add(this.refreshOnChildClosedShallow().subscribe(()=>{this.fetchFields()})),this.viewModel$=(0,d.a)([this.contentType$,this.fields$]).pipe((0,h.U)(([e,o])=>({contentType:e,fields:o})))}ngOnDestroy(){this.contentType$.complete(),this.fields$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onGridReady(e){this.gridApi=e.api,this.columnApi=e.columnApi}onRowDragEnter(e){this.gridApi.setEnableCellTextSelection(!1)}onRowDragEnd(e){this.gridApi.setSuppressRowDrag(!0);const o=this.fields$.value.map(n=>n.Id);this.contentTypesFieldsService.reOrder(o,this.contentType$.value).subscribe(()=>{this.fetchFields(()=>{this.gridApi.setEnableCellTextSelection(!0),this.gridApi.setSuppressRowDrag(!1)})})}onRowDragMove(e){const o=e.node,n=e.overNode;if(n&&o!==n){const K=n.data,U=[...this.fields$.value],Bt=U.indexOf(o.data),$t=U.indexOf(K);this.moveInArray(U,Bt,$t),this.fields$.next(U),this.gridApi.clearFocusedCell()}}moveInArray(e,o,n){const r=e[o];e.splice(o,1),e.splice(n,0,r)}onSortChanged(e){const o=this.columnApi.getColumnState();this.sortApplied=o.some(n=>null!=n.sort),this.suppressRowDrag()}onFilterChanged(e){const o=this.gridApi.getFilterModel(),n=Object.keys(o);this.filterApplied=n.length>0,this.suppressRowDrag()}suppressRowDrag(){const e=this.sortApplied||this.filterApplied;e&&!this.rowDragSuppressed?(this.rowDragSuppressed=!0,this.gridApi.setSuppressRowDrag(!0)):!e&&this.rowDragSuppressed&&(this.rowDragSuppressed=!1,this.gridApi.setSuppressRowDrag(!1))}add(){this.router.navigate([`add/${this.contentTypeStaticName}`],{relativeTo:this.route})}nameCellRenderer(e){const o=e.data,n=o.InputType;if(G.z.endsPreviousGroup(n))return e.value;let r=!1;for(const x of this.fields$.value)if(G.z.isGroupStart(n))r=!0;else if(G.z.isGroupEnd(n))r=!1;else if(x.StaticName===o.StaticName)break;return r?`<span class="is-in-group">${e.value}</span>`:e.value}fetchFields(e){const o=null==this.contentType$.value?this.contentTypesService.retrieveContentType(this.contentTypeStaticName):(0,g.of)(this.contentType$.value),n=this.contentTypesFieldsService.getFields(this.contentTypeStaticName);(0,a.D)([o,n]).subscribe(([r,x])=>{this.contentType$.next(r),this.fields$.next(x),e?.()})}editFieldMetadata(e){if(e.SysSettings?.InheritMetadataOf){if(!Object.keys(e.ConfigTypes).length)return void this.snackBar.open("This field inherits all configuration so there is nothing to edit.",null,{duration:3e3});this.snackBar.open("This field inherits some configuration. Edit will only show configuration which is not inherited.",null,{duration:5e3})}e.SysSettings?.Share&&this.snackBar.open("This field is shared, so changing it will affect all other fields inheriting it.",null,{duration:5e3});const o={items:Object.keys(e.ConfigTypes).map(r=>this.createItemDefinition(e,r))},n=(0,I.f)(o);this.router.navigate([`edit/${n}`],{relativeTo:this.route})}createItemDefinition(e,o){const n=o.replace("@",""),r=("@"+o).replace("@@","@"),x=e.Metadata[n];return null!=x?{EntityId:x.Id}:{ContentTypeName:r,For:{Target:u.Zy.metadata.attribute.target,TargetType:u.Zy.metadata.attribute.targetType,Number:e.Id},Prefill:{Name:e.StaticName}}}setTitle(e){this.snackBar.open("Setting title..."),this.contentTypesFieldsService.setTitle(e,this.contentType$.value).subscribe(()=>{this.snackBar.open("Title set",null,{duration:2e3}),this.fetchFields()})}changeInputType(e){this.router.navigate([`update/${this.contentTypeStaticName}/${e.Id}/inputType`],{relativeTo:this.route})}rename(e){this.router.navigate([`update/${this.contentTypeStaticName}/${e.Id}/name`],{relativeTo:this.route})}delete(e){confirm(`Are you sure you want to delete '${e.StaticName}' (${e.Id})?`)&&(this.snackBar.open("Deleting..."),this.contentTypesFieldsService.delete(e,this.contentType$.value).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchFields()}))}openPermissions(e){this.router.navigate([Z.i.getUrlAttribute(e.Id)],{relativeTo:this.route})}openMetadata(e){const o=C.U.getUrlAttribute(e.Id,`Metadata for Field: ${e.StaticName} (${e.Id})`);this.router.navigate([o],{relativeTo:this.route})}shareOrInherit(e){this.dialog.open(wt,{autoFocus:!1,width:"800px",data:e}).afterClosed().subscribe(()=>this.fetchFields())}buildGridOptions(){return{...F.f,getRowClass(o){const n=o.data,r=[];return n.EditInfo.DisableSort&&r.push("disable-row-drag"),G.z.isGroupStart(n.InputType)&&r.push("group-start-row"),G.z.isGroupEnd(n.InputType)&&r.push("group-end-row"),r},columnDefs:[{rowDrag:!0,width:18,cellClass:"no-select no-padding no-outline".split(" ")},{field:"Title",width:42,cellClass:"secondary-action no-padding no-outline".split(" "),valueGetter:o=>o.data.IsTitle,cellRenderer:ot,cellRendererParams:(()=>({onSetTitle:n=>this.setTitle(n)}))()},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter",onCellClicked:o=>{this.editFieldMetadata(o.data)},cellRenderer:o=>this.nameCellRenderer(o),valueGetter:o=>o.data.StaticName},{field:"Type",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>o.data.Type,cellRenderer:st},{headerName:"Input",field:"InputType",width:160,cellClass:o=>(o.data.EditInfo.DisableEdit?"no-outline no-padding":"secondary-action no-padding").split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>{const n=o.data;return n.InputType.substring(n.InputType.indexOf("-")+1)},cellRenderer:V,cellRendererParams:(()=>({onChangeInputType:n=>this.changeInputType(n)}))()},{field:"Label",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>o.data.Metadata?.All?.Name},{field:"Special",width:66,headerClass:"dense",cellClass:"no-outline",cellRenderer:et},{field:"Notes",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>o.data.Metadata?.All?.Notes},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:M,cellRendererParams:(()=>({onRename:n=>this.rename(n),onDelete:n=>this.delete(n),onOpenPermissions:n=>this.openPermissions(n),onOpenMetadata:n=>this.openMetadata(n),onShareOrInherit:n=>this.shareOrInherit(n)}))()}]}}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(j.F0),t.Y36(j.gz),t.Y36(H.so),t.Y36(m.s),t.Y36(Q.Mr),t.Y36(Mt.ux),t.Y36(H.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-type-fields"]],features:[t.qOj],decls:2,vars:3,consts:[["class","eav-dialog nav-component-wrapper","appToggleDebug",""],["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions","ngClass","rowDragEnter","rowDragEnd","rowDragMove","gridReady","sortChanged","filterChanged"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Add fields",1,"grid-fab",3,"disabled","click"]],template:function(o,n){if(1&o&&(t.YNc(0,Ut,15,8,"div",0),t.ALo(1,"async")),2&o){let r;t.um2(0,(r=t.lcZ(1,1,n.viewModel$))?0:-1,r)}},dependencies:[L.mk,j.lC,Et.D,N.$,H.H8,Y.RK,Y.cs,w.Hw,Rt.N8,L.Ov]})}return i})()},425:(E,_,s)=>{s.d(_,{F:()=>F});var p=s(8968),d=s(9039),h=s(6861),g=s(7648),a=s(6515),m=s(9498),C=s(6575),Z=s(1916);function S(u,I){1&u&&(d.TgZ(0,"mat-icon",0),d.ALo(1,"translate"),d._uU(2,"diamond"),d.qZA()),2&u&&d.Q6J("tippy",d.lcZ(1,1,"Features.NotActivated"))}let F=(()=>{class u extends p.B{constructor(P,b,R,t){super(P,b,t,R)}static#t=this.\u0275fac=function(b){return new(b||u)(d.Y36(h.uw),d.Y36(d.s_b),d.Y36(g.k),d.Y36(d.sBO))};static#e=this.\u0275cmp=d.Xpm({type:u,selectors:[["app-feature-icon-indicator"]],features:[d.qOj],decls:2,vars:3,consts:[[3,"tippy"]],template:function(b,R){1&b&&(d.YNc(0,S,3,3,"mat-icon",0),d.ALo(1,"async")),2&b&&d.um2(0,d.lcZ(1,1,R.show$)?0:-1)},dependencies:[a.Hw,m.$,C.Ov,Z.X$]})}return u})()},5331:(E,_,s)=>{s.d(_,{C:()=>p});const p={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},8968:(E,_,s)=>{s.d(_,{B:()=>k});var p=s(6861),d=s(3839),h=s(9736),g=s(4472),a=s(9039),m=s(9409),C=s(8737),Z=s(895),S=s(6515),F=s(8497),u=s(9498),I=s(6575),P=s(6537),b=s(1916);function R(f,O){if(1&f){const c=a.EpF();a.TgZ(0,"div",1)(1,"div",2),a._uU(2,"ID:"),a.qZA(),a.TgZ(3,"div",8)(4,"span",9),a.NdJ("click",function(){const T=a.CHM(c),M=a.oxw(2);return a.KtG(M.copyToClipboard(T))}),a._uU(5),a.qZA()()()}2&f&&(a.xp6(4),a.Q6J("tippy",O),a.xp6(1),a.Oqu(O))}function t(f,O){if(1&f){const c=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(){const T=a.CHM(c),M=a.oxw(2);return a.KtG(M.findOutMore(T))}),a.TgZ(1,"mat-icon"),a._uU(2,"open_in_new"),a.qZA(),a._uU(3),a.ALo(4,"translate"),a.qZA()}2&f&&(a.xp6(3),a.hij(" ",a.lcZ(4,1,"Features.FindOutMore")," "))}function N(f,O){if(1&f){const c=a.EpF();a.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a._uU(3),a.qZA()(),a.TgZ(4,"mat-card-content"),a._UZ(5,"p",0),a.ALo(6,"safeHtml"),a.TgZ(7,"div",1)(8,"div",2),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.TgZ(11,"div",3)(12,"span"),a._uU(13),a.ALo(14,"translate"),a.qZA()()(),a.YNc(15,R,6,2,"div",4),a.qZA(),a.TgZ(16,"mat-card-actions",5),a.YNc(17,t,5,3,"button",6),a.TgZ(18,"button",7),a.NdJ("click",function(){a.CHM(c);const D=a.oxw();return a.KtG(D.closeDialog())}),a._uU(19),a.ALo(20,"translate"),a.qZA()()()}if(2&f){let c;a.xp6(3),a.Oqu(O.feature.Name),a.xp6(2),a.Q6J("innerHtml",a.lcZ(6,7,O.feature.Description),a.oJD),a.xp6(4),a.hij("",a.lcZ(10,9,"Features.Status"),":"),a.xp6(4),a.Oqu(a.lcZ(14,11,O.feature.IsEnabled?"Features.Active":"Features.NotActive")),a.xp6(2),a.um2(15,(c=O.feature.NameId)?15:-1,c),a.xp6(2),a.um2(17,(c=O.feature.Link)?17:-1,c),a.xp6(2),a.hij(" ",a.lcZ(20,13,"Features.Close")," ")}}let w=(()=>{class f{constructor(c,v,D,T){this.dialogData=c,this.dialogRef=v,this.snackBar=D,this.featureDetailService=T}ngOnInit(){this.viewModel$=(0,d.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,h.U)(([c])=>({feature:c})))}copyToClipboard(c){(0,g.v)(c),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(c){window.open(c,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(v){return new(v||f)(a.Y36(p.WI),a.Y36(p.so),a.Y36(m.ux),a.Y36(C.f))};static#e=this.\u0275cmp=a.Xpm({type:f,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["class","eav-info-row"],["align","end"],["mat-raised-button","","color","accent","class","eav-card-action-button"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"]],template:function(v,D){if(1&v&&(a.YNc(0,N,21,15,"mat-card"),a.ALo(1,"async")),2&v){let T;a.um2(0,(T=a.lcZ(1,1,D.viewModel$))?0:-1,T)}},dependencies:[Z.lW,S.Hw,F.a8,F.hq,F.dn,F.dk,F.n5,u.$,I.Ov,P.z,b.X$]})}return f})();var B=s(8071),$=s(1891),J=s(7648);let k=(()=>{class f{set featureNameId(c){this.featureNameId$.next(c)}set showIf(c){this.showIf$.next(1==c)}constructor(c,v,D,T){this.dialog=c,this.viewContainerRef=v,this.changeDetectorRef=D,this.featuresService=T,this.featureNameId$=new B.X(null),this.showIf$=new B.X(!1),this.feature$=this.featureNameId$.pipe((0,$.w)(M=>this.featuresService.get$(M))),this.show$=(0,d.a)([this.feature$,this.showIf$]).pipe((0,h.U)(([M,W])=>W==(M?.IsEnabled??!1)))}openDialog(){f.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(c,v,D,T){c.open(w,{autoFocus:!1,data:v,viewContainerRef:D,width:"400px"}),T.markForCheck()}static#t=this.\u0275fac=function(v){return new(v||f)(a.Y36(p.uw),a.Y36(a.s_b),a.Y36(a.sBO),a.Y36(J.k))};static#e=this.\u0275dir=a.lG2({type:f,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return f})()},6041:(E,_,s)=>{s.d(_,{H:()=>Z});var p=s(91),d=s(4520),h=s(5043),g=s(9736),a=s(9422),m=s(9097),C=s(9039);let Z=(()=>{class S extends m.f{constructor(u,I){super(),this.router=u,this.route=I}ngOnDestroy(){super.ngOnDestroy()}refreshOnChildClosedDeep(){return this.router.events.pipe((0,d.h)(u=>u instanceof p.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,g.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,a.G)(),(0,d.h)(([u,I])=>u&&!I))}refreshOnChildClosedShallow(){return this.router.events.pipe((0,d.h)(u=>u instanceof p.m2),(0,h.O)(!!this.route.snapshot.firstChild),(0,g.U)(()=>!!this.route.snapshot.firstChild),(0,a.G)(),(0,d.h)(([u,I])=>u&&!I))}static#t=this.\u0275fac=function(I){return new(I||S)(C.Y36(p.F0),C.Y36(p.gz))};static#e=this.\u0275dir=C.lG2({type:S,features:[C.qOj]})}return S})()},6433:(E,_,s)=>{s.d(_,{f:()=>p});const p={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},40:(E,_,s)=>{s.d(_,{D:()=>h});var p=s(3488),d=s(9039);let h=(()=>{class g{constructor(m){this.globalConfigService=m}onClick(m){(navigator.platform.match("Mac")?m.metaKey:m.ctrlKey)&&m.shiftKey&&m.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(C){return new(C||g)(d.Y36(p.bE))};static#e=this.\u0275dir=d.lG2({type:g,selectors:[["","appToggleDebug",""]],hostBindings:function(C,Z){1&C&&d.NdJ("click",function(F){return Z.onClick(F)})}})}return g})()},4472:(E,_,s)=>{function p(d){const h=document.createElement("textarea");h.value=d,h.setAttribute("readonly",""),h.style.position="absolute",h.style.left="-9999px",document.body.appendChild(h);const g=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);h.select(),document.execCommand("copy"),document.body.removeChild(h),g&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(g))}s.d(_,{v:()=>p})},6537:(E,_,s)=>{s.d(_,{z:()=>h});var p=s(9039),d=s(6480);let h=(()=>{class g{constructor(m){this.sanitizer=m}transform(m){return this.sanitizer.bypassSecurityTrustHtml(m)}static#t=this.\u0275fac=function(C){return new(C||g)(p.Y36(d.H7,16))};static#e=this.\u0275pipe=p.Yjl({name:"safeHtml",type:g,pure:!0})}return g})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.02/dist/ng-edit/projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts.b9d2b1310765b261.js.map