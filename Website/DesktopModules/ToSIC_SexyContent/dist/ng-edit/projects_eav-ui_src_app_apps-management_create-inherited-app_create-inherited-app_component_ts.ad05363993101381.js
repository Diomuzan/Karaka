"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts"],{4591:(I,u,n)=>{n.r(u),n.d(u,{CreateInheritedAppComponent:()=>D});var e=n(8849),d=n(8071),f=n(3839),A=n(9736),E=n(6680),t=n(9039),g=n(6861),v=n(9409),O=n(91),M=n(9851),T=n(895),o=n(1268),p=n(6355),_=n(257),c=n(6575);function h(a,s){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const i=s.$implicit;t.Q6J("value",i.Id),t.xp6(1),t.hij(" ",i.Name," ")}}function m(a,s){1&a&&(t.TgZ(0,"app-field-hint",8),t._uU(1," Required "),t.qZA()),2&a&&t.Q6J("isError",!0)}function P(a,s){if(1&a){const i=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._uU(3,"Create inherited App"),t.qZA()(),t.TgZ(4,"div",4),t._UZ(5,"router-outlet"),t.TgZ(6,"p"),t._uU(7," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.qZA(),t.TgZ(8,"form",5)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Inherit App"),t.qZA(),t.TgZ(12,"mat-select",7),t.SjG(13,h,2,2,"mat-option",12,t.x6l),t.qZA()(),t.YNc(15,m,2,1,"app-field-hint",8),t.qZA()(),t.TgZ(16,"mat-dialog-actions",9)(17,"button",10),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.closeDialog())}),t._uU(18," Cancel "),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.create())}),t._uU(20," Create "),t.qZA()()()}if(2&a){const i=t.oxw();t.xp6(8),t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("placeholder",void 0===s.inheritableApps?"Loading...":null===s.inheritableApps||0===s.inheritableApps.length?"No inheritable apps found":""),t.xp6(1),t.wJu(s.inheritableApps),t.xp6(2),t.um2(15,i.form.controls.inheritId.touched&&null!=i.form.controls.inheritId.errors&&i.form.controls.inheritId.errors.required?15:-1),t.xp6(2),t.Q6J("disabled",s.loading),t.xp6(2),t.Q6J("disabled",s.loading||!i.form.valid)}}let D=(()=>{class a{constructor(i,r,l){this.dialogRef=i,this.appsListService=r,this.snackBar=l,this.hostClass="dialog-component",this.form=this.buildForm(),this.loading$=new d.X(!1),this.inheritableApps$=new d.X(void 0),this.viewModel$=(0,f.a)([this.loading$,this.inheritableApps$]).pipe((0,A.U)(([C,x])=>({loading:C,inheritableApps:x})))}ngOnInit(){this.fetchInheritedApps()}ngOnDestroy(){this.loading$.complete(),this.inheritableApps$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const i=this.form.controls.inheritId.value,r=this.inheritableApps$.value.find(l=>l.Id===i).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(r,i).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps$.next(null)},next:i=>{this.inheritableApps$.next(i)}})}buildForm(){return new e.nJ({inheritId:new e.p4(null,[e.kI.required])})}static#t=this.\u0275fac=function(r){return new(r||a)(t.Y36(g.so),t.Y36(E.A),t.Y36(v.ux))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(r,l){2&r&&t.Ikx("className",l.hostClass)},decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"]],template:function(r,l){if(1&r&&(t.YNc(0,P,21,5,"div",0),t.ALo(1,"async")),2&r){let C;t.um2(0,(C=t.lcZ(1,1,l.viewModel$))?0:-1,C)}},dependencies:[O.lC,M.Y,g.H8,T.lW,e._Y,e.JJ,e.JL,o.KE,o.hX,e.sg,e.u,p.gD,_.ey,c.Ov]})}return a})()},9851:(I,u,n)=>{n.d(u,{Y:()=>T});var e=n(9039),d=n(6575),f=n(1268);function A(o,p){1&o&&e.GkF(0)}function E(o,p){if(1&o&&(e.TgZ(0,"mat-hint"),e.YNc(1,A,1,0,"ng-container",2),e.qZA()),2&o){e.oxw();const _=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function t(o,p){1&o&&e.GkF(0)}function g(o,p){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,t,1,0,"ng-container",2),e.qZA()),2&o){e.oxw();const _=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function v(o,p){1&o&&e.Hsn(0)}const O=o=>({"hint-box__short":o}),M=["*"];let T=(()=>{class o{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(c){return new(c||o)};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:M,decls:5,vars:4,consts:[[1,"hint-box",3,"ngClass","click"],["content",""],[4,"ngTemplateOutlet"]],template:function(c,h){if(1&c&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(){return h.toggleIsShort()}),e.YNc(1,E,2,1)(2,g,2,1),e.qZA(),e.YNc(3,v,1,0,"ng-template",null,1,e.W1O)),2&c){let m;e.Q6J("ngClass",e.VKq(2,O,h.isShort)),e.xp6(1),e.um2(1,!1===(m=h.isError)?1:!0===m?2:-1)}},dependencies:[d.mk,d.tP,f.bx,f.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.ad05363993101381.js.map