"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{4533:(Z,v,n)=>{n.r(v),n.d(v,{AddAppFromFolderComponent:()=>B});var m=n(9877),T=n(8071),u=n(3317),_=n(3839),t=n(5043),M=n(1891),E=n(2389),S=n(4980),P=n(5584),x=n(9736),U=n(5331),b=n(9097),w=n(6433),N=n(6680),e=n(9039),$=n(9498),c=n(6515);let y=(()=>{class r{agInit(i){this.name=i.value,this.tooltip=i.tooltipGetter(i.data)}refresh(i){return!0}static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(a,l){1&a&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",1),e._uU(4,"info"),e.qZA()()),2&a&&(e.xp6(2),e.Oqu(l.name),e.xp6(1),e.Q6J("tippy",l.tooltip))},dependencies:[$.$,c.Hw],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return r})(),p=(()=>{class r{agInit(i){this.params=i}refresh(i){return!0}onChange(i){this.params.onChange(this.params.data,i.currentTarget.checked)}static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"disabled","checked","change"]],template:function(a,l){1&a&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function(L){return l.onChange(L)}),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("disabled",l.params.isDisabled)("checked",l.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return r})();var C=n(6861),A=n(9409),O=n(7648),s=n(8621),h=n(895),o=n(9818),d=n(6575);function g(r,D){1&r&&(e.TgZ(0,"p"),e._uU(1," Nothing to show. All apps in the 2sxc folder are already installed. "),e.qZA())}function f(r,D){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"ag-grid-angular",9),e.qZA()),2&r){const i=e.oxw(),a=e.oxw();e.xp6(1),e.Q6J("rowData",i.pendingApps)("gridOptions",a.gridOptions)}}function F(r,D){if(1&r){const i=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._uU(3,"Add App from Folder"),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"app-feature-text-info",5),e.TgZ(6,"p"),e._uU(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),e.qZA(),e.YNc(8,g,2,0,"p")(9,f,2,2,"div"),e.qZA(),e.TgZ(10,"mat-dialog-actions",6)(11,"button",7),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.closeDialog())}),e._uU(12," Cancel "),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){e.CHM(i);const l=e.oxw();return e.KtG(l.install())}),e._uU(14," Install "),e.qZA()()()}if(2&r){const i=e.oxw();e.xp6(5),e.Q6J("featureNameId","AppSyncWithSiteFiles"),e.xp6(3),e.um2(8,0==(null==D.pendingApps?null:D.pendingApps.length)?8:-1),e.xp6(1),e.um2(9,(null==D.pendingApps?null:D.pendingApps.length)>0?9:-1),e.xp6(4),e.Q6J("disabled",0===i.pendingApps.length||i.installing)}}let B=(()=>{class r extends b.f{constructor(i,a,l,I){super(),this.dialogRef=i,this.appsListService=a,this.snackBar=l,this.featuresService=I,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new m.x,this.isAddFromFolderEnabled$=new T.X(!1)}ngOnInit(){this.subscription.add(this.featuresService.isEnabled$(U.C.AppSyncWithSiteFiles).pipe((0,u.x)()).subscribe(this.isAddFromFolderEnabled$)),this.viewModel$=(0,_.a)([this.refreshApps$.pipe((0,t.O)(void 0),(0,M.w)(()=>this.appsListService.getPendingApps().pipe((0,E.K)(()=>(0,S.of)(void 0)))),(0,P.B)())]).pipe((0,x.U)(([i])=>({pendingApps:i})))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(i,a){a?this.pendingApps.push(i):this.pendingApps.splice(this.pendingApps.indexOf(i),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...w.f,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:p,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled$.value,onChange:(l,I)=>this.onChange(l,I)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:y,cellRendererParams:{tooltipGetter:l=>`Server folder: ${l.ServerFolder}\nFolder: ${l.Folder}\nVersion: ${l.Version}\nDescription: ${l.Description}`}}]}}static#t=this.\u0275fac=function(a){return new(a||r)(e.Y36(C.so),e.Y36(N.A),e.Y36(A.ux),e.Y36(O.k))};static#e=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(a,l){2&a&&e.Ikx("className",l.hostClass)},features:[e.qOj],decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(a,l){if(1&a&&(e.YNc(0,F,15,4,"div",0),e.ALo(1,"async")),2&a){let I;e.um2(0,(I=e.lcZ(1,1,l.viewModel$))?0:-1,I)}},dependencies:[C.H8,s.N8,h.lW,o.B,d.Ov],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return r})()},5331:(Z,v,n)=>{n.d(v,{C:()=>m});const m={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},9818:(Z,v,n)=>{n.d(v,{B:()=>$});var m=n(8968),T=n(8071),u=n(3839),_=n(9736),t=n(9039),M=n(6861),E=n(7648),S=n(6515),P=n(9498),x=n(6575),U=n(1916);function b(c,y){if(1&c){const p=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(p);const A=t.oxw(2);return t.KtG(A.openDialog())}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",5),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&c){const p=t.oxw();t.Q6J("tippy",t.xi3(1,7,"Features.Tooltip",p.feature)),t.xp6(2),t.Gre("icon icon-",p.icon,""),t.xp6(1),t.Oqu(p.icon),t.xp6(3),t.Oqu(t.lcZ(7,10,"Features.FeatureNotActivated")),t.xp6(3),t.Oqu(t.lcZ(10,12,"Features.ClickToFindOutMore"))}}function w(c,y){1&c&&t.YNc(0,b,11,14,"div",1),2&c&&t.um2(0,y.show?0:-1)}function N(c,y){1&c&&(t.TgZ(0,"div"),t._uU(1,"loading..."),t.qZA())}function e(c,y){1&c&&(t.TgZ(0,"div"),t._uU(1,"loading..."),t.qZA())}let $=(()=>{class c extends m.B{set asInfo(p){this.asInfo$.next(p)}constructor(p,C,A,O){super(p,C,O,A),this.asInfo$=new T.X(!1),this.viewModel$=(0,u.a)([this.feature$,this.asInfo$,this.show$]).pipe((0,_.U)(([s,h,o])=>({feature:s,icon:h?"info":"warning",show:o})))}static#t=this.\u0275fac=function(C){return new(C||c)(t.Y36(M.uw),t.Y36(t.s_b),t.Y36(E.k),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},features:[t.qOj],decls:5,vars:3,consts:[["loading",""],["class","feature-text-info",3,"tippy"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(C,A){if(1&C&&(t.YNc(0,w,1,1),t.ALo(1,"async"),t.YNc(2,N,2,0)(3,e,2,0,"ng-template",null,0,t.W1O)),2&C){let O;t.um2(0,(O=t.lcZ(1,1,A.viewModel$))?0:2,O)}},dependencies:[S.Hw,P.$,x.Ov,U.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return c})()},8968:(Z,v,n)=>{n.d(v,{B:()=>O});var m=n(6861),T=n(3839),u=n(9736),_=n(4472),t=n(9039),M=n(9409),E=n(8737),S=n(895),P=n(6515),x=n(8497),U=n(9498),b=n(6575),w=n(6537),N=n(1916);function e(s,h){if(1&s){const o=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._uU(2,"ID:"),t.qZA(),t.TgZ(3,"div",8)(4,"span",9),t.NdJ("click",function(){const f=t.CHM(o),F=t.oxw(2);return t.KtG(F.copyToClipboard(f))}),t._uU(5),t.qZA()()()}2&s&&(t.xp6(4),t.Q6J("tippy",h),t.xp6(1),t.Oqu(h))}function $(s,h){if(1&s){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const f=t.CHM(o),F=t.oxw(2);return t.KtG(F.findOutMore(f))}),t.TgZ(1,"mat-icon"),t._uU(2,"open_in_new"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&s&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Features.FindOutMore")," "))}function c(s,h){if(1&s){const o=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content"),t._UZ(5,"p",0),t.ALo(6,"safeHtml"),t.TgZ(7,"div",1)(8,"div",2),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",3)(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.YNc(15,e,6,2,"div",4),t.qZA(),t.TgZ(16,"mat-card-actions",5),t.YNc(17,$,5,3,"button",6),t.TgZ(18,"button",7),t.NdJ("click",function(){t.CHM(o);const g=t.oxw();return t.KtG(g.closeDialog())}),t._uU(19),t.ALo(20,"translate"),t.qZA()()()}if(2&s){let o;t.xp6(3),t.Oqu(h.feature.Name),t.xp6(2),t.Q6J("innerHtml",t.lcZ(6,7,h.feature.Description),t.oJD),t.xp6(4),t.hij("",t.lcZ(10,9,"Features.Status"),":"),t.xp6(4),t.Oqu(t.lcZ(14,11,h.feature.IsEnabled?"Features.Active":"Features.NotActive")),t.xp6(2),t.um2(15,(o=h.feature.NameId)?15:-1,o),t.xp6(2),t.um2(17,(o=h.feature.Link)?17:-1,o),t.xp6(2),t.hij(" ",t.lcZ(20,13,"Features.Close")," ")}}let y=(()=>{class s{constructor(o,d,g,f){this.dialogData=o,this.dialogRef=d,this.snackBar=g,this.featureDetailService=f}ngOnInit(){this.viewModel$=(0,T.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,u.U)(([o])=>({feature:o})))}copyToClipboard(o){(0,_.v)(o),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(o){window.open(o,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(d){return new(d||s)(t.Y36(m.WI),t.Y36(m.so),t.Y36(M.ux),t.Y36(E.f))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["class","eav-info-row"],["align","end"],["mat-raised-button","","color","accent","class","eav-card-action-button"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"]],template:function(d,g){if(1&d&&(t.YNc(0,c,21,15,"mat-card"),t.ALo(1,"async")),2&d){let f;t.um2(0,(f=t.lcZ(1,1,g.viewModel$))?0:-1,f)}},dependencies:[S.lW,P.Hw,x.a8,x.hq,x.dn,x.dk,x.n5,U.$,b.Ov,w.z,N.X$]})}return s})();var p=n(8071),C=n(1891),A=n(7648);let O=(()=>{class s{set featureNameId(o){this.featureNameId$.next(o)}set showIf(o){this.showIf$.next(1==o)}constructor(o,d,g,f){this.dialog=o,this.viewContainerRef=d,this.changeDetectorRef=g,this.featuresService=f,this.featureNameId$=new p.X(null),this.showIf$=new p.X(!1),this.feature$=this.featureNameId$.pipe((0,C.w)(F=>this.featuresService.get$(F))),this.show$=(0,T.a)([this.feature$,this.showIf$]).pipe((0,u.U)(([F,B])=>B==(F?.IsEnabled??!1)))}openDialog(){s.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(o,d,g,f){o.open(y,{autoFocus:!1,data:d,viewContainerRef:g,width:"400px"}),f.markForCheck()}static#t=this.\u0275fac=function(d){return new(d||s)(t.Y36(m.uw),t.Y36(t.s_b),t.Y36(t.sBO),t.Y36(A.k))};static#e=this.\u0275dir=t.lG2({type:s,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return s})()},6433:(Z,v,n)=>{n.d(v,{f:()=>m});const m={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},4472:(Z,v,n)=>{function m(T){const u=document.createElement("textarea");u.value=T,u.setAttribute("readonly",""),u.style.position="absolute",u.style.left="-9999px",document.body.appendChild(u);const _=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);u.select(),document.execCommand("copy"),document.body.removeChild(u),_&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(_))}n.d(v,{v:()=>m})}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.01.02/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.30d3f41c0a751eaf.js.map